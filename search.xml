<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>【喜马拉雅】产品分析报告</title>
      <link href="/posts/422f85b0.html"/>
      <url>/posts/422f85b0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><blockquote><p>第一次写产品分析报告，感觉还有很多可以改进的地方😋</p></blockquote><h1 id="一、产品概况"><a href="#一、产品概况" class="headerlink" title="一、产品概况"></a>一、产品概况</h1><h2 id="（一）-产品简介"><a href="#（一）-产品简介" class="headerlink" title="（一） 产品简介"></a>（一） 产品简介</h2><p>喜马拉雅FM是喜马拉雅旗下的一款音频分享平台，于 2013 年 3 月正式上线，总部位于上海。</p><p>喜马拉雅FM的主要功能为提供各类有声内容，包括小说，相声，音乐，儿童，科普，外语等。用户可以根据自己的喜好和需求，选择不同的分类和排行榜，收听免费或VIP的有声作品。后期衍生出私人FM、录音剪辑、一起听、锁屏点赞、AI续写等服务。</p><h2 id="（二）-体验环境"><a href="#（二）-体验环境" class="headerlink" title="（二） 体验环境"></a>（二） 体验环境</h2><p>手机型号：iPhone 13 Pro Max</p><p>系统版本：17.5.1</p><p>应用版本：9.2.84</p><h1 id="二、市场分析"><a href="#二、市场分析" class="headerlink" title="二、市场分析"></a>二、市场分析</h1><h2 id="（一）行业环境"><a href="#（一）行业环境" class="headerlink" title="（一）行业环境"></a>（一）行业环境</h2><ol><li><strong>政策层面</strong></li></ol><p>《中华人民共和国著作权法》明确音频制品版权保护，再加上相关部门严厉打击网络侵权盗版行为，行业规范逐步落实，行业版权环境趋好；此外，国家大力推进文化创意服务产业如音频、网络文学、出版间的融合发展。</p><ol start="2"><li><strong>经济层面</strong></li></ol><p>《2024 播客行业报告》（下面简称《报告》）指出，播客在种草和广告方面具有显著效果，近半数听众在过去一年内购买过付费播客节目，且 52.7% 的听众对播客中广告持宽容态度。此外，播客还能有效引导听众进行商品搜索和消费，有 51% 的受访者表示曾在播客中听到的商品上进行过消费。</p><img src="/posts/422f85b0/image1.png" class="" title="图片"><center>图1：2023年播客消费统计图（来源：《2024播客行业报告》）</center><ol start="3"><li><strong>社会层面</strong></li></ol><p>首先，播客作为一种热媒介，播客主播所带来的陪伴感，内容带来的慰藉和治愈，都是用户收听播客的情感驱动力。</p><p>其次，身处信息过载的时代，信息焦虑变得越来越常见，碎片化的信息是片面的、不完整的，人们渐渐丧失了摄入大段且完整有效的信息的耐心和能力，同时却对高质量内容和高价值的表达有很大需求，播客展示出另一种获取内容的方式：听。在短视频泛滥，无数产品争相抢占用户的屏幕时，越来越多的用户产生了从手机屏幕中解脱出来的想法，播客刚好提供了这样的渠道。</p><ol start="4"><li><strong>技术层面</strong></li></ol><p>自动语音识别（ASR）自然语言处理（NLP）文本转语音（TTS）等AI技术可以广泛应用在音频行业，一方面聚焦于对平台自身运营管理效率的提高，另一方面用于助力音频内容生产的提质增速，激活现实体验场景。例如，在平台内部，AI全面接入对上传风险内容的审核流程，将极大降低人力成本并提升运作效率。</p><h2 id="（二）市场现状"><a href="#（二）市场现状" class="headerlink" title="（二）市场现状"></a>（二）市场现状</h2><ol><li><strong>市场规模</strong></li></ol><p>在优质内容供应增加、用户基础扩大、技术实力提高及有利监管政策等因素的驱动下，中国在线音频行业持续快速增长。截至2023年，中国在线音频市场规模达250亿元，近五年年均复合增长率达35.12%。中商产业研究院分析师预测，2024年中国在线音频市场规模将增至287亿元。</p><img src="/posts/422f85b0/image2.png" class="" title="img"><center>图2：2019-2024年中国在线音频市场规模预测趋势图（来源：灼识咨询、中商产业研究院整理）</center><p>由于市场总量保持稳健较快增长，增速波动拉升后趋于平缓回落。目前网络音频行业在新增流量见顶后进入稳定发展的平台期，主要音频平台的商业竞争进入下半场，依托独特、优质内容构建护城河、维持用户粘性（高留存率）成为关键所在。</p><ol><li><strong>市场格局</strong></li></ol><p>根据最新发布的《中国网络视听发展研究报告（2024）》（以下简称《报告》）显示：网络音频市场活跃用户头部平台聚集效应明显，其中喜马拉雅FM用户渗透率为77.8%，牢牢占据第一梯队；蜻蜓FM和猫耳FM居第二梯队，用户渗透率为9.3%。</p><img src="/posts/422f85b0/image3.png" class="" title="img"><center>图3：2023年中国网络音频平台用户渗透率对比图（来源：QuestMobile）</center><p>网络音频用户规模在经历了2019年之前移动互联网业务扩张期的迅猛增长后，整体增速放缓并趋于平稳。2022年中国主要网络音频平台用户规模已达3亿，预估音频用户规模将在2026年突破3.5亿后保持相对稳定。</p><img src="/posts/422f85b0/image4.png" class="" title="img"><center>图4：2020-2026年主要网络音频平台用户规模及预测图（来源：艾瑞网）</center><h1 id="三、用户分析"><a href="#三、用户分析" class="headerlink" title="三、用户分析"></a>三、用户分析</h1><h2 id="（一）用户基本属性"><a href="#（一）用户基本属性" class="headerlink" title="（一）用户基本属性"></a>（一）用户基本属性</h2><ol><li><strong>性别比例</strong></li></ol><p>播客产品用户中，66.6%为女性，33.4%为男性，女性听众占比2&#x2F;3，这种听众性别比例的差异可能是内容创作导向与听众偏好共同推动的结果。这是由于近年来女性思潮崛起，更多女性创作者走上前台，同时播客市场中也出现了更多自我成长与治愈、聊天陪伴以及情感生活类节目，形成良性循环。</p><p>值得注意的是，男性听众群体依然有巨大潜力，对于播客的使用更加重度，男性听众中每周收听播客5天以上的占比为43.3%，相比女性听众高出近7个百分点。</p><ol><li><strong>年龄分布</strong></li></ol><p>播客产品用户中18岁以下占比7.4%，18-40岁为78.7%，40岁以上占14%。</p><p>分析播客年龄分布集中在18-40岁区间的原因，一方面由于这个年龄段的用户比较年轻，易于接受这种新型的互联网产品形式；另一方面这个年龄段大都处在职场上升期或者具备了一定的经济实力，所以他（她）们处于学习或者娱乐的目的更愿意为好的内容买单。</p><img src="/posts/422f85b0/image5.png" class="" title="img"><center>图5：2023年主要网络音频平台用户年龄分布图（来源：《2024播客行业报告》）</center><ol><li><strong>教育背景</strong></li></ol><p>对播客产品用户的学历进行分析，高中及以下占比12.3%，大专13.6%，本科56.4%，硕士及以上为17.7%。2020-2023年，中文播客用户的本科学历基本维持在50%，而在18-40岁的核心年龄段听众中，本科及以上占比81.3%，反映了听众受教育程度普遍较高。大专及以下比例由去年的9.5%明显上升，达到了25.9%。说明播客的受众教育背景覆盖面较以前更广，吸引了各教育层次人群。</p><p>浅析原因，高学历的用户对自我成长与自我意识的提升有强烈的需求，对收获高价值内容的需要高于社会平均水平，而低学历用户在无法带手机进入学校的同时仍能选择用随身听来“听”播客，播客用户更多元化。</p><ol><li><strong>消费能力</strong></li></ol><p>2023年在职员工和学生是播客产品收听主力为在职员工和学生，其中在职员工占比47.2%，学生占比21.1%，占比近7成。播客产品70%的用户月均收入处于5001-20000人民币，相较于早期播客听众“高收入”的印象，当下播客听众收入分布更广泛均衡。</p><img src="/posts/422f85b0/image6.png" class="" title="img"><center>图6：2023年主要网络音频平台用户税前月收入图（来源：《2024播客行业报告》）</center><ol><li><strong>地域分布</strong></li></ol><p>分析播客平台用户的地域分布，国内一线城市用户占比30.4%，新一线城市29.7%，二三线城市共占39.8%。2024年7月份喜马拉雅发布的《2024春季有声阅读数据报告》显示，高粘度播客听众主要分布在北上广，其中北京地区占6.41%，广东占4.58%，上海占2.99%，天津、深圳、杭州听众人数仅次于北上广，均在2％以上。这些城市的经济水平发达，用户的整体收入水平更高，消费能力更强，对应着价格敏感度较低，为优质内容付费的顾虑少。</p><img src="/posts/422f85b0/image7.png" class="" title="img"><center>图7：2024年春季喜马拉雅FM高粘度优质付费用户常驻城市分布、TOP15常驻城市图（来源：《2024春季有声阅读数据报告》）</center><p>同时，这些城市的竞争激烈、压力较大，用户有更强的自我提升需求。用户大量集中在一线城市，同时2020-2023年受众月收入逐年提高，可以推测喜马拉雅FM在高端市场具有很大的上升空间，触达了高端人群的需求。</p><p>需要注意，二线城市的使用占比和一线城市形成了较大差距，这在某种程度上说明喜马拉雅FM目前的市场还较局限，在下沉市场尚未被看到，如果想要获得更大的市场和用户群，播客文化能否打破圈层，喜马拉雅FM能否实现渠道下沉是一个值得思考的问题。</p><h2 id="（二）用户行为特征"><a href="#（二）用户行为特征" class="headerlink" title="（二）用户行为特征"></a>（二）用户行为特征</h2><p>大多数播客受众收听播客主要集中于休息&#x2F;娱乐时、通勤&#x2F;开车、睡前时段、做家务时、运动健身，这段时间累加的占比占据绝对优势。播客占用的是用户的碎片化时间，在完成低集中度任务时，用户的收听趋势明显，换句话说，播客可以使用户的注意力被灵活地使用，陪伴属性更强。</p><p>休闲放松、获取知识、情绪陪伴是收听播客的3个主要目的，只有1成的听众在收听播客时会完全专注，不做其他任何事情。</p><img src="/posts/422f85b0/image8.png" class="" title="img"><center>图8：2023年主要网络音频平台用户收听播客的情境统计图（来源：《2024播客行业报告》）</center><h2 id="（三）用户画像"><a href="#（三）用户画像" class="headerlink" title="（三）用户画像"></a>（三）用户画像</h2><p>结合以上播客相关调研数据，描绘出喜马拉雅FM的用户画像如下。</p><ul><li><strong>一线二线较发达地区的城市公司职员：</strong>平时工作较忙，很难挤出时间学习某个领域的知识，利用碎片化时间学习对他（她）们很重要。在上下班通勤的时候通过平台听听资讯或者课程，用于掌握新闻热点和自我提升，或者睡前听一本书，汲取书中精华；</li><li><strong>大学生群体：</strong>时间较为充裕，对于新鲜事物的接受度很高，乐于尝试这样的音频付费产品，可以通过平台进行娱乐消遣或者订阅相关课程自我提升；</li><li><strong>出租车司机：</strong>平时大部分时间都在车上，活动空间受限，而有声音频则提供了一个很好的消遣娱乐的方式，听听新闻、段子、脱口秀或电台，打发开车时的无聊时光。随着网约车的普及，为了给乘客提供较好的用户体验，司机可以通过一些轻音乐电台给用户营造一个放松的环境；</li><li><strong>某些特殊内容的消费群体：</strong>例如相声小品类内容，可能就很受东北地区人民的欢迎；某些亲子类内容，就很容易受到妈妈们的关注。</li></ul><h2 id="（四）用户需求"><a href="#（四）用户需求" class="headerlink" title="（四）用户需求"></a>（四）<strong>用户需求</strong></h2><p>按照狩野纪昭发明的KANO模型对用户需求进行分类和排序，在KANO模型中用户需求被分为五类：基本（必备）型、期望（意愿）型、魅力型、无差异型和反向型。这里选取了前三类需求类型对喜马拉雅的用户需求进行了细化分析，如下图所示：</p><p>注：将用户分为内容消费者和内容产出者两大类，分别进行需求点分析</p><img src="/posts/422f85b0/image9.png" class="" title="img"><center>图9：喜马拉雅FM用户需求图</center><h1 id="四、产品结构分析"><a href="#四、产品结构分析" class="headerlink" title="四、产品结构分析"></a>四、产品结构分析</h1><h2 id="（一）产品结构图"><a href="#（一）产品结构图" class="headerlink" title="（一）产品结构图"></a>（一）产品结构图</h2><img src="/posts/422f85b0/image10.png" class="" title="img"><img src="/posts/422f85b0/image11.png" class="" title="img"><center>图10：喜马拉雅FM产品结构图</center><p>喜马拉雅的核心功能分为5个模块：</p><ol><li>首页（内容发现）：主要功能是对各类音频内容的分类、推荐、搜索和反馈。</li><li>播放：用户对所收听音频进行操作，包括详情、点赞、收藏等，以及音频播放时的设置和反馈。</li><li>订阅：整合多种个性化服务和互动社区功能，主要包括个人订阅内容、节目动态、大赛活动、视频社区、福利广场，以及用户自建的圈子社区，为用户提供多元化的内容订阅和社交互动体验。</li><li>我的：普通用户用于管理账号、会员、积分和个人发布的内容等信息；主播通过平台认证后可使用更多功能，如每日数据、管理收益、推广等功能。除此之外，支持多种不同模式的用户偏好设置。音频管理也涵盖在该模块内，主要是对用户订阅、收听、下载、购买的音频内容进行管理，用户也可以创建自定义听单来管理音频。</li><li>设置：连接智能设备；推送、隐私、收听偏好和播放偏好等用户自定义设置。</li></ol><h2 id="（二）用户路径图"><a href="#（二）用户路径图" class="headerlink" title="（二）用户路径图"></a>（二）用户路径图</h2><p>场景一：收听音频</p><img src="/posts/422f85b0/image12.png" class="" title="img"><center>图11：喜马拉雅FM用户收听音频路径图</center><p>场景二：发布音频</p><img src="/posts/422f85b0/image13.png" class="" title="img"><center>图12：喜马拉雅FM用户发布音频路径图</center><h2 id="（三）产品核心功能页面分析"><a href="#（三）产品核心功能页面分析" class="headerlink" title="（三）产品核心功能页面分析"></a>（三）产品核心功能页面分析</h2><p><strong>收听音频模块核心功能体验分析</strong></p><p><strong>搜索功能</strong>：喜马拉雅FM采用图标配合文字的方式展现内容，主页推送了大量的高分音频专辑，吸引用户进行收听和付费。顶部置有搜索框，当有目标音频时，可以点击搜索框，跳转界面后可以直接对音频作品或主播直接搜索，也可以根据推荐搜索、热搜榜和搜索历史信息进行选择。</p><p>在搜索模块下方置有分类导航栏，用户可以根据喜好对特定分类音频进行浏览，用户也可以选择对分类自定义排序，减少用户操作步骤，在最短时间内列出最贴合用户需求的音频。</p><img src="/posts/422f85b0/image14.png" class="" title="img"><center>图13：喜马拉雅FM搜索功能截图</center><p><strong>推荐功能</strong>：当用户没有目标听书或主播时，系统推荐功能可以协助用户进行选择，包括根据历史偏好推荐、听过相同内容的用户也在听的内容、猜你想听的声音、常听分类和热门频道等推荐。同时，喜马拉雅FM在音频信息的展示方面具有多字段的特点，提供用户包括推荐值、播放量、是否需要VIP、订阅量等信息。</p><img src="/posts/422f85b0/image15.png" class="" title="img"><center>图14：喜马拉雅FM推荐功能截图</center><p><strong>查看详情功能</strong>：确定好音频&#x2F;专辑后，进入音频&#x2F;专辑信息界面，主要分为信息、节目、评价、找相似、版权登记五个模块。</p><p>在信息页面下，顶部为专辑基本信息，中间为专辑简介、创作团队和粉丝月票贡献榜。</p><p>节目界面顶部为开始播放按钮和订阅按钮，中部为专辑内节目的标题卡片，在音频信息的展示方面仍具有多字段的特点，提供用户包括节目发布时间、播放量、节目时长、播放状态等信息，已听完的音频字体颜色变灰，同时用户可按发布时间从新到旧或从旧到新排序节目。值得注意的是，当用户曾经听过该专辑内节目，可直接选择续播。</p><p>评价界面可以直观看出推荐值即各等级评分人数占比，同时也可以根据关键词判断用户对该节目的看法。</p><p>版权登记页面则一般显示主播的版权登记信息，用户获取主播名下的节目专辑版权信息等重要信息，有利于提高用户对主播和喜马拉雅FM的信任度。</p><img src="/posts/422f85b0/image16.png" class="" title="img"><center>图15：喜马拉雅FM查看详情功能截图</center><p><strong>播放功能</strong>：进入播放界面后，用户可以对音频进行点赞、评论、快进&#x2F;回退、调节倍速等操作，点击“···”还能进行音效音质调节、切换展示内容等额外操作。将界面下滑用户可查看该节目简介和评论，同时系统会推荐类似题材节目，若用户感兴趣可直接点击待播将其加入播放列表。</p><img src="/posts/422f85b0/image17.png" class="" title="img"><center>图16：喜马拉雅FM播放功能截图</center><h1 id="五、用户反馈"><a href="#五、用户反馈" class="headerlink" title="五、用户反馈"></a>五、用户反馈</h1><p>为了对喜马拉雅FM的功能进行分析优化，通过采集近一个月（2024&#x2F;7&#x2F;31-2024&#x2F;8&#x2F;31）各渠道应用商店中用户对喜马拉雅FM的兴奋点，同时收集他们在使用过程中的遇到的问题和改进建议，对结果进行数据整理，将被试用户群提到的关键点按权重生成了词云。</p><img src="/posts/422f85b0/image18.png" class="" title="img"><center>图17：2024/7/31-2024/8/31喜马拉雅FM用户评价词云</center><p>可以发现，内容方面，很多用户都给出了“好听，不错，喜欢，精神食粮，很棒”等赞美之语。</p><p>但同时，词云中也体现了一些用户不满的评价，因此对用户不满意的部分进行收集，整理了用户遇到的问题和改进建议：</p><ol><li><strong>不同终端适配问题</strong></li></ol><p>存在问题：</p><ul><li>平板端Al文稿字体太小且无法调节大小；横竖屏无法适配，横屏时整个软件字体变得很小，影响用户观看。</li><li>部分内容没有全平台上线，如安卓端首页有股评内容，而苹果端没有。</li><li>不同设备播放进度不同步。</li></ul><img src="/posts/422f85b0/image19.png" class="" title="img"><center>图18：用户反馈图1</center><p>优化建议：</p><p>加强内容分发的统一性和管理，确保用户在不同平台的体验一致。对于跨设备播放进度同步问题可以考虑通过云端记录用户的播放进度，用户无论在何种设备上登录，都能够继续从上次观看的位置开始播放。</p><p>在开发资源允许的情况下，应该考虑用户不同的使用场景，做到兼容，方便用户使用。</p><ol><li><strong>广告</strong></li></ol><p>存在问题：</p><ul><li>摇一摇广告跳转过于灵敏，常常一不小心就跳转其他软件，影响用户使用。</li><li>界面广告过多，容易误触；应用热启动也有广告，且开屏广告时间过长且无法关闭；即使是免费内容也需要看广告视频领时长，让用户无法忍受。</li><li>听书时时不时便弹出广告，打断听书，且广告必须手动关闭，若不点击关闭则自动跳转。</li></ul><img src="/posts/422f85b0/image20.png" class="" title="img"><center>图19：用户反馈图2</center><p>优化建议：</p><p>减少热启动广告、音频节目之间插播的广告及界面UI广告，降低摇一摇广告灵敏度。虽然说用户对于开屏广告、插屏广告和音频贴片广告的注意度更高，但也意味着对用户的干扰越强，且影响用户体验。平台应该在这点上进行取舍，找到既让用户满意又能最大化利益的度。</p><ol><li><strong>付费体系和服务</strong></li></ol><p>存在问题：</p><ul><li>会员分级过多且无法通用，如从前VIP可听的专辑现在需SVIP才能听，且大部分新内容都需要SVIP；购买了VIP却被告知儿童内容需购买儿童VIP。用户不清楚购买后能够听到哪些内容。</li><li>会员权益没有落实到位，购买VIP后部分内容仍需付费，且界面仍有较多广告，影响用户使用。</li><li>免费听书时长一天只有30分钟，且买断后仍有收听时长限制。</li><li>反馈后客服回复慢、跟进慢、态度差等问题。</li></ul><img src="/posts/422f85b0/image21.png" class="" title="img"><center>图20：用户反馈图3</center><p>优化建议：</p><p>简化会员分级体系，确保不同会员等级间权益清晰、明确，避免重复购买或升级后无法享受更多内容的问题。建议提供清晰的会员权益说明，帮助用户在购买前了解可享受的内容，确保VIP用户的权益落实到位。</p><p>同时，优化免费听书体验，增加免费时长或取消买断后的时长限制。还要加强客服反馈效率和服务态度，确保用户问题能及时跟进与解决，提高用户满意度。</p><ol><li><strong>内容、界面和性能问题</strong></li></ol><p>存在问题：</p><ul><li>总会触发自动播放功能</li><li>更新新版本界面变动过多，界面太杂乱，用户操作不知从何下手</li><li>评论区字体大小及背景颜色无法自行选择</li><li>部分音频审核不到位，影响青少年心理健康；存在大流量侵权作品</li><li>无法同时与其他app同时播放音频，如玩游戏时不能同时听书</li></ul><img src="/posts/422f85b0/image22.png" class="" title="img"><center>图21：用户反馈图4</center><p>优化建议：</p><p>为用户提供更灵活的选择，增加自动播放的开关设置，避免频繁自动播放影响用户体验。</p><p>在新版本更新时，保持界面设计一致性，减少过多不必要的改动，确保用户操作流畅，可以提供简化模式或引导提示，帮助用户熟悉新界面。允许用户自定义评论区的字体大小和背景颜色，提升阅读舒适度，满足不同用户的视觉需求。</p><p>针对青少年保护，强化音频内容审核机制，过滤可能对心理健康有不良影响的内容。与此同时，加强对侵权作品的监控与处理，保护版权。</p><p>增强应用的后台播放功能，允许用户在使用其他App（如玩游戏）时能够同时播放音频，提升使用便利性和多任务体验。</p><h1 id="六、商业化分析"><a href="#六、商业化分析" class="headerlink" title="六、商业化分析"></a>六、商业化分析</h1><p>喜马拉雅FM作为综合音频平台的代表，盈利模式也包括下述几个领域：</p><ul><li><strong>内容付费</strong>：既包括用户为开通会员附加功能，也包括付费订阅精品内容。喜马拉雅VIP会员目前的收费为首月6元特惠，连续包月20元，1年238元；儿童会员首月1元特惠，连续包月19元，1年198元；以及无用学SVIP会员，年卡899元，月卡99元。其次是付费订阅精品内容，付费精品内容分成两类，一类是开通会员后可以免费听，非会员付费购买如《人类群星闪耀时》专辑的非会员购买价格为69喜点（1喜点&#x3D;1元人民币），另一类是开通会员后以优惠价购买，非会员以原价购买，如《好好说话·精进技巧》的非会员订阅价格为198喜点，会员订阅价格为158.4喜点。</li><li><strong>广告收入</strong>：通过对用户行为、喜好、属性等大数据的分析进行个性化推荐，在不同模块的广告位上进行展示。</li><li><strong>社交付费</strong>：这项盈利模式主要体现在音频直播模块上，用户通过付费购买礼物、加入粉丝团对喜爱的主播进行打赏支持，平台与主播对此项盈利进行分成，用户还可以付费加入主播的粉丝团。</li><li><strong>电商付费</strong>：App上设置网上商城入口，用户可通过入口进行商城产品消费，目前喜马拉雅上主要售卖的是自家生产的小雅系列音频产品，包括音箱、耳机以及喜马拉雅会员卡、礼卡等附属商品。</li></ul><p>喜马拉雅FM除了上述付费盈利模式外，对其他的盈利模式也进行了探索：</p><ol><li>利用App庞大的活跃用户流量，在用户“钱包”页面设置<strong>金融福利</strong>入口，用户可根据此入口进行申请信用卡、网上借贷，喜马拉雅与合作的金融机构进行佣金派点。</li><li>打通社会各主体对于优质音频需求的渠道，和城市、企业、其他音频视频平台进行<strong>合作共赢</strong>，项目形式较为多样化，包括“用声音服务美好生活”的喜马拉雅万物声商务合作项目，“为你的创意找到最好的声音”之一站式配音服务项目，企业员工培训项目喜马拉雅轻学堂（已开发相关app）。</li><li><strong>借鉴代理模式，进行流量裂变。</strong>推出“知识大使”，鼓励用户购买会员并推荐给朋友，用户可以从中获得返利，最高可达50%返佣。</li></ol><h1 id="七、总结"><a href="#七、总结" class="headerlink" title="七、总结"></a>七、总结</h1><p>下面根据上述的产品信息调研，基于S（Strength，优势）、W（Weakness，劣势）、O（Opportunity，机会）、T（Threat，威胁）的SWOT框架，对产品做一个总结性分析：</p><ol><li><strong>优势：</strong></li></ol><ul><li><strong>内容多样化与丰富性</strong>：涵盖小说、相声、音乐、儿童教育、科普、外语等多种内容，满足各类用户需求。</li><li><strong>强大的推荐算法</strong>：通过用户历史行为推荐内容，提升个性化体验。</li><li><strong>用户粘性高</strong>：提供VIP服务、订阅功能、粉丝互动等多样化的社交体验，增强用户留存率。</li><li><strong>领先的市场地位</strong>：用户渗透率77.8%，在市场中占据头部平台地位，拥有庞大的用户基础。</li></ul><ol><li><strong>劣势：</strong></li></ol><ul><li><strong>用户体验不足</strong>：广告插播过于频繁，播放界面及操作体验不够流畅，部分功能优化不足（如不同终端适配问题）。</li><li><strong>付费模式复杂</strong>：VIP体系不够明确，部分内容需付费且会员权益未完全落实，容易造成用户困惑和不满。</li><li><strong>技术限制</strong>：后台播放能力有限，无法同时进行多任务处理，如在玩游戏时无法同时听书。</li></ul><ol><li><strong>机会：</strong></li></ol><ul><li><strong>市场潜力大</strong>：在线音频市场规模稳步增长，尤其在二三线城市及下沉市场有拓展空间。</li><li><strong>政策支持</strong>：国家政策鼓励文化产业发展，特别是音频行业版权保护及打击侵权为平台提供了健康的发展环境。</li><li><strong>AI技术发展</strong>：自动语音识别、自然语言处理等AI技术的应用可以提高内容生产效率和用户体验。</li><li><strong>平台自身经验积累</strong>：平台积累了丰富的音频运营经验，可以考虑扩大音频内容创业者的培训市场；</li></ul><ol><li><strong>威胁：</strong></li></ol><ul><li><strong>市场竞争激烈</strong>：蜻蜓FM、猫耳FM等平台的崛起，对用户的争夺将更加激烈，特别是在特定内容垂直领域。</li><li><strong>内容版权问题</strong>：尽管版权保护加强，但仍存在侵权内容风险，平台需要加强内容监管和版权维护。</li><li><strong>用户增长放缓</strong>：在音频用户规模达到一定体量后，未来的新增用户增长可能面临瓶颈，竞争焦点将转向如何提升用户留存和增加用户付费率。</li></ul><p>通过上述分析，可以看出喜马拉雅FM在产品内容、市场地位等方面具有优势，但也面临用户体验、技术与市场竞争等挑战。优化用户体验、简化付费体系以及拓展下沉市场将是其未来的重要策略方向。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 产品笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 21 动画与模拟</title>
      <link href="/posts/41075222.html"/>
      <url>/posts/41075222.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>在模拟中·表示速度，··表示加速度</p><img src="/posts/41075222/Untitled.png" class="" title="图片"><h1 id="质点弹簧系统"><a href="#质点弹簧系统" class="headerlink" title="质点弹簧系统"></a>质点弹簧系统</h1><p>一系列相互连接的质点和弹簧，两个质点之间连接一个弹簧</p><p>b-a&#x2F;||b-a||表示方向</p><p>问题：能量守恒，会永远振动下去</p><p>给弹簧添加一个damping，b·代表速度，添加一个反方向的力f让弹簧逐渐停止振动，速度进阿曼</p><p>问题：会让所有运动都停下来。假设弹簧a和b同步向右运动，此时弹簧不会拉伸不会振动，即两个弹簧按理来说不会停止，但是因为加了f会使弹簧停下。所以f无法表示弹簧内部的力</p><p>因此可以将两个式子整合在一起</p><p>可用于模拟布料</p><h1 id="粒子系统"><a href="#粒子系统" class="headerlink" title="粒子系统"></a>粒子系统</h1><p>定义大量粒子，模拟每个粒子受到的力的效果</p><p>可用于模拟波浪等</p><h1 id="运动学"><a href="#运动学" class="headerlink" title="运动学"></a>运动学</h1><p>rigging</p><p>给模型加控制点，控制不同部位做出不同动作</p><p>解决欧拉方法模拟中的不稳定性</p><p>中点法</p><p>考虑中点的速度，用中点的速度再算一次欧拉方法</p>]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 20 颜色</title>
      <link href="/posts/b7cbb5f9.html"/>
      <url>/posts/b7cbb5f9.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>光谱，光线的能量在不同的波长上的分布</p><img src="/posts/b7cbb5f9/Untitled.png" class="" title="图片"><p>同色异谱</p><p>不同的光谱进入人眼后看到的颜色是一样的</p><p>比如让不同显示器显示相同的一幅图，就需要调节光谱</p><p>人的大脑会自动补色</p>]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 19 相机、棱镜和光场</title>
      <link href="/posts/f027b66.html"/>
      <url>/posts/f027b66.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>成像&#x3D;合成+捕捉</p><h1 id="FOV视场"><a href="#FOV视场" class="headerlink" title="FOV视场"></a>FOV视场</h1><p>视场越窄看到的东西越远</p><img src="/posts/f027b66/Untitled.png" class="" title="图片"><h1 id="曝光"><a href="#曝光" class="headerlink" title="曝光"></a>曝光</h1><p>三要素：光圈、快门、感光度</p><h1 id="棱镜近似"><a href="#棱镜近似" class="headerlink" title="棱镜近似"></a>棱镜近似</h1><h1 id="光场"><a href="#光场" class="headerlink" title="光场"></a>光场</h1><p>在空间中任何一个点往任何一个方向都可以记录一个光线的强度</p><p>全光函数</p><p>站在一个点往任意方向看→黑白图片</p><p>扩展颜色→彩色照片</p><p>扩展时间→电影</p><p>改变自己的位置→全息电影</p><p>我在任何位置任何时刻往任何方向看的东西都是有颜色的→七度空间→全光函数</p><p>光场四维函数参数化</p>]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 18 高级渲染</title>
      <link href="/posts/eedbe870.html"/>
      <url>/posts/eedbe870.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="高级光线传播方法"><a href="#高级光线传播方法" class="headerlink" title="高级光线传播方法"></a>高级光线传播方法</h1><h2 id="有偏估计和无偏估计"><a href="#有偏估计和无偏估计" class="headerlink" title="有偏估计和无偏估计"></a>有偏估计和无偏估计</h2><p>Unbiased无偏估计，蒙特卡洛估计出来的结果期望永远都是正确的。其他的都是Biased有偏的</p><img src="/posts/eedbe870/Untitled.png" class="" title="图片"><h2 id="双向路径追踪BDPT（无偏）"><a href="#双向路径追踪BDPT（无偏）" class="headerlink" title="双向路径追踪BDPT（无偏）"></a>双向路径追踪BDPT（无偏）</h2><p>把光源出发的子路径和摄像机出发的子路径的端点连起来</p><p>左单向右双向</p><h2 id="Metropolis光线传播MLT（无偏）"><a href="#Metropolis光线传播MLT（无偏）" class="headerlink" title="Metropolis光线传播MLT（无偏）"></a>Metropolis光线传播MLT（无偏）</h2><p>用马尔科夫链，可以根据任意一条路径生成相似的路径</p><p>光线越复杂MLT处理得越好</p><p>缺点难以在理论上分析最后收敛的速度，不知道何时没有噪声，导致生成的图通常较脏，不适合做动画</p><h2 id="光子映射（有偏）"><a href="#光子映射（有偏）" class="headerlink" title="光子映射（有偏）"></a>光子映射（有偏）</h2><p>非常适用于caustics，即由于光线的聚焦产生一系列非常强的图案</p><p>光子映射实现方法</p><ol><li>从光源出发，向外辐射光子，该反射的反射，该折射的折射，直到光子打到一个漫反射物体上，把所有光子的位置记录下来</li><li>从摄像机开始，向外辐射光子，同上直到打到漫反射物体上</li></ol><ol><li>计算局部的密度估计，对于任何的着色点，取他周围最近的N个光子，找到后找到他们占据的面积，算光子的密度，光子越集中的地方越亮</li></ol><p>N越小噪声越大，只有N为无限多才能得到正确的结果，否则会糊</p><h2 id="VCM（有偏）"><a href="#VCM（有偏）" class="headerlink" title="VCM（有偏）"></a>VCM（有偏）</h2><h2 id="实时辐射度IR（有偏）"><a href="#实时辐射度IR（有偏）" class="headerlink" title="实时辐射度IR（有偏）"></a>实时辐射度IR（有偏）</h2><p>已经被照亮的面都认为他们是光源，将他们当作新的光源再照亮其他面</p><h1 id="高级外观建模"><a href="#高级外观建模" class="headerlink" title="高级外观建模"></a>高级外观建模</h1><h2 id="非表面模型"><a href="#非表面模型" class="headerlink" title="非表面模型"></a>非表面模型</h2><p>e.g.雾、云、烟、流体、毛发</p><p>会把光线随机打到某个方向</p><p>有色的高光是怎么形成的呢</p><p>光线打到圆柱上会散射出一个圆锥</p><p>这个模型渲染出的结果比较假，因此推出新的模型</p><p>光打在头发外表面被反射、光线穿进去又穿出来和打到头发内壁再反射，会散射出不同形状的圆锥。</p><p>可以得到非常好的渲染结果</p><h2 id="表面模型"><a href="#表面模型" class="headerlink" title="表面模型"></a>表面模型</h2><p>e.g.玉石、水母、 布料</p><h3 id="次表面反射"><a href="#次表面反射" class="headerlink" title="次表面反射"></a>次表面反射</h3><p>光线从某个点进入表面，经过大量的反射后从某个点出去</p>]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 17 材质与外观</title>
      <link href="/posts/56da558.html"/>
      <url>/posts/56da558.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="材质-BRDF"><a href="#材质-BRDF" class="headerlink" title="材质&#x3D;BRDF"></a>材质&#x3D;BRDF</h1><p>漫反射材质，光线进来后会均匀地反射到各个方向</p><img src="/posts/56da558/Untitled.png" class="" title="图片"><p>金属材质</p><p>玻璃材质</p><p>反射公式</p><p>折射公式。最右侧为不同介质的折射率</p><h2 id="菲涅尔项："><a href="#菲涅尔项：" class="headerlink" title="菲涅尔项："></a>菲涅尔项：</h2><p>用于计算反射和折射的能量分别是多少</p><p>从不同角度看书，看到桌面对书的反射不同</p><p>如果光线基本和物体平行，则反射的能量极大，垂直则折射的能量极大。p和s是极化现象，一般不用考虑</p><p>金属的菲涅尔项</p><p>菲涅尔项的计算及公式简化</p><h1 id="微表面材质"><a href="#微表面材质" class="headerlink" title="微表面材质"></a>微表面材质</h1><p>假设物体的表面粗糙，从远处看表面是粗糙平面的，近看是凹凸不平的，且每个小的表面微原（微表面）都看作是微小的镜面。即远处看是材质，近处看是几何</p><p>只有微表面法线方向和中间方向完全一致时，才能把入射方向反射到出射方向</p><p>F菲涅尔项表示总共有多少能量被反射，G修正grazing angle，D决定到底如何反射、法线分布到底集中还是发散</p><p>各向同性Isotropic：微表面没有方向性或方向性很弱</p><p>各向异性Anisotropic：微表面具有明确方向性</p><h1 id="BRDF的性质"><a href="#BRDF的性质" class="headerlink" title="BRDF的性质"></a>BRDF的性质</h1><p>非负；线性；可逆性；能量守恒；各向同性、各向异性</p><p>测量BRDF</p>]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 16 光线追踪（下）蒙特卡洛路径追踪</title>
      <link href="/posts/b82d4d68.html"/>
      <url>/posts/b82d4d68.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="蒙特卡洛积分"><a href="#蒙特卡洛积分" class="headerlink" title="蒙特卡洛积分"></a>蒙特卡洛积分</h1><p>蒙特卡洛积分：给任何一个函数，求定积分，是一种数值方法，最后结果是一个数。特点：均匀采样</p><img src="/posts/b82d4d68/Untitled.png" class="" title="图片"><p>假设a到b之间均匀采样，得到的pdf如右下图，得到pdf的值为1&#x2F;(b-a)</p><p>那么得到的式子可以转化如下。N越大，得到的结果越准确</p><h1 id="路径追踪"><a href="#路径追踪" class="headerlink" title="路径追踪"></a>路径追踪</h1><p>直接光照和全局光照的区别</p><p>用蒙特卡洛函数来解决光线追踪的问题，解渲染方程</p><h2 id="只考虑直接光照"><a href="#只考虑直接光照" class="headerlink" title="只考虑直接光照"></a>只考虑直接光照</h2><p>考虑一个简单场景（只有直接光照），考虑底部的一个像素点的直接光照。wo表示着色点到眼睛的方向，wi表示各个方向的入射方向</p><p>那么这个点的直接光照？</p><p>随机选一个方向，他的fx和pdf（如何对半球进行采样？这里假设每个点的采样概率是一样的，是均匀采样）是多少？</p><p>着色算法（只考虑直接光照）：</p><p>任意一个点p，考虑他往wo方向出来，在这个着色点按某一种pdf往半球发出N个不同方向的光线。对任何一个选中的方向wi，考虑p点和方向wi连一条光线，如果该光线打到了光源，则把整个结合式写出</p><h2 id="引入间接光照"><a href="#引入间接光照" class="headerlink" title="引入间接光照"></a>引入间接光照</h2><p>P点把光源反射到Q点，而Q点也可能会反射到P，此时可以理解为在P点观察Q点的直接光照</p><p>那么在Q点递归一下即可</p><h3 id="但是这样也存在很多问题："><a href="#但是这样也存在很多问题：" class="headerlink" title="但是这样也存在很多问题："></a>但是这样也存在很多问题：</h3><h3 id="问题一：如果P点向Q点发出多条光线，那么计算量过大"><a href="#问题一：如果P点向Q点发出多条光线，那么计算量过大" class="headerlink" title="问题一：如果P点向Q点发出多条光线，那么计算量过大"></a>问题一：如果P点向Q点发出多条光线，那么计算量过大</h3><p>因此规定N只能为1。规定用蒙特卡洛解决N为1的问题就是路径追踪</p><p>和光线追踪很相似</p><h3 id="问题二：算法永远不会停止"><a href="#问题二：算法永远不会停止" class="headerlink" title="问题二：算法永远不会停止"></a>问题二：算法永远不会停止</h3><p>解决方法：俄罗斯轮盘赌RR以一定概率条件决定什么时候停止</p><p>以一定的概率P往某一方向打一条光线，另外1-P的概率不打该条光线</p><p>改写代码</p><p>问题解决！！但效率还不够高。期望能在低采样率的情况下也能得到高采样率的效果</p><h2 id="如何提高效率"><a href="#如何提高效率" class="headerlink" title="如何提高效率"></a>如何提高效率</h2><p>光源越小，需要发出越多光线才有可能打到光源，很多光线被浪费</p><p>可以直接在光源上采样吗？可以。假设光源面积为A</p><p>代入重写</p><p>分成两部分，光源直接对点的贡献不用RR，其他各种弹射即非直接光源对点的贡献则需要使用RR</p><p>改写代码</p><p>最后的问题：如果有遮挡，那么光源是某能贡献到点？</p><p>挡到则为0，挡不到则计算路径追踪</p><p>路径追踪可以做到照片级真实感</p>]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 15 光线追踪（中）辐射度量学、光线传播和全局光照</title>
      <link href="/posts/a64930d7.html"/>
      <url>/posts/a64930d7.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="辐射度量学"><a href="#辐射度量学" class="headerlink" title="辐射度量学"></a>辐射度量学</h1><p>辐射量和辐射通量</p><img src="/posts/a64930d7/Untitled.png" class="" title="图片"><p>辐射度，辐照度，辐射率</p><h2 id="辐射度（发射量）"><a href="#辐射度（发射量）" class="headerlink" title="辐射度（发射量）"></a>辐射度（发射量）</h2><p>能量&#x2F;立体角</p><p>如果一个点光源均匀向四周发射</p><h2 id="辐照度（接收量）"><a href="#辐照度（接收量）" class="headerlink" title="辐照度（接收量）"></a>辐照度（接收量）</h2><p>单位面积接收的辐射量。必须是垂直投射的面积（或投影到垂直方向的面积</p><p>接收量会随距离衰减，发射量不会衰减</p><h2 id="辐射率"><a href="#辐射率" class="headerlink" title="辐射率"></a>辐射率</h2><p>在单位立体角单位面积上的能量。要进行两次微分。</p><p>可理解为是单位立体角上的辐照度</p><p>或单位面积上的辐射度</p><h2 id="辐照度和辐射率的比较"><a href="#辐照度和辐射率的比较" class="headerlink" title="辐照度和辐射率的比较"></a>辐照度和辐射率的比较</h2><p>辐射率在辐照度的基础上添加方向性</p><p>在A点收到的所有能量就是从每个可能的方向过来的能量积分起来（求和）。</p><h1 id="双向反射分布函数BRDF（反射方程）"><a href="#双向反射分布函数BRDF（反射方程）" class="headerlink" title="双向反射分布函数BRDF（反射方程）"></a>双向反射分布函数BRDF（反射方程）</h1><p>能量从某方向进来打到表面，表面吸收部分能量后将吸收的能量反射到某方向</p><p>那么反射的能量会如何分配到出射的各个立体角？→BRDF</p><p>p是点</p><p>问题：其他物体也可能会反射光源到同一位置？那就需要不断递归，较麻烦</p><p>于是创造了渲染方程</p><h1 id="渲染方程"><a href="#渲染方程" class="headerlink" title="渲染方程"></a>渲染方程</h1><p>物体往某个方向发射的光来源于：1. 物体自身产生的光；2. 通过其他光源照亮或其他物体反射过来的光源</p><p>因此可以用渲染方程来描述所有的光线传播</p><p>如何得出这个公式的呢？</p><p>一个点光源</p><p>多个点光源</p><p>存在面光源</p><p>考虑有其他物体的反射，可以把它们当作面光源</p><p>简化式子</p><p>再简化，反射能量&#x3D;自发光能量+反射（入射能量）</p><p>可以分解成 直接看到光源（光源→人眼）【直接光源，也就是着色】+光源辐射出来的能量经过一次反射（光源→物体→人眼）【直接光照】+经过两次反射（光源→镜子→物体→人眼）【间接光照】+…</p><p>光栅化&#x3D;直接光照</p><p>全局光照 &#x3D; 直接光照 + 间接光照</p>]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 13-14 光线追踪（上）光线追踪概念和光线追踪加速</title>
      <link href="/posts/279341c5.html"/>
      <url>/posts/279341c5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="Lecture-13-光线追踪1（概念）"><a href="#Lecture-13-光线追踪1（概念）" class="headerlink" title="Lecture 13 光线追踪1（概念）"></a>Lecture 13 光线追踪1（概念）</h1><p>光线追踪：准确但速度慢，更多用于离线（e.g.电影）</p><blockquote><p>关于光线追踪的三个假设：</p></blockquote><ol><li>光线沿直线传播（不完全正确）</li><li>光线和光线不会发生碰撞（不完全正确）</li><li>光线从光源发出经过一系列转换（反射折射等）再传到人眼</li></ol><blockquote></blockquote><h2 id="光线投射"><a href="#光线投射" class="headerlink" title="光线投射"></a>光线投射</h2><p>每一个像素首先从眼睛投射一根光线，和场景相交，求最近焦点，找到焦点后和光源连线，判定是否对光源可见（是否在阴影内），算出着色写回像素。</p><p>知道法线、入射方向和出射方向可以求出一点的着色，写入像素。</p><img src="/posts/279341c5/Untitled.png" class="" title="图片"><p>有反射和折射的情况，每个点都要判断。最终像素的着色是所有点的总和。眼睛发射的光线primary ray（eye ray），弹射后的secondary rays，和光线的连线shadow rays</p><h2 id="光线和物体表面的交点"><a href="#光线和物体表面的交点" class="headerlink" title="光线和物体表面的交点"></a>光线和物体表面的交点</h2><p>光线上的任一个点都可以用o+td来表示</p><p>一个物体的表面将整个空间划分为了两个部分，物体内与物体外，当一条射线穿过边界的时候，必定发生所处空间的切换。如果点在内部，由于射线的无限远必定在物体外，所以必定发生了奇数次切换，故交点个数为奇数。如果点在物体外则交点个数为偶数</p><h3 id="光线和三角形求交"><a href="#光线和三角形求交" class="headerlink" title="光线和三角形求交"></a>光线和三角形求交</h3><p>先转换为光线和平面求交，再判断交点是否在三角形内。（光线和面是否相交：面的法线 是否垂直于 光线上一点和法线与面的交点的连线）</p><p>MT算法：直接求出光线是否与三角形相交。克拉默法则</p><h3 id="加速光线和表面求交"><a href="#加速光线和表面求交" class="headerlink" title="加速光线和表面求交"></a>加速光线和表面求交</h3><p>就决定是你了——包围盒！！</p><p>保证物体必定在一个简单几何内</p><p>长方体由三个对面构成（如图两个相对的透明平面为一个对面）</p><p>给定任意一根光线，可求出这光线在什么时候会和这两个数的无限大的面有交点</p><p>知道光线何时进入和出去对面，如何求出何时进入盒？</p><p>先将三维转换为二维来理解。求交集（如图三）</p><p>分别求出光线进出三组对面的时间，再进行大小比较，得到光线进出盒的时间</p><p>光线和AABB相交当且仅当离开时间非负，进入时间&gt;离开时间</p><p>t即光线何时接触到平面</p><h1 id="Lecture-14-光线追踪2（光线追踪加速）"><a href="#Lecture-14-光线追踪2（光线追踪加速）" class="headerlink" title="Lecture 14 光线追踪2（光线追踪加速）"></a>Lecture 14 光线追踪2（光线追踪加速）</h1><h2 id="如何用AABB加速光线追踪"><a href="#如何用AABB加速光线追踪" class="headerlink" title="如何用AABB加速光线追踪"></a>如何用AABB加速光线追踪</h2><p>预处理场景：找到包围盒，划分方格，判定哪些格子里可能有物体（即与物体相交的格子）右上角漏了一格</p><img src="/posts/279341c5/Untitled0.png" class="" title="图片"><p>做光线追踪，光线会与一些格子（盒子）相交（但不一定跟物体相交）</p><img src="/posts/279341c5/Untitled1.png" class="" title="图片"><p>要画多少个盒子效率最高？</p><img src="/posts/279341c5/Untitled2.png" class="" title="图片"><h3 id="空间划分"><a href="#空间划分" class="headerlink" title="空间划分"></a>空间划分</h3><p>Oct-Tree八叉树（三维），四叉树（二维），不同维度树不同</p><p><strong>KD-Tree</strong>只砍一刀，每个维度都是二叉树</p><p>BSP-Tree随机选一个方向砍一刀</p><img src="/posts/279341c5/Untitled3.png" class="" title="图片"><h4 id="KD-Tree"><a href="#KD-Tree" class="headerlink" title="KD-Tree"></a>KD-Tree</h4><img src="/posts/279341c5/Untitled4.png" class="" title="图片"><img src="/posts/279341c5/Untitled5.png" class="" title="图片"><p>先判定是否和A有交点</p><img src="/posts/279341c5/Untitled6.png" class="" title="图片"><p>判断是否和子节点有交点（这里假设数字区域都不会再划分）</p><img src="/posts/279341c5/Untitled7.png" class="" title="图片"><img src="/posts/279341c5/Untitled8.png" class="" title="图片"><img src="/posts/279341c5/Untitled9.png" class="" title="图片"><img src="/posts/279341c5/Untitled10.png" class="" title="图片"><img src="/posts/279341c5/Untitled11.png" class="" title="图片"><p>找到最近交点</p><img src="/posts/279341c5/Untitled12.png" class="" title="图片"><p>缺点，无法处理三角形</p><h4 id="BVH"><a href="#BVH" class="headerlink" title="BVH"></a>BVH</h4><p>把物体分成两部分，计算包围盒，一个盒子里大概5个三角形</p><img src="/posts/279341c5/Untitled13.png" class="" title="图片"><img src="/posts/279341c5/Untitled14.png" class="" title="图片"><img src="/posts/279341c5/Untitled15.png" class="" title="图片"><h3 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h3><img src="/posts/279341c5/Untitled16.png" class="" title="图片">]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 10-12 几何</title>
      <link href="/posts/b3e10692.html"/>
      <url>/posts/b3e10692.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="Lecture-10-几何1（几何的定义）"><a href="#Lecture-10-几何1（几何的定义）" class="headerlink" title="Lecture 10 几何1（几何的定义）"></a>Lecture 10 几何1（几何的定义）</h1><p>分为隐式几何和显式几何</p><img src="/posts/b3e10692/Untitled.png" class="" title="图片"><h2 id="隐式"><a href="#隐式" class="headerlink" title="隐式"></a>隐式</h2><p>表示取任何空间中一个点，告诉你点的约束条件而不告诉你点的具体位置。</p><p>缺点：很难表示出所有满足的点所组成的物体的形状。</p><p>优点：很容易判定一个点是否在某个面上或某个物体内&#x2F;外</p><h2 id="显式"><a href="#显式" class="headerlink" title="显式"></a>显式</h2><p>通过参数映射定义表面（如马鞍面）</p><p>优点：容易得知表面或物体本身的形状</p><p>缺点：无法得知某点是否在物体内&#x2F;外</p><p>CSGI：通过一些列基本集合的基本运算得到新的几何</p><p>用距离函数blend（融合？）出来</p><p>分形</p><h1 id="Lecture-11-几何2（贝塞尔曲线曲面）"><a href="#Lecture-11-几何2（贝塞尔曲线曲面）" class="headerlink" title="Lecture 11 几何2（贝塞尔曲线曲面）"></a>Lecture 11 几何2（贝塞尔曲线曲面）</h1><p>用点云组成物体，将点变成面</p><img src="/posts/b3e10692/Untitled0.png" class="" title="图片"><p>三角形面组成物体</p><img src="/posts/b3e10692/Untitled1.png" class="" title="图片"><p>obj：点云+法线+纹理坐标，分开表示再组合起来</p><p>如v代表立方体的8个点，vn是6个法线，vt是十二个纹理坐标（每个面四个顶点，组成一个纹理坐标，有些复用），f将三者组合（点索引&#x2F;法线索引&#x2F;纹理索引）</p><img src="/posts/b3e10692/Untitled2.png" class="" title="图片"><h2 id="贝塞尔曲线"><a href="#贝塞尔曲线" class="headerlink" title="贝塞尔曲线"></a>贝塞尔曲线</h2><img src="/posts/b3e10692/Untitled3.png" class="" title="图片"><p>b0为起点，b2为终点，b1代表要往哪个方向弯曲。</p><p>假设时间t是1&#x2F;3，在左右两条线段各取三分之一，连接得到的两点，得到的线段再去三分之一，这个就是贝塞尔曲线时间t时所在的点。找出所有时间t时贝塞尔曲线所在点，就能画出贝塞尔曲</p><img src="/posts/b3e10692/Untitled4.png" class="" title="图片"><img src="/posts/b3e10692/Untitled5.png" class="" title="图片"><img src="/posts/b3e10692/Untitled6.png" class="" title="图片"><p>伯恩斯坦多项式，给你n+1个控制点，可以得到一个n阶的贝塞尔曲线</p><p>可以用C&#x3D;(1-t)A+tB来表示</p><img src="/posts/b3e10692/Untitled7.png" class="" title="图片"><img src="/posts/b3e10692/Untitled8.png" class="" title="图片"><img src="/posts/b3e10692/Untitled9.png" class="" title="图片"><img src="/posts/b3e10692/Untitled10.png" class="" title="图片"><p>贝塞尔曲线性质：必须过起点和重点，四个控制点则切线的斜率是3倍，凸包性质：贝塞尔曲线上的任意点一定在控制点所形成的凸包内</p><img src="/posts/b3e10692/Untitled11.png" class="" title="图片"><p>逐段贝塞尔：每4个控制点定义一条贝塞尔曲线</p><p>几何上第一段的终点等于第二段的起点则C0连续</p><img src="/posts/b3e10692/Untitled12.png" class="" title="图片"><p>切线也连续，即与左右两个点共线，距离相同方向相反，那则是C1连续</p><img src="/posts/b3e10692/Untitled13.png" class="" title="图片"><p>样条，在任意地方都能满足连续性，可控的曲线</p><img src="/posts/b3e10692/Untitled14.png" class="" title="图片"><h2 id="贝塞尔曲面"><a href="#贝塞尔曲面" class="headerlink" title="贝塞尔曲面"></a>贝塞尔曲面</h2><img src="/posts/b3e10692/Untitled15.png" class="" title="图片"><img src="/posts/b3e10692/Untitled16.png" class="" title="图片"><h1 id="Lecture-12-几何3（曲面细分、简化）"><a href="#Lecture-12-几何3（曲面细分、简化）" class="headerlink" title="Lecture 12 几何3（曲面细分、简化）"></a>Lecture 12 几何3（曲面细分、简化）</h1><h2 id="曲面细分"><a href="#曲面细分" class="headerlink" title="曲面细分"></a>曲面细分</h2><h3 id="Loop（不是循环）细分，仅能用在三角形面"><a href="#Loop（不是循环）细分，仅能用在三角形面" class="headerlink" title="Loop（不是循环）细分，仅能用在三角形面"></a>Loop（不是循环）细分，仅能用在三角形面</h3><p>将三角形细分后，如何更新旧顶点和新顶点的位置</p><h3 id="Catmull-Clark网格细分，用于一般情况（不仅三角形）"><a href="#Catmull-Clark网格细分，用于一般情况（不仅三角形）" class="headerlink" title="Catmull-Clark网格细分，用于一般情况（不仅三角形）"></a>Catmull-Clark网格细分，用于一般情况（不仅三角形）</h3><p>分为非四边形和四边形面</p><p>奇异点，度不为4的点（度即与其相连的边数）</p><p>如何引入新的点？每条边取中点，每个面取中心点，连接这些新的点。一次细分后，非四边形面全部变成四边形面，奇异点往后不会再增加</p><h2 id="网格简化"><a href="#网格简化" class="headerlink" title="网格简化"></a>网格简化</h2><p>边坍缩</p><p>如何判断哪些边要保留哪些边要坍缩？蓝色点放在哪可以尽量不改变原本灰色物体的形状？</p><p>二次误差度量：找到点放到哪个位置上可以达到最小二次误差，使该点和其相关的边的距离平方和最小</p><p>对每个边都进行坍缩判断，从二次误差最小的开始坍缩</p><h2 id="shadow-mapping"><a href="#shadow-mapping" class="headerlink" title="shadow mapping"></a>shadow mapping</h2><p>如果点不在阴影里即摄像机和光线都能看到这个点</p><p>第一步，从光源看向场景，记录看到的所有点的深度，作出深度图。绿色代表遮光物体</p><p>第二步，从摄像机看点</p><p>将摄像机看到的点投影回光源位置上，找到该点的实际深度，若跟原本光源记录的深度一致（橙色线），则说明光源可以看到该点（说明它不在阴影中）</p><p>若深度不一致（红线），说明光源无法看到该点（点在阴影中）</p><p>举个栗子</p><p>光源看到的每个点作深度图</p><p>摄像机看到的每个点投影回光源并与深度图进行对比</p><p>硬阴影和软阴影的比较。</p><p>完全看不到的：本影。能看到一部分：半影</p>]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 07-09 着色</title>
      <link href="/posts/9bfe6985.html"/>
      <url>/posts/9bfe6985.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="Lecture-07-着色"><a href="#Lecture-07-着色" class="headerlink" title="Lecture 07 着色"></a>Lecture 07 着色</h1><p>把材质应用到物体的过程→着色</p><p>l：光照方向，n：法线，v：观测方向</p><img src="/posts/9bfe6985/Untitled.png" class="" title="图片"><p>着色只考虑光线来的方向，不考虑阴影，具有局部性</p><p>光通量</p><p>能量I，知道点离点光源的距离就可以知道该点所得到点光源的能量</p><p>漫反射接受的能量。kd：漫反射系数，类似于粗糙度，表示该物体本身能吸收多少能量（也就是对应什么颜色）</p><h1 id="Lecture-08-着色2（图形管线，纹理映射）"><a href="#Lecture-08-着色2（图形管线，纹理映射）" class="headerlink" title="Lecture 08 着色2（图形管线，纹理映射）"></a>Lecture 08 着色2（图形管线，纹理映射）</h1><h2 id="布林冯模型"><a href="#布林冯模型" class="headerlink" title="布林冯模型"></a>布林冯模型</h2><p>观测方向和光照方向的角平分线（即半程向量）接近于法线，因此可以证明反射光线R和观测方向接近，n和h是否接近预示着在观测处是否能看到高光</p><p>环境光+漫反射光+高光&#x3D;着色模型</p><p>把顶点所关联的面的法线求平均就是该顶点的法线，面越大权重越大</p><h2 id="图形管线（实时渲染管线）"><a href="#图形管线（实时渲染管线）" class="headerlink" title="图形管线（实时渲染管线）"></a>图形管线（实时渲染管线）</h2><h2 id="纹理映射"><a href="#纹理映射" class="headerlink" title="纹理映射"></a>纹理映射</h2><p>将二维贴图贴到三维模型上。uv投射</p><p>纹理可以多次复用</p><h1 id="Lecture-09-着色3（纹理）"><a href="#Lecture-09-着色3（纹理）" class="headerlink" title="Lecture 09 着色3（纹理）"></a>Lecture 09 着色3（纹理）</h1><p>重心坐标：在三角形内插值，可以插纹理、法线、颜色等等</p><p>这里的ABC指的是坐标。αβγ要满足非负，点才在三角形内</p><p>如何求三角形内任意点的坐标？</p><img src="/posts/9bfe6985/Untitled0.png" class="" title="图片"><p>分割三角形，用三个三角形的面积求AA为A对应的三角形，AB为B对应的三角形，AC为C对应的三角形</p><img src="/posts/9bfe6985/Untitled1.png" class="" title="图片"><p>简化法，用向量叉乘</p><img src="/posts/9bfe6985/Untitled2.png" class="" title="图片"><p>最临近&#x2F;双线性&#x2F;双立方</p><img src="/posts/9bfe6985/Untitled3.png" class="" title="图片"><p>双线性插值：水平和竖直方向上都要插值</p><p>要求出红点在纹理中位置，找出临近的4个点，求他们的线性插值。用s找出上下两条边的插值点，再用t在这两点所连线竖直方向上插值找到红点。也可以先竖直再水平</p><img src="/posts/9bfe6985/Untitled4.png" class="" title="图片"><p>双立方：求临近16个点的插值。运算量大但更清晰</p><p>点采样纹理的问题：远处会出现摩尔纹，近处会出现锯齿</p><img src="/posts/9bfe6985/Untitled5.png" class="" title="图片"><p>像素覆盖纹理区域大小不一样，但是像素中心点的大小是一样的，当像素覆盖纹理区域大时，无法仅靠中心点来确定该像素覆盖的其他纹理</p><img src="/posts/9bfe6985/Untitled6.png" class="" title="图片"><p>走样了</p><p>是否可以避免采样？</p><p>点查询：给出范围，求出这个点的值；和范围查询：给出任意区域，得到内部平均值（或最大值、最小值）</p><h2 id="Mipmap：允许范围查询，特点：快速，不准确，方形。"><a href="#Mipmap：允许范围查询，特点：快速，不准确，方形。" class="headerlink" title="Mipmap：允许范围查询，特点：快速，不准确，方形。"></a>Mipmap：允许范围查询，特点：快速，不准确，方形。</h2><p>把一个图不断缩小，每次&#x2F;2</p><img src="/posts/9bfe6985/Untitled7.png" class="" title="图片"><p>图像金字塔&#x3D;mipmap。额外开销是原来的1&#x2F;3</p><img src="/posts/9bfe6985/Untitled8.png" class="" title="图片"><p>可以用方框近似求到不规则区域在纹理上的位置</p><img src="/posts/9bfe6985/Untitled9.png" class="" title="图片"><img src="/posts/9bfe6985/Untitled10.png" class="" title="图片"><p>看第几层（D）到1*1，就将他们归为一类</p><img src="/posts/9bfe6985/Untitled11.png" class="" title="图片"><p>那么如何查到准确的小数层？（如1.8层）</p><p>1层和2层都做双线性插值，然后再做一次双线性插值。即三线性插值，做一次查询</p><img src="/posts/9bfe6985/Untitled12.png" class="" title="图片"><img src="/posts/9bfe6985/Untitled13.png" class="" title="图片"><p>mipmap的三线性插值可能会出现过度模糊的情况</p><img src="/posts/9bfe6985/Untitled14.png" class="" title="图片"><p>因此引入各向异性过滤</p><h2 id="各向异性过滤"><a href="#各向异性过滤" class="headerlink" title="各向异性过滤"></a>各向异性过滤</h2><img src="/posts/9bfe6985/Untitled15.png" class="" title="图片"><p>增加竖直方向和水平方向的压缩通过被压缩的图像逆变换求出原图，额外开销是原本的3倍</p><img src="/posts/9bfe6985/Untitled16.png" class="" title="图片"><p>允许对矩形的区域进行快速范围查询，不局限于方形，可以得到更准确的结果。但无法处理斜着的图形</p><img src="/posts/9bfe6985/Untitled17.png" class="" title="图片"><p>提出EWA过滤，将不规则形状拆成多个不同的圆形，每次查询一个圆形，进行多次查询，效果更好但是代价更大</p><img src="/posts/9bfe6985/Untitled18.png" class="" title="图片"><p>纹理也可以理解为是一块可以做任何形式查询的数据</p><p>法线贴图可以实现复杂纹理但不改变物体信息</p><img src="/posts/9bfe6985/Untitled19.png" class="" title="图片"><p>黑色线为原本光环的物体表面，黄色是应用了凹凸贴图从而改变了法线</p><img src="/posts/9bfe6985/Untitled20.png" class="" title="图片"><img src="/posts/9bfe6985/Untitled21.png" class="" title="图片"><img src="/posts/9bfe6985/Untitled22.png" class="" title="图片"><p>凹凸贴图（左）和位移贴图（右）</p><p>凹凸贴图是虚假的移动顶点，让人眼看上去有凹凸效果。位移贴图真正移动顶点，真实地改变模型，但代价较大。</p><img src="/posts/9bfe6985/Untitled23.png" class="" title="图片"><p>环境光遮蔽，在贴图上先进行计算，自身不随光源变换。</p><p>计算好环境光遮蔽后再乘原图得到成图</p><img src="/posts/9bfe6985/Untitled24.png" class="" title="图片">]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 06 光栅化：反走样和深度缓冲</title>
      <link href="/posts/3e17e4bc.html"/>
      <url>/posts/3e17e4bc.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="走样和滤波"><a href="#走样和滤波" class="headerlink" title="走样和滤波"></a>走样和滤波</h1><p>采样的瑕疵：锯齿，摩尔纹，车轮效应</p><p>走样→采样的速度跟不上信号（函数）变化的速度</p><p>反走样：<strong>先模糊（滤波）再采样</strong></p><p>傅里叶转换，展开函数可以把函数逐渐趋近于方波</p><img src="/posts/3e17e4bc/Untitled.png" class="" title="图片"><p>傅里叶函数就是把函数分成不同频率的段</p><p>如果使用相同频率的采样点，原始信号频率越高越难通过采样点修复信号，即采样的速度跟不上信号（函数）变化的速度→走样了</p><p>用一样的方法采样两个截然不同的函数，但得到的结果是一样的→走样→<strong>同一个采样频率对不同频率信号获取了相同的信息，称之为走样</strong></p><p>滤波&#x3D;卷积&#x3D;平均：去掉特定频率</p><p>灰度图转换频域图</p><p>低通滤波：只剩下低频信息，边界被模糊了</p><p>高通滤波：只剩下高频信息，只剩下边界</p><p>卷积操作→求加权平均</p><p>即时域卷积&#x3D;频域乘积</p><p>*1&#x2F;9即归一化，是为了整个图像原始颜色不变。最后得到的结果类似于低通滤波器，也叫box滤波</p><p>用越大的box，只能留下更低的频率，图片越模糊</p><p>采样：重复原始信号频谱</p><p>原始函数*冲激函数得到采样结果。左边是时域，右边是频域</p><p>采样速度不够快（类似于屏幕分辨率不够高），频谱复制粘贴间隔会变小，从而发生混叠，导致走样</p><p>那么就要进行反走样：先模糊再采样，<strong>即先把高频信号砍掉再采样，让频谱覆盖范围小一点，可以看到混叠消失</strong></p><h1 id="MSAA"><a href="#MSAA" class="headerlink" title="MSAA"></a>MSAA</h1><p>MSAA：多重采样反走样，可以近似反走样，但是不能根本上解决问题，采样点增加所以计算量增大</p><p>增加像素内部采样点</p><p>判断三角形有没有覆盖像素，如果有至少一个点覆盖则上红色，覆盖率越高（覆盖的点越多）红色越深</p><p>模糊操作完成，进行采样</p><p>FXAA：找到锯齿边界换成没有锯齿的边界</p><p>TAA：复用上一帧感知到的样本，如果两帧相同可以直接用上一样本</p><p>DLSS：通过深度学习，把缺失的细节补充（超采样）</p><h1 id="深度缓冲"><a href="#深度缓冲" class="headerlink" title="深度缓冲"></a>深度缓冲</h1><p>画家算法：从远往近画，用近的图形覆盖远的图形</p><p>但是可能出现互相覆盖的问题，无法定义他们之间的深度关系，所以现实无法使用画家算法</p><p>因此引入<strong>深度缓冲</strong>：不用图形比较远近（深浅），用像素点比较</p><p>深度图，越近颜色越深</p><p>用较小深度覆盖较大深度</p>]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 05 三角形的光栅化</title>
      <link href="/posts/b10a968c.html"/>
      <url>/posts/b10a968c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>视角和视图长宽比。垂直可视角度（forY）较大→广角。较小→透视投影不明显，更像正交投影</p><img src="/posts/b10a968c/Untitled.png" class="" title="图片"><p>黑点为相机，在原点。下图为上图的侧视图的一半</p><img src="/posts/b10a968c/Untitled1.png" class="" title="图片"><p>屏幕是光栅成像设备。光栅化——把东西画在屏幕上的过程</p><p>将屏幕的空间定义在像素坐标系中</p><img src="/posts/b10a968c/Untitled2.png" class="" title="图片"><p>要怎么把一个立方体映射到屏幕空间？z方向要怎么处理？</p><p>先把x和y即宽度和高度进行拉伸，原坐标系覆盖范围 [-1,1] 长度为2 ，width&#x2F;2是x的缩放比例， height&#x2F;2是y的缩放比例</p><p>然后把物体原点定到屏幕空间的中心，即（width&#x2F;2, height&#x2F;2）</p><img src="/posts/b10a968c/Untitled3.png" class="" title="图片"><p>要显示的图像储存在显存中的一块区域</p><p>LCD液晶显示器：用液晶的原理控制屏幕要显示的内容，液晶会通过自己的不同排布（扭曲）影响光的偏振，光就可以从垂直的光栅进入再从水平的光栅出去（右上图）</p><img src="/posts/b10a968c/Untitled4.png" class="" title="图片"><p>如何判断一个像素和三角形的位置关系？（只被三角形覆盖一半的像素应不应该发光？）</p><img src="/posts/b10a968c/Untitled5.png" class="" title="图片"><p>采样：把一个函数离散化的过程，即由不同的x求出f(x)。通过采样来进行光栅化是最简单的方法</p><img src="/posts/b10a968c/Untitled6.png" class="" title="图片"><img src="/posts/b10a968c/Untitled7.png" class="" title="图片"><p>定义函数判断是否在三角形内，即采样</p><img src="/posts/b10a968c/Untitled8.png" class="" title="图片"><p>原点在左下角。像素中心在x+0.5，y+0.5</p><img src="/posts/b10a968c/Untitled9.png" class="" title="图片"><p>做叉积！即如果q点在所有边的同一边，那么q就在三角形外面；若有一个或以上在不同边，那么就在三角形内</p><img src="/posts/b10a968c/Untitled10.png" class="" title="图片"><p>如果点在三角形的边界？一般不做处理，自定义。opengl：记上不记下，记左不记右</p><p>如果三角形没有覆盖所有像素，可以只对BoundingBox（AABB）包围盒进行光栅化，增大效率。尽量避免细长三角形，占用太多空间</p><img src="/posts/b10a968c/Untitled11.png" class="" title="图片"><p>左边标准RGB排列，右边钻石排列。人眼对绿色最敏感，钻石排列绿色密度会高一点</p><img src="/posts/b10a968c/Untitled12.png" class="" title="图片"><p>走样，锯齿→像素低。如果只填充上面三角形采样的像素点，会得到下面这幅图</p><img src="/posts/b10a968c/Untitled13.png" class="" title="图片">]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 04 三维变换</title>
      <link href="/posts/f5ae4401.html"/>
      <url>/posts/f5ae4401.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>矩阵的逆等于它的转置→正交矩阵</p><img src="/posts/f5ae4401/Untitled.png" class="" title="图片"><img src="/posts/f5ae4401/Untitled1.png" class="" title="图片"><h1 id="三维旋转变换"><a href="#三维旋转变换" class="headerlink" title="三维旋转变换"></a>三维旋转变换</h1><p>绕x,y,z轴旋转</p><img src="/posts/f5ae4401/Untitled2.png" class="" title="图片"><p>旋转公式，绕任意点旋转</p><p>定义旋转轴n（默认过原点，起点在原点上）和旋转角度</p><img src="/posts/f5ae4401/Untitled3.png" class="" title="图片"><h1 id="视图-观测变换"><a href="#视图-观测变换" class="headerlink" title="视图&#x2F;观测变换"></a>视图&#x2F;观测变换</h1><p>mvp变换：模型，视图，投影</p><img src="/posts/f5ae4401/Untitled4.png" class="" title="图片"><p>相机和物体同时移动，拍摄出来的内容一致</p><img src="/posts/f5ae4401/Untitled5.png" class="" title="图片"><p>先做平移，再旋转</p><img src="/posts/f5ae4401/Untitled6.png" class="" title="图片"><img src="/posts/f5ae4401/Untitled7.png" class="" title="图片"><h1 id="投影变换"><a href="#投影变换" class="headerlink" title="投影变换"></a>投影变换</h1><p>不同的投影方式：正交投影（不存在近大远小），透视投影</p><img src="/posts/f5ae4401/Untitled8.png" class="" title="图片"><img src="/posts/f5ae4401/Untitled9.png" class="" title="图片"><h2 id="正交投影"><a href="#正交投影" class="headerlink" title="正交投影"></a>正交投影</h2><p>去除z轴</p><img src="/posts/f5ae4401/Untitled10.png" class="" title="图片"><p>将一个立方体映射成标准立方体。先平移中心到原点，把长度都拉伸成2，覆盖[-1，1]范围</p><p>近大于远，右大于左，上大于下</p><img src="/posts/f5ae4401/Untitled11.png" class="" title="图片"><img src="/posts/f5ae4401/Untitled12.png" class="" title="图片"><img src="/posts/f5ae4401/Untitled13.png" class="" title="图片"><h2 id="透视投影"><a href="#透视投影" class="headerlink" title="透视投影"></a>透视投影</h2><p>x,y,z乘上任意值，仍是x,y,z这个点</p><img src="/posts/f5ae4401/Untitled14.png" class="" title="图片"><p>先挤压成正交投影，再用正交投影的方法解决</p><img src="/posts/f5ae4401/Untitled15.png" class="" title="图片"><p>x,y,z点要挤压成跟x’,y’,z’一样高度。通过相似三角形可以得到x’,y’点的坐标，z‘未知</p><img src="/posts/f5ae4401/Untitled16.png" class="" title="图片"><img src="/posts/f5ae4401/Untitled17.png" class="" title="图片"><img src="/posts/f5ae4401/Untitled18.png" class="" title="图片"><p>近的平面不会发生任何变化</p><img src="/posts/f5ae4401/Untitled19.png" class="" title="图片"><p>前两个数肯定为0，不然加上会不等于n^2</p><img src="/posts/f5ae4401/Untitled20.png" class="" title="图片"><p>远平面的中心点不会发生任何变化</p><img src="/posts/f5ae4401/Untitled21.png" class="" title="图片"><img src="/posts/f5ae4401/Untitled22.png" class="" title="图片">]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 03 二维变换</title>
      <link href="/posts/3fdaac78.html"/>
      <url>/posts/3fdaac78.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="缩放变换"><a href="#缩放变换" class="headerlink" title="缩放变换"></a>缩放变换</h1><img src="/posts/3fdaac78/0.png" class="" title="图片"><img src="/posts/3fdaac78/1.png" class="" title="图片"><img src="/posts/3fdaac78/2.png" class="" title="图片"><h1 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h1><img src="/posts/3fdaac78/3.png" class="" title="图片"><h1 id="切变"><a href="#切变" class="headerlink" title="切变"></a>切变</h1><p>y方向不变，下边不变，上边的所有点在水平方向上都移动了a，那么所有点在水平方向上都移动了ay（这里可以把y看作是垂直方向边的比例，比如说在中间的点此刻就移动了0.5a。最后的x‘坐标就是x+ay</p><img src="/posts/3fdaac78/4.png" class="" title="图片"><h1 id="旋转"><a href="#旋转" class="headerlink" title="旋转"></a>旋转</h1><p>默认以原点为中心逆时针旋转</p><img src="/posts/3fdaac78/5.png" class="" title="图片"><h1 id="线性变换"><a href="#线性变换" class="headerlink" title="线性变换"></a>线性变换</h1><img src="/posts/3fdaac78/6.png" class="" title="图片"><h1 id="齐次坐标"><a href="#齐次坐标" class="headerlink" title="齐次坐标"></a>齐次坐标</h1><img src="/posts/3fdaac78/7.png" class="" title="图片"><p>仅用二维无法实现上面的式子，可以通过再增加一个矩阵实现</p><img src="/posts/3fdaac78/8.png" class="" title="图片"><p>但是这不是线性变换（即矩阵乘向量），因此是一个特殊情况，为了化特殊为一般，引入齐次坐标来解决平移问题，同是也适用于其他变换</p><p>升维，从而实现平移操作</p><img src="/posts/3fdaac78/9.png" class="" title="图片"><p>点加个1，向量加个0。向量具有平移不变性，加0保护其不变。</p><p>可以用下面这幅图加以理解。</p><img src="/posts/3fdaac78/10.png" class="" title="图片"><p>点+点得到中点</p><h1 id="仿射变换"><a href="#仿射变换" class="headerlink" title="仿射变换"></a>仿射变换</h1><p>就是以上所有变换引用了齐次坐标后的变换</p><img src="/posts/3fdaac78/11.png" class="" title="图片"><p>最后一行永远是0 0 1，平移永远在最后一列</p><img src="/posts/3fdaac78/12.png" class="" title="图片"><h1 id="逆变换"><a href="#逆变换" class="headerlink" title="逆变换"></a>逆变换</h1><img src="/posts/3fdaac78/13.png" class="" title="图片"><h1 id="组合变换"><a href="#组合变换" class="headerlink" title="组合变换"></a>组合变换</h1><p>变换的顺序很重要</p><img src="/posts/3fdaac78/14.png" class="" title="图片"><p>从右往左算，先旋转再平移</p><img src="/posts/3fdaac78/15.png" class="" title="图片"><p>现挪回去原点再进行旋转变换，然后再挪回去原本的位置</p><img src="/posts/3fdaac78/16.png" class="" title="图片"><h1 id="三维变换"><a href="#三维变换" class="headerlink" title="三维变换"></a>三维变换</h1><p>升四维</p><img src="/posts/3fdaac78/17.png" class="" title="图片"><p>最后一行永远是0 0 0 1，平移永远在最后一列</p><img src="/posts/3fdaac78/18.png" class="" title="图片"><p>左上角3×3矩阵进行线性变换</p>]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 02 线性代数</title>
      <link href="/posts/17ec1090.html"/>
      <url>/posts/17ec1090.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>图形学依赖于线性代数</p><h1 id="向量-矢量"><a href="#向量-矢量" class="headerlink" title="向量&#x2F;矢量"></a>向量&#x2F;矢量</h1><img src="/posts/17ec1090/0.png" class="" title="图片"><p>向量的长度，用单位向量表示方向</p><img src="/posts/17ec1090/1.png" class="" title="图片"><p>向量与转置向量。默认为列向量</p><img src="/posts/17ec1090/2.png" class="" title="图片"><h2 id="向量点乘"><a href="#向量点乘" class="headerlink" title="向量点乘"></a>向量点乘</h2><p>得到的结果是一个数。</p><p>如果两个向量都是单位向量，他们的点乘可以方便地<strong>得到两个向量之间的夹角</strong></p><img src="/posts/17ec1090/3.png" class="" title="图片"><img src="/posts/17ec1090/4.png" class="" title="图片"><img src="/posts/17ec1090/5.png" class="" title="图片"><p>投影，可以将一个向量分解成两个向量</p><img src="/posts/17ec1090/6.png" class="" title="图片"><aside>💡 **点乘的作用：两个向量有多接近，方向是否一致<p>点乘在光照的运用-边缘菲涅尔：看的角度和面的法线是否重合问题。越重合，说明面是对着相机的。否则面就越侧面（越亮），直到变成负数就是背面了（暗色）。**</p></aside><img src="/posts/17ec1090/7.png" class="" title="图片"><img src="/posts/17ec1090/8.png" class="" title="图片"><h2 id="向量叉乘"><a href="#向量叉乘" class="headerlink" title="向量叉乘"></a>向量叉乘</h2><p>新向量，垂直于a和b</p><p>a×b，右手螺旋，四指从a绕到b，大母指的方向就是两个向量叉乘的方向</p><img src="/posts/17ec1090/9.png" class="" title="图片"><p>从x×y得到z。下面默认是右手坐标系</p><img src="/posts/17ec1090/10.png" class="" title="图片"><img src="/posts/17ec1090/11.png" class="" title="图片"><aside>💡 **叉乘的作用：判断左和右，内与外**</aside><img src="/posts/17ec1090/12.png" class="" title="图片"><p>如下左图，a×b，用右手螺旋得到的z向量方向为正，说明b在a的左边。反之若为负说明在右边</p><p>如下右图，先看AB×AP，得到结果向外，说明AP在AB左侧，依次看BC×BP，CA×CP，最后AP都在他们左侧，说明P点在三角形内部。若有一个在右侧则在外部。</p><aside>💡 **只要P点都在三条线同一侧，就是在内部。**</aside><img src="/posts/17ec1090/13.png" class="" title="图片"><h2 id="坐标系"><a href="#坐标系" class="headerlink" title="坐标系"></a>坐标系</h2><p>可以把任意一个向量分解到三个方向上，方便得到投影长度</p><img src="/posts/17ec1090/14.png" class="" title="图片"><h1 id="矩阵"><a href="#矩阵" class="headerlink" title="矩阵"></a>矩阵</h1><img src="/posts/17ec1090/15.png" class="" title="图片"><h2 id="矩阵的乘积"><a href="#矩阵的乘积" class="headerlink" title="矩阵的乘积"></a>矩阵的乘积</h2><p>要算哪个位置就回溯去找对应位置的数进行点乘。</p><p>比如3行2列×2行4列，答案必然是3行4列，现在需要计算第2行第4列的数大小，就回去找第2行的（5 2）分别乘第4列（4 3）并相加得到26</p><p>左管行，右管列</p><p>没有交换律</p><img src="/posts/17ec1090/16.png" class="" title="图片"><p>矩阵×向量，矩阵永远在左边，向量永远为列向量</p><img src="/posts/17ec1090/17.png" class="" title="图片"><h2 id="矩阵的转置"><a href="#矩阵的转置" class="headerlink" title="矩阵的转置"></a>矩阵的转置</h2><img src="/posts/17ec1090/18.png" class="" title="图片"><h2 id="单位矩阵"><a href="#单位矩阵" class="headerlink" title="单位矩阵"></a>单位矩阵</h2><img src="/posts/17ec1090/19.png" class="" title="图片"><h2 id="向量的点乘叉乘转换成矩阵形式"><a href="#向量的点乘叉乘转换成矩阵形式" class="headerlink" title="向量的点乘叉乘转换成矩阵形式"></a>向量的点乘叉乘转换成矩阵形式</h2><p>A*是一个矩阵</p><img src="/posts/17ec1090/20.png" class="" title="图片">]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101 Lecture 01 计算机图形学概述</title>
      <link href="/posts/6cfa67c0.html"/>
      <url>/posts/6cfa67c0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>如何直接暴力地判断游戏画面的好坏（技术方面）——画面的亮度即<strong>全局光照技术</strong></p><h1 id="全局光照技术"><a href="#全局光照技术" class="headerlink" title="全局光照技术"></a><strong>全局光照技术</strong></h1><p>全局光照（Global Illumination,简称 GI）， 作为图形学中比较酷的概念之一，是指既考虑场景中来自光源的直接光照，又考虑经过场景中其他物体反射后的间接光照的一种渲染技术。</p><p>即可以理解为：全局光照 &#x3D; 直接光照(Direct Light) + 间接光照(Indirect Light)</p><img src="/posts/6cfa67c0/0.png" class="" title="图片"><p>图1 Direct illumination （原图连接）</p><img src="/posts/6cfa67c0/1.png" class="" title="图片"><p>图2 Global illumination &#x3D; Direct illumination +Indirect illumination（全局光照）</p><h1 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h1><h2 id="游戏应用"><a href="#游戏应用" class="headerlink" title="游戏应用"></a>游戏应用</h2><h3 id="卡通渲染——风格化渲染"><a href="#卡通渲染——风格化渲染" class="headerlink" title="卡通渲染——风格化渲染"></a><strong>卡通渲染——风格化渲染</strong></h3><p>游戏中常用的卡通渲染分为美式卡通风格和日式卡通风格。</p><p>美式卡通风格在色彩上比较连续，有渐变色，着色风格很大程度上依赖于艺术家定义的色调（tone），而在阴影和高光方面常常采取夸张和变形的做法，比较典型的是《军团要塞2》；</p><img src="/posts/6cfa67c0/2.png" class="" title="图片"><p>日式卡通风格往往角色造型更写实，但在着色方面，则趋向于大片大片纯色色块，并有的明暗交界，例如《崩坏3》。</p><img src="/posts/6cfa67c0/3.png" class="" title="图片"><h2 id="电影应用"><a href="#电影应用" class="headerlink" title="电影应用"></a>电影应用</h2><h3 id="特效（special-effects）"><a href="#特效（special-effects）" class="headerlink" title="特效（special effects）"></a><strong>特效（special effects）</strong></h3><p>最简单的图形学应用——平常不常见的画面，穿帮被发现概率小</p><img src="/posts/6cfa67c0/4.png" class="" title="图片"><p>CG影视后期特效的制作流程</p><h3 id="面部动作捕捉（Facial-Motion-Capture）"><a href="#面部动作捕捉（Facial-Motion-Capture）" class="headerlink" title="面部动作捕捉（Facial Motion Capture）"></a><strong>面部动作捕捉（Facial Motion Capture）</strong></h3><p>它是动作捕捉（Motion Capture）技术的一部分，指使用机械装置、相机等设备记录人类面部表情和动作，将之转换为一系列参数数据的过程。</p><p>与捕捉由关节点构成、较为稳定的人体动作相比，面部表情更为细微复杂，因此对数据精度要求更高。</p><p>CG 电影、大型游戏在预算允许的情况下，倾向于选择捕捉真人面部来完成角色的演出。与人为制作的动画角色表情相比，通过捕捉真人面部动作生成的角色会更具真实感。</p><img src="/posts/6cfa67c0/5.png" class="" title="图片"><h3 id="毛发模型和渲染"><a href="#毛发模型和渲染" class="headerlink" title="毛发模型和渲染"></a><strong>毛发模型和渲染</strong></h3><p>毛发渲染一直是实时图形学的难题，因为其光照复杂，数量众多，物理效果不好抽象等。在早期，只能通过若干面片代替，后来随着硬件及渲染技术的提升，慢慢发展出了经验模型的Kajiya-Kay和基于物理的Marschner毛发渲染模型。</p><img src="/posts/6cfa67c0/6.png" class="" title="图片"><h3 id="（物理）模拟动画-仿真"><a href="#（物理）模拟动画-仿真" class="headerlink" title="（物理）模拟动画&#x2F;仿真"></a><strong>（物理）模拟动画&#x2F;仿真</strong></h3><p>今天的游戏动画应用了多种物理模拟技术，例如运动学模拟(kinematics simulation)，刚体动力学模拟(rigid body dynamics simulation)，绳子&#x2F;布料模拟(string&#x2F;cloth simulation)，柔体动力学模拟(soft body dynamics simulation)，流体动力学模拟(fluid dynamics simulation)等等。另外碰撞侦测(collision detection)是许多模拟系统里所需的。</p><h2 id="设计应用"><a href="#设计应用" class="headerlink" title="设计应用"></a>设计应用</h2><h3 id="3D建模"><a href="#3D建模" class="headerlink" title="3D建模"></a>3D建模</h3><img src="/posts/6cfa67c0/7.png" class="" title="图片"><img src="/posts/6cfa67c0/8.png" class="" title="图片"><h3 id="计算机辅助设计（Computer-Aided-Design-CAD）"><a href="#计算机辅助设计（Computer-Aided-Design-CAD）" class="headerlink" title="计算机辅助设计（Computer Aided Design, CAD）"></a><strong>计算机辅助设计（Computer Aided Design, CAD）</strong></h3><p>CAD是利用计算机快速的数值计算和强大的图文处理功能，辅助工程技术人员进行产品设计、工程绘图和数据管理的一门计算机应用技术，是计算机科学技术发展和应用中的一门重要技术。</p><p>CAD的涵盖范围很广，其设计对象最初包括两大类，一类是机械、电子、汽车、航天、农业、轻工和纺织产品等；另一类是工程设计产品等，如工程建筑。如今，CAD技术的应用范围已经延伸到诸如艺术等各行各业，如电影、动画、广告、娱乐和多媒体仿真等都属于CAD范畴。</p><h2 id="视觉信息"><a href="#视觉信息" class="headerlink" title="视觉信息"></a>视觉信息</h2><h3 id="可视化（Visualization）"><a href="#可视化（Visualization）" class="headerlink" title="可视化（Visualization）"></a><strong>可视化（Visualization）</strong></h3><p>可视化是利用计算机图形学和图像处理技术，将数据转换成图形或图像在屏幕上显示出来，并进行交互处理的理论、方法和技术。它涉及到计算机图形学、图像处理、计算机视觉、计算机辅助设计等多个领域，成为研究数据表示、数据处理、决策分析等一系列问题的综合技术。目前正在飞速发展的虚拟现实技术也是以图形图像的可视化技术为依托的。</p><p>可视化技术最早运用于计算机科学中，并形成了可视化技术的一个重要分支——科学计算可视化(Visualization in Scientific Computing)。科学计算可视化能够把科学数据，包括测量获得的数值、图像或是计算中涉及、产生的数字信息变为直观的、以图形图像信息表示的、随时间和空间变化的物理现象或物理量呈现在研究者面前，使他们能够观察、模拟和计算。</p><img src="/posts/6cfa67c0/9.png" class="" title="图片"><h3 id="虚拟现实-VR（Virtual-Reality）"><a href="#虚拟现实-VR（Virtual-Reality）" class="headerlink" title="虚拟现实 VR（Virtual Reality）"></a>虚拟现实 VR（Virtual Reality）</h3><p><strong>虚拟现实（Virtual Reality）</strong></p><p>所谓虚拟现实，顾名思义，就是虚拟和现实相互结合。从理论上来讲，虚拟现实技术（VR）是一种可以创建和体验虚拟世界的计算机仿真系统，它利用计算机生成一种模拟环境，使用户沉浸到该环境中。虚拟现实技术就是利用现实生活中的数据，通过计算机技术产生的电子信号，将其与各种输出设备结合使其转化为能够让人们感受到的现象，这些现象可以是现实中真真切切的物体，也可以是我们肉眼所看不到的物质，通过三维模型表现出来。因为这些现象不是我们直接所能看到的，而是通过计算机技术模拟出来的现实中的世界，故称为虚拟现实。</p><p><strong>增强现实（Augmented Reality）</strong></p><p>增强现实技术也被称为扩增现实，AR增强现实技术是促使真实世界信息和虚拟世界信息内容之间综合在一起的较新的技术内容，其将原本在现实世界的空间范围中比较难以进行体验的实体信息在电脑等科学技术的基础上，实施模拟仿真处理，叠加将虚拟信息内容在真实世界中加以有效应用，并且在这一过程中能够被人类感官所感知，从而实现超越现实的感官体验。真实环境和虚拟物体之间重叠之后，能够在同一个画面以及空间中同时存在。</p><p><strong>混合现实（Mixed Reality）</strong></p><p>混合现实技术（MR）是虚拟现实技术的进一步发展，该技术通过在虚拟环境中引入现实场景信息，在虚拟世界、现实世界和用户之间搭起一个交互反馈的信息回路，以增强用户体验的真实感。</p><p>混合现实是一组技术组合，不仅提供新的观看方法，还提供新的输入方法，而且所有方法相互结合，从而推动创新 。输入和输出的结合对中小型企业而言是关键的差异化优势。这样，混合现实就可以直接影响工作流程，帮助员工提高工作效率和创新能力。</p><img src="/posts/6cfa67c0/10.png" class="" title="图片"><h3 id="图形用户界面（Graphical-User-Interface）"><a href="#图形用户界面（Graphical-User-Interface）" class="headerlink" title="图形用户界面（Graphical User Interface）"></a><strong>图形用户界面（Graphical User Interface）</strong></h3><p>图形用户界面（Graphical User Interface，简称 GUI，又称图形用户接口）是指采用图形方式显示的计算机操作用户界面。</p><p>图形用户界面是一种人与计算机通信的界面显示格式，允许用户使用鼠标等输入设备操纵屏幕上的图标或菜单选项，以选择命令、调用文件、启动程序或执行其它一些日常任务。与通过键盘输入文本或字符命令来完成例行任务的字符界面相比，图形用户界面有许多优点。图形用户界面由窗口、下拉菜单、对话框及其相应的控制机制构成，在各种新式应用程序中都是标准化的，即相同的操作总是以同样的方式来完成，在图形用户界面，用户看到和操作的都是图形对象，应用的是计算机图形学的技术</p><img src="/posts/6cfa67c0/11.png" class="" title="图片"><h3 id="字体排印学（Typography）"><a href="#字体排印学（Typography）" class="headerlink" title="字体排印学（Typography）"></a><strong>字体排印学（Typography）</strong></h3><p>一种涉及对字体、字号、缩进、行间距、字符间距进行设计、安排等方法来进行排版的一种工艺。在数码技术普及之前，字体排印是一项专业的工作，数码时代的来临使字体排印不像从前仅由排字印刷方面的技术工人完成，而更被图形艺术家、艺术指导、文书人员甚至儿童广泛使用。</p><img src="/posts/6cfa67c0/12.png" class="" title="图片"><h1 id="内部原理"><a href="#内部原理" class="headerlink" title="内部原理"></a>内部原理</h1><h2 id="Rasterization（光栅化）"><a href="#Rasterization（光栅化）" class="headerlink" title="Rasterization（光栅化）"></a>Rasterization（光栅化）</h2><img src="/posts/6cfa67c0/13.png" class="" title="图片"><p><strong>光栅化就是把三维空间的几何形体显示在屏幕上。是所有游戏，即实时计算机图形学的主要应用。</strong></p><p>实时：每秒生成30帧画面（fps）</p><p>实时的反义词：离线（offline）</p><h2 id="Curves-and-Meshes（曲线和面）"><a href="#Curves-and-Meshes（曲线和面）" class="headerlink" title="Curves and Meshes（曲线和面）"></a>Curves and Meshes（曲线和面）</h2><img src="/posts/6cfa67c0/14.png" class="" title="图片"><p>各种细分方法</p><h2 id="Ray-Tracing（光线追踪）"><a href="#Ray-Tracing（光线追踪）" class="headerlink" title="Ray Tracing（光线追踪）"></a>Ray Tracing（光线追踪）</h2><img src="/posts/6cfa67c0/15.png" class="" title="图片"><p>光线跟踪（也叫ray tracing或者光束投射法)。是一个在二维(2D)屏幕上呈现三维(3D)图像的方法。</p><p>能实现很多效果但是速度较慢</p><h2 id="Animation-Simulation（动画-仿真-模拟）"><a href="#Animation-Simulation（动画-仿真-模拟）" class="headerlink" title="Animation&#x2F;Simulation（动画&#x2F;仿真&#x2F;模拟）"></a>Animation&#x2F;Simulation（动画&#x2F;仿真&#x2F;模拟）</h2><img src="/posts/6cfa67c0/16.png" class="" title="图片"><p><strong>模拟</strong></p><p>模拟是对真实事物的模仿或复制。这种模拟行为基本上需要表示所选抽象或物理系统的特定关键行为或特征。这可以用于各种环境，如安全工程，培训教育，视频游戏和测试。模拟用于科学建模，以获取和获取有关它们如何运作的信息。</p><p><strong>动画</strong></p><p>动画是通过使用 3-D 或 2-D 图稿的快速显示图像来创建任何运动的错觉的方法。由于持久性视觉，这种效果变成了光学运动或错觉。这可以通过多种方式制作和演示。通常，呈现动画的最常用技术是通过视频程序或电影，也可以使用其他类型的方法。</p><h1 id="计算机图形学与计算机视觉的区别"><a href="#计算机图形学与计算机视觉的区别" class="headerlink" title="计算机图形学与计算机视觉的区别"></a>计算机图形学与计算机视觉的区别</h1><ul><li>图形学不是计算机视觉。</li><li>计算机视觉：猜测、预测、分析处理</li><li>计算机视觉是理解这个世界，计算机图形学是创造这个世界</li></ul><img src="/posts/6cfa67c0/17.png" class="" title="图片">]]></content>
      
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>空间站搭建过程记录（三）评论系统</title>
      <link href="/posts/9228473d.html"/>
      <url>/posts/9228473d.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>因为不知道哪种评论系统好用，所以弄了好几个对比一下哈哈哈哈哈</p><h1 id="Gittalk（好看但是网络问题不太ok）"><a href="#Gittalk（好看但是网络问题不太ok）" class="headerlink" title="Gittalk（好看但是网络问题不太ok）"></a>Gittalk（好看但是网络问题不太ok）</h1><p><a href="https://blog.csdn.net/qq_33384402/article/details/107200465">Hexo-butterfly评论系统配置: Gittalk_hexo butterfly免费评论-CSDN博客</a></p><h2 id="创建-OAuth-Application"><a href="#创建-OAuth-Application" class="headerlink" title="创建 OAuth Application"></a>创建 OAuth Application</h2><p>首先，先跳转到 OAuth Apps 的创建界面。<br>具体路径是 <code>Settings</code>-<code>Developer settings</code>-<code>OAuth Apps</code>。</p><img src="/posts/9228473d/1.png" class="" title="图片"><p>点击 <code>Register a new application</code>，创建一个新的 OAuth Application。</p><img src="/posts/9228473d/2.png" class="" title="图片"><p>以下是对这些字段的说明</p><table><thead><tr><th align="center">表单字段</th><th align="center"></th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">Application name</td><td align="center">必填</td><td align="center">应用名字，随便填</td></tr><tr><td align="center">Homepage URL</td><td align="center">必填</td><td align="center">填写你的博客首页地址</td></tr><tr><td align="center">Application description</td><td align="center">选填</td><td align="center">应用描述，随便填</td></tr><tr><td align="center">Authorization callback URL</td><td align="center">必填</td><td align="center">登录 Github 账号后，要跳转回去，这个地址就是跳转回去的地址</td></tr></tbody></table><p>注册好后可以得到client id和client serect</p><p>修改 <code>_data/butterfly.yml</code>，comments System👉use：Gitalk</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="comment"># Up to two comments system, the first will be shown as default</span></span><br><span class="line">  <span class="comment"># Choose: Disqus/Disqusjs/Livere/Gitalk/Valine/Waline/Utterances/Facebook Comments/Twikoo/Giscus/Remark42/Artalk</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">Gitalk</span></span><br><span class="line">  <span class="attr">text:</span> <span class="literal">true</span> <span class="comment"># Display the comment name next to the button</span></span><br><span class="line">  <span class="comment"># lazyload: The comment system will be load when comment element enters the browser&#x27;s viewport.</span></span><br><span class="line">  <span class="comment"># If you set it to true, the comment count will be invalid</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">false</span> <span class="comment"># Display comment count in post&#x27;s top_img</span></span><br><span class="line">  <span class="attr">card_post_count:</span> <span class="literal">false</span> <span class="comment"># Display comment count in Home Page</span></span><br></pre></td></tr></table></figure><p>修改gitalk配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># gitalk</span></span><br><span class="line"><span class="comment"># https://github.com/gitalk/gitalk</span></span><br><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">  <span class="attr">client_id:</span> <span class="string">看GitHub</span></span><br><span class="line">  <span class="attr">client_secret:</span> <span class="string">看Github</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">Apritau.github.io</span></span><br><span class="line">  <span class="attr">owner:</span> <span class="string">Apritau</span></span><br><span class="line">  <span class="attr">admin:</span> <span class="string">Apritau</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure><img src="/posts/9228473d/3.png" class="" title="图片"><p>其实还挺好看的嘿嘿，不过发现因为github网络的问题，要用gitalk的话还要挂梯子&#x3D; &#x3D; 换一个别的试试(╹ڡ╹ )</p><h1 id="Valine（部署过程简单）"><a href="#Valine（部署过程简单）" class="headerlink" title="Valine（部署过程简单）"></a>Valine（部署过程简单）</h1><p><a href="https://moonshuo.cn/posts/51359.html">Hexo中Buttefly主题Valine评论系统配置以及美化（七） | 偷掉月亮 (moonshuo.cn)</a></p><p>进入<a href="https://www.leancloud.cn/">LeanCloud官网</a>，选择国际版，创建Valine应用，名称随意。</p><p>进入对应的应用，点击 <code>设置 -&gt; 应用 凭证，获取</code>AppID<code>和</code>AppKey&#96;</p><p>修改 <code>_data/butterfly.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># valine</span></span><br><span class="line"><span class="comment"># https://valine.js.org</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">appId:</span> <span class="string">???</span></span><br><span class="line">  <span class="attr">appKey:</span> <span class="string">???</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">monsterid</span> <span class="comment"># gravatar style https://valine.js.org/#/avatar</span></span><br><span class="line">  <span class="attr">serverURLs:</span> <span class="comment"># This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span></span><br><span class="line">  <span class="attr">bg:</span> <span class="comment"># valine background</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure><p>弄好啦！🤔不过感觉没内味，再弄个别的看看</p><img src="/posts/9228473d/4.png" class="" title="图片"><h1 id="Twikoo（这个比较麻烦）"><a href="#Twikoo（这个比较麻烦）" class="headerlink" title="Twikoo（这个比较麻烦）"></a>Twikoo（这个比较麻烦）</h1><p><a href="https://nickxu.me/2022/02/19/Hexo-Butterfly-%E5%BB%BA%E7%AB%99%E6%8C%87%E5%8D%97%EF%BC%88%E5%9B%9B%EF%BC%89Twikoo-%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/">Hexo + Butterfly 建站指南（四）Twikoo 评论系统 | NX の 博客 (nickxu.me)</a></p><h2 id="配置数据库和云函数"><a href="#配置数据库和云函数" class="headerlink" title="配置数据库和云函数"></a>配置数据库和云函数</h2><h3 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h3><p>使用<code>MongoDB</code>数据库来存储数据，先<a href="https://www.mongodb.com/zh-cn/cloud/atlas/register">注册 MongoDB 账号</a></p><p>创建免费数据库，类型选择<code>Shared</code>，区域选择 <code>AWS / N. Virginia (us-east-1)</code></p><img src="/posts/9228473d/5.png" class="" title="图片"><p>因为我之前建过一个所以这里显示要付费（我都快忘了）</p><p>点connect</p><img src="/posts/9228473d/6.png" class="" title="图片"><p>填入用户名和密码</p><img src="/posts/9228473d/7.png" class="" title="图片"><p>点击 NetworkAccess 添加一个0.0.0.0&#x2F;0的IP地址（允许所有人访问</p><img src="/posts/9228473d/9.png" class="" title="图片"><img src="/posts/9228473d/8.png" class="" title="图片"><p>连接方式选第一个 Drivers</p><img src="/posts/9228473d/10.png" class="" title="图片"><p>跟随步骤，下载mongodb。记录下<strong>连接字符串</strong>，待会使用时记得将其中的 <code>&lt;password&gt;</code> 修改为刚刚设置的用户密码</p><img src="/posts/9228473d/11.png" class="" title="图片"><h3 id="Vercel"><a href="#Vercel" class="headerlink" title="Vercel"></a>Vercel</h3><p>先登录or注册<a href="https://vercel.com/">Vercel</a></p><p>这个网站之前墙了我的github账号（可恶！）不过客服回复和处理得都很快嘿嘿（第一次用英文写邮件，谢谢李华多年的栽培）</p><p>进入Twikoo官方文档：<a href="https://twikoo.js.org/backend.html">云函数部署 | Twikoo 文档</a>，点云函数部署，下滑下滑找到deploy，点击</p><img src="/posts/9228473d/12.png" class="" title="图片"><p>也可以直接点<a href="https://vercel.com/new/apritaus-projects/clone?repository-url=https://github.com/twikoojs/twikoo/tree/main/src/server/vercel-min">这个链接</a>，不过版本更新的话我这个可能会过期</p><p>点Github</p><img src="/posts/9228473d/13.png" class="" title="图片"><p>给自己的数据库起个名字（不能大写字母，不能跟github仓库里的项目重名）</p><p>完成后，在导航栏选择<code>Setting</code>，在左侧选择<code>Environment Variables</code>，添加变量<code>MONGODB_URI</code>，值输入刚才的<strong>连接字符串</strong>，记得修改 <code>&lt;password&gt;</code> 为数据库用户密码（别打错字母记得检查一下，我真服了，，）</p><img src="/posts/9228473d/14.png" class="" title="图片"><p>进入 Settings - Deployment Protection，设置 Vercel Authentication 为 Disabled，并 Save</p><p>导航栏中选择<code>Deployments</code>，重新部署一下（Redeploy）</p><img src="/posts/9228473d/15.png" class="" title="图片"><p>这样就成功了，在右边的<code>域名（DOMAINS）</code>里挑一个记录下域名</p><img src="/posts/9228473d/16.png" class="" title="图片"><p>这一整条 <code>URL</code>就是 <code>环境 ID</code></p><img src="/posts/9228473d/17.png" class="" title="图片"><p>注意：因为 <code>Vercel.app</code> 可能在国内被墙，所以可能需要手动添加一个自己域名，请见<a href="https://nickxu.me/2022/09/11/%E3%80%8ETwikoo%E3%80%8F%E8%A7%A3%E5%86%B3-Vercel-app-%E5%9C%A8%E5%9B%BD%E5%86%85%E8%A2%AB%E5%A2%99%E5%AF%BC%E8%87%B4%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%E7%9A%84%E9%97%AE%E9%A2%98/">『Twikoo』解决 Vercel.app 在国内被墙导致无法使用的问题</a></p><p><a href="https://blog.chitang.dev/posts/hexo-vercel-blog/">使用 Hexo 与 Vercel 零成本打造你的个人博客 | Chi_Tang’s Blog (chitang.dev)</a></p><p><a href="https://zhuanlan.zhihu.com/p/645396146">关于Vercel被墙导致获取Twikoo评论失败的解决方案 - 知乎 (zhihu.com)</a></p><img src="/posts/9228473d/18.png" class="" title="图片"><p>做好咯，不过为什么隐私政策在中间🤔删掉好了</p>]]></content>
      
      
      
        <tags>
            
            <tag> 空间站建设日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>空间站搭建过程记录（二）主题调整美化</title>
      <link href="/posts/d2e99940.html"/>
      <url>/posts/d2e99940.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><blockquote><p>2024.5.17</p></blockquote><p><a href="https://meuicat.com/blog/38/">重构记录 - 3 | 爱吃肉的猫 (meuicat.com)</a></p><h1 id="宽屏适配"><a href="#宽屏适配" class="headerlink" title="宽屏适配"></a>宽屏适配</h1><p>在自建的CSS文件 [blogRoot]&#x2F;source&#x2F;config&#x2F;css&#x2F;icat.css 里新增以下内容</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.layout</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">max-width</span>:<span class="number">1400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 重新定义宽度 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.layout</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#post</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">78%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aside-content</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">312px</span>;</span><br><span class="line">    <span class="attribute">min-width</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.layout</span><span class="selector-class">.hide-aside</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">1400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 定义是否侧边栏的宽度 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">19em</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span> &gt;<span class="selector-class">.recent-post-info</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">56px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">64%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: auto;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span> &gt;<span class="selector-class">.recent-post-info</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">20px</span> <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">text-align</span>: center;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 主页文章列表图片宽度 */</span></span><br></pre></td></tr></table></figure><h1 id="页脚透明"><a href="#页脚透明" class="headerlink" title="页脚透明"></a>页脚透明</h1><p>在自建的CSS文件 [blogRoot]&#x2F;source&#x2F;config&#x2F;css&#x2F;icat.css 里新增以下内容</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-footer-background);</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-id">#footer-wrap</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color)</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-id">#footer-wrap</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color)</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/* 页脚透明 */</span></span><br></pre></td></tr></table></figure><h1 id="侧边栏分类栏调整"><a href="#侧边栏分类栏调整" class="headerlink" title="侧边栏分类栏调整"></a>侧边栏分类栏调整</h1><p>在自建的CSS文件 [blogRoot]&#x2F;source&#x2F;css&#x2F;icat.css 里新增以下内容</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-archives</span> <span class="selector-tag">ul</span><span class="selector-class">.card-archive-list</span>, <span class="selector-id">#aside-content</span> <span class="selector-class">.card-categories</span> <span class="selector-tag">ul</span><span class="selector-class">.card-category-list</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">    <span class="attribute">display</span>: -moz-box;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">    <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">    <span class="attribute">display</span>: box;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    -webkit-box-lines: multiple;</span><br><span class="line">    -moz-box-lines: multiple;</span><br><span class="line">    -o-box-lines: multiple;</span><br><span class="line">    -webkit-<span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    -ms-<span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    -webkit-box-pack: justify;</span><br><span class="line">    -moz-box-pack: justify;</span><br><span class="line">    -o-box-pack: justify;</span><br><span class="line">    -ms-<span class="attribute">flex</span>-pack: justify;</span><br><span class="line">    -webkit-<span class="attribute">justify-content</span>: space-between;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">    -webkit-box-pack: justify;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-archives</span> <span class="selector-tag">ul</span><span class="selector-class">.card-archive-list</span> &gt; <span class="selector-class">.card-archive-list-item</span>, <span class="selector-id">#aside-content</span> <span class="selector-class">.card-categories</span> <span class="selector-tag">ul</span><span class="selector-class">.card-category-list</span> &gt; <span class="selector-class">.card-category-list-item</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">48%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">3px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-archives</span> <span class="selector-tag">ul</span><span class="selector-class">.card-archive-list</span> &gt; <span class="selector-class">.card-archive-list-item</span> <span class="selector-tag">a</span>, <span class="selector-id">#aside-content</span> <span class="selector-class">.card-categories</span> <span class="selector-tag">ul</span><span class="selector-class">.card-category-list</span> &gt; <span class="selector-class">.card-category-list-item</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">    <span class="attribute">display</span>: -moz-box;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">    <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">    <span class="attribute">display</span>: box;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">3px</span> <span class="number">10px</span>;</span><br><span class="line">    -webkit-box-orient: vertical;</span><br><span class="line">    -moz-box-orient: vertical;</span><br><span class="line">    -o-box-orient: vertical;</span><br><span class="line">    -webkit-<span class="attribute">flex-direction</span>: column;</span><br><span class="line">    -ms-<span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color);</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: all <span class="number">0.4s</span>;</span><br><span class="line">    -moz-<span class="attribute">transition</span>: all <span class="number">0.4s</span>;</span><br><span class="line">    -o-<span class="attribute">transition</span>: all <span class="number">0.4s</span>;</span><br><span class="line">    -ms-<span class="attribute">transition</span>: all <span class="number">0.4s</span>;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.4s</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#cbcbcb</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">    -webkit-box-orient: vertical;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 侧边栏分类（标签）样式调整 */</span></span><br></pre></td></tr></table></figure><h2 id="侧边栏分类"><a href="#侧边栏分类" class="headerlink" title="侧边栏分类"></a>侧边栏分类</h2><p>修改 [blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;scripts&#x2F;helpers&#x2F;aside_categories.js 里第五十八行的内容<br>（**+** 号直接删除 即是正常缩进）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    ···</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (showCount) &#123;</span><br><span class="line">-           result += <span class="string">`&lt;span class=&quot;card-category-list-count&quot;&gt;<span class="subst">$&#123;cat.length&#125;</span>&lt;/span&gt;`</span></span><br><span class="line">+            result += <span class="string">`&lt;span class=&quot;card-category-list-count&quot;&gt;<span class="subst">$&#123;cat.length&#125;</span> 篇&lt;/span&gt;`</span></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (isExpand &amp;&amp; isTopParent &amp;&amp; child) &#123;</span><br><span class="line">            result += <span class="string">`&lt;i class=&quot;fas fa-caret-left <span class="subst">$&#123;expandClass&#125;</span>&quot;&gt;&lt;/i&gt;`</span></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">    ···</span><br></pre></td></tr></table></figure><h2 id="侧边栏归档"><a href="#侧边栏归档" class="headerlink" title="侧边栏归档"></a>侧边栏归档</h2><p>修改 [blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;scripts&#x2F;helpers&#x2F;aside_archives.js 里第九十二行的内容<br>（**+** 号直接删除 即是正常缩进）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    ···</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (showCount) &#123;</span><br><span class="line">-     result += <span class="string">`&lt;span class=&quot;card-archive-list-count&quot;&gt;<span class="subst">$&#123;item.count&#125;</span>&lt;/span&gt;`</span></span><br><span class="line">+      result += <span class="string">`&lt;span class=&quot;card-archive-list-count&quot;&gt;<span class="subst">$&#123;item.count&#125;</span> 篇&lt;/span&gt;`</span></span><br><span class="line">    &#125;</span><br><span class="line">    result += <span class="string">&#x27;&lt;/a&gt;&#x27;</span></span><br><span class="line">    result += <span class="string">&#x27;&lt;/li&gt;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    ···</span><br></pre></td></tr></table></figure><h1 id="文章页调整"><a href="#文章页调整" class="headerlink" title="文章页调整"></a>文章页调整</h1><h2 id="版权样式调整"><a href="#版权样式调整" class="headerlink" title="版权样式调整"></a>版权样式调整</h2><p>在自建的CSS文件 [blogRoot]&#x2F;source&#x2F;config&#x2F;css&#x2F;icat.css 里新增以下内容</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.post-copyright</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-card-bg);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1rem</span> <span class="number">1.3rem</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">1.5rem</span> <span class="number">0px</span> <span class="number">0.5rem</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.post-copyright</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">22px</span>;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">77px</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;\e039&quot;</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">180px</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;iconfont&quot;</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor);</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.1</span>;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">7px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 版权样式调整 */</span></span><br></pre></td></tr></table></figure><h2 id="打赏-标签-分享-调整"><a href="#打赏-标签-分享-调整" class="headerlink" title="打赏&#x2F;标签&#x2F;分享 调整"></a>打赏&#x2F;标签&#x2F;分享 调整</h2><p>修改 [blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;layout&#x2F;post.pug 里第十一 至 十八行的内容<br>（**+** 号直接删除 即是正常缩进）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">    ···</span><br><span class="line"></span><br><span class="line">    include includes/post/post-copyright.pug</span><br><span class="line">    .tag_share</span><br><span class="line">+      if theme.reward.enable &amp;&amp; theme.reward.QR_code</span><br><span class="line">+        !=partial(&#x27;includes/post/reward&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">      if (theme.post_meta.post.tags)</span><br><span class="line">        .post-meta__tag-list</span><br><span class="line">          each item, index in page.tags.data</span><br><span class="line">            a(href=url_for(item.path)).post-meta__tags #[=item.name]</span><br><span class="line">      include includes/third-party/share/index.pug</span><br><span class="line">-</span><br><span class="line">-   if theme.reward.enable &amp;&amp; theme.reward.QR_code</span><br><span class="line">-     !=partial(&#x27;includes/post/reward&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line"></span><br><span class="line">    //- ad</span><br><span class="line">    if theme.ad &amp;&amp; theme.ad.post</span><br><span class="line">      .ads-wrap!=theme.ad.post</span><br><span class="line"></span><br><span class="line">    ···</span><br></pre></td></tr></table></figure><p>新增 [blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;layout&#x2F;includes&#x2F;post&#x2F;reward.pug 页面内容<br>（**+** 号直接删除 即是正常缩进）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">.post-reward</span><br><span class="line">  .reward-button</span><br><span class="line">    i.fas.fa-qrcode</span><br><span class="line">    = &#x27; &#x27; + _p(&#x27;donate&#x27;)</span><br><span class="line">  .reward-main</span><br><span class="line">    ul.reward-all</span><br><span class="line">-     each item in theme.reward.QR_code</span><br><span class="line">-       - var clickTo = item.link ? item.link : item.img</span><br><span class="line">-       li.reward-item</span><br><span class="line">-         a(href=url_for(clickTo) target=&#x27;_blank&#x27;)</span><br><span class="line">-           img.post-qr-code-img(src=url_for(item.img) alt=item.text)</span><br><span class="line">-         .post-qr-code-desc=item.text</span><br><span class="line">+      span.reward-title 感谢你赐予我前进的力量</span><br><span class="line">+      ul.reward-group</span><br><span class="line">+        each item in theme.reward.QR_code</span><br><span class="line">+          - var clickTo = item.link ? item.link : item.img</span><br><span class="line">+          li.reward-item</span><br><span class="line">+            a(href=url_for(clickTo) target=&#x27;_blank&#x27;)</span><br><span class="line">+              img.post-qr-code-img(src=url_for(item.img) alt=item.text)</span><br><span class="line">+            .post-qr-code-desc=item.text</span><br></pre></td></tr></table></figure><p>在自建的CSS文件 [blogRoot]&#x2F;source&#x2F;config&#x2F;css&#x2F;icat.css 里新增以下内容</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.tag_share</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">40px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.post-reward</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.tag_share</span> <span class="selector-class">.post_share</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.post-reward</span> <span class="selector-class">.reward-button</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-red);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-white);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">126px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">39px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--icat-shadow-red);</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.4s</span> ease <span class="number">0s</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">0.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.post-reward</span> <span class="selector-class">.reward-button</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#49b1f5</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--icat-shadow-blue);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.post-reward</span> <span class="selector-class">.reward-main</span> &#123;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1003</span>;</span><br><span class="line">    <span class="attribute">min-width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.post-reward</span> <span class="selector-class">.reward-main</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.post-reward</span> <span class="selector-class">.reward-main</span> <span class="selector-class">.reward-all</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-background);</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0.8rem</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--icat-shadow-border);</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.post-reward</span> <span class="selector-class">.reward-main</span> <span class="selector-class">.reward-all</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">right</span>: auto;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">14px</span> solid <span class="built_in">var</span>(--icat-background);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.reward-title</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-red);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.reward-group</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">0.5rem</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 打赏样式调整 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#post</span> <span class="selector-class">.tag_share</span> <span class="selector-class">.post-meta__tags</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-card-bg);</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">0.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-id">#post</span> <span class="selector-class">.tag_share</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: grid;</span><br><span class="line">        <span class="attribute">justify-items</span>: start;</span><br><span class="line">        <span class="attribute">align-items</span>: start;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-id">#post</span> <span class="selector-class">.tag_share</span> <span class="selector-class">.post-meta__tag-list</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">0.5rem</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-id">#post</span> <span class="selector-class">.tag_share</span> <span class="selector-class">.post-meta__tags</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">34px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.post-meta__tags</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;\e038&quot;</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;iconfont&quot;</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.4</span>;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 标签调整 */</span></span><br></pre></td></tr></table></figure><h1 id="评论区"><a href="#评论区" class="headerlink" title="评论区"></a>评论区</h1><p>新增 [blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;layout&#x2F;includes&#x2F;third-party&#x2F;comments&#x2F;index.pug 页面内容<br>（**+** 号直接删除 即是正常缩进）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- let defaultComment = theme.comments.use[0]</span><br><span class="line">hr</span><br><span class="line">#post-comment</span><br><span class="line">  .comment-head</span><br><span class="line">    .comment-headline</span><br><span class="line">      i.iconfont.icat-message.fa-fw</span><br><span class="line">      span= &#x27; &#x27; + _p(&#x27;comment&#x27;)</span><br><span class="line">+    .comment-privacy</span><br><span class="line">+      a(href=&quot;/privacy/&quot; data-pjax-state) 隐私政策</span><br><span class="line"></span><br><span class="line">    if theme.comments.use.length &gt; 1</span><br><span class="line">      #comment-switch</span><br><span class="line"></span><br><span class="line">    ···</span><br></pre></td></tr></table></figure><p>在自建的CSS文件 [blogRoot]&#x2F;source&#x2F;config&#x2F;css&#x2F;icat.css 里新增以下内容</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#post-comment</span> <span class="selector-class">.comment-head</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#post-comment</span> <span class="selector-class">.comment-privacy</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#post-comment</span> <span class="selector-class">.comment-privacy</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#409eff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#post-comment</span> <span class="selector-class">.comment-headline</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#post-comment</span> <span class="selector-class">.comment-headline</span> &gt; <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1em</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">blockquote</span> &gt; <span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: auto <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.el-input--small</span> <span class="selector-class">.el-input__inner</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.el-input-group__prepend</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.el-input__inner</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">8px</span> <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.el-textarea__inner</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.el-textarea</span> &gt; <span class="selector-tag">textarea</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">120px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.el-button--small</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 评论编辑块调整 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tk-submit-action-icon</span>.__markdown &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* markdown编辑快隐藏 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tk-avatar</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-comment</span> <span class="selector-class">.tk-submit</span> <span class="selector-class">.tk-avatar</span>, <span class="selector-class">.tk-replies</span> <span class="selector-class">.tk-avatar</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">2.5rem</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">2.5rem</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-comment</span> <span class="selector-class">.tk-submit</span> <span class="selector-class">.tk-avatar</span> <span class="selector-class">.tk-avatar-img</span>, <span class="selector-class">.tk-replies</span> <span class="selector-class">.tk-avatar</span> <span class="selector-class">.tk-avatar-img</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">2.5rem</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-ruser</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#409eff</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: .<span class="number">8</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.tk-comment</span> <span class="selector-class">.tk-submit</span> <span class="selector-class">.tk-avatar</span>, <span class="selector-class">.tk-replies</span> <span class="selector-class">.tk-avatar</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">2rem</span> <span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">2rem</span> <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.tk-comment</span> <span class="selector-class">.tk-submit</span> <span class="selector-class">.tk-avatar</span> <span class="selector-class">.tk-avatar-img</span>, <span class="selector-class">.tk-replies</span> <span class="selector-class">.tk-avatar</span> <span class="selector-class">.tk-avatar-img</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">2rem</span> <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-nick</span>,</span><br><span class="line"><span class="selector-class">.tk-meta</span> <span class="selector-tag">a</span> <span class="selector-tag">strong</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#409eff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-tag-green</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">0.2rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-time</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">0.4rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tk-extras</span> &#123;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> dashed <span class="built_in">var</span>(--hr-border);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-extra</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span> <span class="number">6px</span> <span class="number">4px</span> <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">4px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-expand</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--icat-background);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-footer</span> &#123;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">1em</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-footer</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#999999</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-footer</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#409eff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tk-admin-comment-item</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1em</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--global-bg);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always);</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-admin-comment-meta</span>,</span><br><span class="line"><span class="selector-class">.tk-content</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-admin-actions</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 评论管理 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tk-panel</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-admin-config-groups</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0.5em</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--global-bg);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-admin-config-groups</span> <span class="selector-class">.tk-admin-config-group-title</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-background) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tk-admin-config-item</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 配置管理 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 评论区样式 */</span></span><br></pre></td></tr></table></figure><h1 id="加载动画"><a href="#加载动画" class="headerlink" title="加载动画"></a>加载动画</h1><p><a href="https://blog.anheyu.com/posts/52d8.html">Heo同款loading动画 | 安知鱼 (anheyu.com)</a></p><p>修改 <code>themes/butterfly/layout/includes/loading/fullpage-loading.pug</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#loading-box(onclick=&#x27;document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)&#x27;)</span><br><span class="line">  .loading-bg</span><br><span class="line">    div.loading-img</span><br><span class="line">    .loading-image-dot</span><br><span class="line"></span><br><span class="line">script.</span><br><span class="line">  const preloader = &#123;</span><br><span class="line">    endLoading: () =&gt; &#123;</span><br><span class="line">      document.body.style.overflow = &#x27;auto&#x27;;</span><br><span class="line">      document.getElementById(&#x27;loading-box&#x27;).classList.add(&quot;loaded&quot;)</span><br><span class="line">    &#125;,</span><br><span class="line">    initLoading: () =&gt; &#123;</span><br><span class="line">      document.body.style.overflow = &#x27;&#x27;;</span><br><span class="line">      document.getElementById(&#x27;loading-box&#x27;).classList.remove(&quot;loaded&quot;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  window.addEventListener(&#x27;load&#x27;,()=&gt; &#123; preloader.endLoading() &#125;)</span><br><span class="line"></span><br><span class="line">  if (!&#123;theme.pjax &amp;&amp; theme.pjax.enable&#125;) &#123;</span><br><span class="line">    document.addEventListener(&#x27;pjax:send&#x27;, () =&gt; &#123; preloader.initLoading() &#125;)</span><br><span class="line">    document.addEventListener(&#x27;pjax:complete&#x27;, () =&gt; &#123; preloader.endLoading() &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>修改<code>themes/butterfly/layout/includes/loading/index.pug</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if theme.preloader.source === 1</span><br><span class="line">  include ./fullpage-loading.pug</span><br><span class="line">+else if theme.preloader.source === 2</span><br><span class="line">+ include ./pace.pug</span><br><span class="line">else</span><br><span class="line">+  include ./fullpage-loading.pug</span><br><span class="line">  include ./pace.pug</span><br></pre></td></tr></table></figure><p>新建<code>source/css/progress_bar.css</code>, 也可以不做这一步下面配置文件<code>pace_css_url</code>这一项就要留空, 这一步是修改 pace 加载的胶囊 💊 样式用的</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.pace</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">pointer-events</span>: none;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">    -webkit-user-<span class="selector-tag">select</span>: none;</span><br><span class="line">    -moz-user-<span class="selector-tag">select</span>: none;</span><br><span class="line">    user-<span class="selector-tag">select</span>: none;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2000</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">4rem</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#eaecf2</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#e3e8f7</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-class">.pace-inactive</span> <span class="selector-class">.pace-progress</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span> ease-in;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-class">.pace</span> <span class="selector-class">.pace-progress</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    -moz-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    -ms-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    -o-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    -moz-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    -ms-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    -o-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2000</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-<span class="number">45deg</span>, <span class="number">#ee7752</span>, <span class="number">#e73c7e</span>, <span class="number">#23a6d5</span>, <span class="number">#23d5ab</span>);</span><br><span class="line">    <span class="attribute">animation</span>: gradient <span class="number">1.5s</span> ease infinite;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">200%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-class">.pace</span><span class="selector-class">.pace-inactive</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">8px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">@keyframes</span> gradient &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">      <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">      <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">      <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>修改<code>themes/butterfly/source/css/_layout/loading.styl</code>, 注意其中颜色代码<code>--anzhiyu-card-bg</code>等需自行替换为自己的色值。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;preloader&#x27;</span>)</span><br><span class="line">  <span class="selector-class">.loading-bg</span></span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--anzhiyu-card-bg);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1001</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#loading-box</span></span><br><span class="line">    <span class="selector-class">.loading-img</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">      <span class="attribute">margin</span>: auto;</span><br><span class="line">      <span class="attribute">border</span>: <span class="number">4px</span> solid <span class="number">#f0f0f2</span>;</span><br><span class="line">      <span class="attribute">animation-duration</span>: .<span class="number">3s</span>;</span><br><span class="line">      <span class="attribute">animation-name</span>: loadingAction;</span><br><span class="line">      <span class="attribute">animation-iteration-count</span>: infinite;</span><br><span class="line">      <span class="attribute">animation-direction</span>: alternate;</span><br><span class="line">    <span class="selector-class">.loading-image-dot</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">      <span class="attribute">background</span>: <span class="number">#6bdf8f</span>;</span><br><span class="line">      <span class="attribute">position</span>: absolute;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">      <span class="attribute">border</span>: <span class="number">6px</span> solid <span class="number">#fff</span>;</span><br><span class="line">      <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">      <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">18px</span>, <span class="number">24px</span>);</span><br><span class="line">    &amp;<span class="selector-class">.loaded</span></span><br><span class="line">      <span class="selector-class">.loading-bg</span></span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">z-index</span>: -<span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@keyframes</span> loadingAction</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: .<span class="number">4</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>新建<code>source/css/loading_avatar.css, 其中 </code>background<code>的</code>url 即为 loading 的图片地址&#96;。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.loading-img</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">https://npm.elemecdn.com/anzhiyu-blog@2.1.1/img/avatar.webp</span>) no-repeat center center;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后修改<code>_config.butterfly.yml</code>中<code>preloader</code>选项, 改完以后<code>source: 1</code>为满屏加载无<code>pace胶囊</code>,<code>source: 2</code>为<code>pace胶囊</code>无满屏动画, <code>source: 3</code>是两者都启用。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Loading Animation (加載動畫)</span></span><br><span class="line"><span class="attr">preloader:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># source</span></span><br><span class="line">  <span class="comment"># 1. fullpage-loading</span></span><br><span class="line">  <span class="comment"># 2. pace (progress bar)</span></span><br><span class="line">  <span class="attr">source:</span> <span class="number">3</span></span><br><span class="line">  <span class="comment"># pace theme (see https://codebyzach.github.io/pace/)</span></span><br><span class="line">  <span class="attr">pace_css_url:</span> <span class="string">/css/progress_bar.css</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">/css/loading_avatar.css</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 空间站建设日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>空间站搭建过程记录（一）</title>
      <link href="/posts/6a959ec6.html"/>
      <url>/posts/6a959ec6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>记录一下哪里的代码有变动，方便之后出错了可以及时回退</p><blockquote><p>2024.4.24</p></blockquote><h2 id="在博客中上传图片"><a href="#在博客中上传图片" class="headerlink" title="在博客中上传图片"></a><strong>在博客中上传图片</strong></h2><a href="/posts/5b054cb4.html" title="上传带图片的文章">上传带图片的文章</a><blockquote><p>2024.4.25</p></blockquote><h2 id="网站副标题，导航菜单设置，新建导航页面，基础信息，友链，图片设置，文章相关设置，侧边栏和右下角悬浮框设置"><a href="#网站副标题，导航菜单设置，新建导航页面，基础信息，友链，图片设置，文章相关设置，侧边栏和右下角悬浮框设置" class="headerlink" title="网站副标题，导航菜单设置，新建导航页面，基础信息，友链，图片设置，文章相关设置，侧边栏和右下角悬浮框设置"></a><strong>网站副标题，导航菜单设置，新建导航页面，基础信息，友链，图片设置，文章相关设置，侧边栏和右下角悬浮框设置</strong></h2><p>参考blog：<a href="https://blog.aqcoder.cn/posts/447d/">Butterfly 博客主题搭建系列：基础教程 | 枫叶 (aqcoder.cn)</a></p><p>图片懒加载不知道为什么一开右下角悬浮框和我的头像都不见了。统计字数功能也是一开就报错。以后再看看。</p><p>破案了，因为没有下载统计字数插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-wordcount --save</span><br></pre></td></tr></table></figure><h2 id="algolia搜索系统"><a href="#algolia搜索系统" class="headerlink" title="algolia搜索系统"></a><strong>algolia搜索系统</strong></h2><p>参考blog：<a href="https://zhuanlan.zhihu.com/p/645394591">Hexo + Butterfly 搜索功能 - 知乎 (zhihu.com)</a></p><p><a href="https://blog.zoutl.cn/479">Hexo 的 Butterfly 主题使用 Algolia 搜索 | LeDao’s Blog (zoutl.cn)</a></p><p>_config.yml添加</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># algolia搜索系统</span></span><br><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo-algoliasearch</span></span><br><span class="line"></span><br><span class="line"><span class="attr">algolia:</span></span><br><span class="line">  <span class="attr">appId:</span> <span class="string">&quot;JRE61XFC0S&quot;</span></span><br><span class="line">  <span class="attr">apiKey:</span> <span class="string">&quot;24177c4b3cb2d84f656e0c1a2bfb09a3&quot;</span></span><br><span class="line">  <span class="attr">adminApiKey:</span> <span class="string">&quot;1008d59af4dfeaf42913cfe5438ea062&quot;</span></span><br><span class="line">  <span class="attr">chunkSize:</span> <span class="number">5000</span></span><br><span class="line">  <span class="attr">indexName:</span> <span class="string">&quot;HEXO&quot;</span></span><br><span class="line">  <span class="attr">fields:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">content:strip:truncate,0,200</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">excerpt:strip</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">permalink</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photos</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tags</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">title</span></span><br></pre></td></tr></table></figure><p>_config.butterfly.yml修改</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Algolia search</span></span><br><span class="line"><span class="attr">algolia_search:</span></span><br><span class="line"><span class="bullet">-</span>  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line"><span class="string">+</span>  <span class="attr">enable:</span> <span class="string">ture</span></span><br><span class="line">  <span class="attr">hits:</span></span><br><span class="line">    <span class="attr">per_page:</span> <span class="number">6</span></span><br></pre></td></tr></table></figure><p><code>\\themes\\butterfly\\source\\js\\search</code> 目录下algolia.js修改</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> searchBox = instantsearch.<span class="property">widgets</span>.<span class="title function_">searchBox</span>(&#123;</span><br><span class="line">    <span class="attr">container</span>: <span class="string">&#x27;#algolia-search-input&#x27;</span>,</span><br><span class="line">    <span class="attr">showReset</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">showSubmit</span>: <span class="literal">false</span>,</span><br><span class="line">  + <span class="attr">searchOnEnterKeyPressOnly</span>: <span class="literal">true</span>,</span><br><span class="line">  - <span class="attr">placeholder</span>: <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">algolia</span>.<span class="property">languages</span>.<span class="property">input_placeholder</span>,</span><br><span class="line">  + <span class="attr">placeholder</span>: <span class="string">&quot;输入关键词后，按下回车键即可搜索文章...&quot;</span>,</span><br><span class="line">    <span class="attr">showLoadingIndicator</span>: <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><p>执行命令的顺序如下：（不然可能会出现一些错误）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#生成静态文件</span></span><br><span class="line">hexo g</span><br><span class="line"></span><br><span class="line"><span class="comment">#生成algolia的搜索索引</span></span><br><span class="line">hexo algolia</span><br><span class="line"></span><br><span class="line"><span class="comment">#提交到GitHub</span></span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><h2 id="Hexo-博客生成永久链接"><a href="#Hexo-博客生成永久链接" class="headerlink" title="Hexo 博客生成永久链接"></a><strong>Hexo 博客生成永久链接</strong></h2><p><a href="https://www.imbhj.com/posts/b6a99401/">Hexo 博客生成永久链接 | Ordis’Blog (imbhj.com)</a></p><ol><li>修改hexo文件夹中的_config.yml文件，如下：</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br><span class="line"><span class="string">+</span> <span class="comment">## abbrlink config</span></span><br><span class="line"><span class="string">+</span> <span class="attr">abbrlink:</span></span><br><span class="line"><span class="string">+</span>   <span class="attr">alg:</span> <span class="string">crc32</span>      <span class="comment">#support crc16(default) and crc32 进制</span></span><br><span class="line"><span class="string">+</span>   <span class="attr">rep:</span> <span class="string">hex</span>        <span class="comment">#support dec(default) and hex  算法</span></span><br><span class="line"><span class="string">+</span>   <span class="attr">drafts:</span> <span class="literal">false</span>   <span class="comment">#(true)Process draft,(false)Do not process draft. false(default) </span></span><br><span class="line"><span class="string">+</span>   <span class="comment">## Generate categories from directory-tree</span></span><br><span class="line"><span class="string">+</span>   <span class="comment">## depth: the max_depth of directory-tree you want to generate, should &gt; 0</span></span><br><span class="line"><span class="string">+</span>   <span class="attr">auto_category:</span></span><br><span class="line"><span class="string">+</span>      <span class="attr">enable:</span> <span class="literal">true</span>  <span class="comment">#true(default)</span></span><br><span class="line"><span class="string">+</span>      <span class="attr">depth:</span>        <span class="comment">#3(default)</span></span><br><span class="line"><span class="string">+</span>      <span class="attr">over_write:</span> <span class="literal">false</span> </span><br><span class="line"><span class="string">+</span>   <span class="attr">auto_title:</span> <span class="literal">false</span> <span class="comment">#enable auto title, it can auto fill the title by path</span></span><br><span class="line"><span class="string">+</span>   <span class="attr">auto_date:</span> <span class="literal">false</span> <span class="comment">#enable auto date, it can auto fill the date by time today</span></span><br><span class="line"><span class="string">+</span>   <span class="attr">force:</span> <span class="literal">false</span> <span class="comment">#enable force mode,in this mode, the plugin will ignore the cache, and calc the abbrlink for every post even it already had abbrlink.</span></span><br></pre></td></tr></table></figure><blockquote><p>2024.4.26</p></blockquote><h2 id="导航栏魔改"><a href="#导航栏魔改" class="headerlink" title="导航栏魔改"></a>导航栏魔改</h2><p>参考blog：<a href="https://blog.aqcoder.cn/posts/b20a/#%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89-css-1">Butterfly博客主题搭建系列：美化魔改教程 | 枫叶 (aqcoder.cn)</a></p><h3 id="分离菜单栏和搜索栏"><a href="#分离菜单栏和搜索栏" class="headerlink" title="分离菜单栏和搜索栏"></a>分离菜单栏和搜索栏</h3><p>修改 [blogRoot]\themes\Butterfly\layout\includes\header\nav.pug：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">nav#nav</span><br><span class="line">  span#blog_name</span><br><span class="line">    a#site-name(href=url_for(&#x27;/&#x27;)) #[=config.title]</span><br><span class="line">    </span><br><span class="line">  #menus</span><br><span class="line">-    if (theme.algolia_search.enable || theme.local_search.enable)</span><br><span class="line">-      #search-button</span><br><span class="line">-        a.site-page.social-icon.search</span><br><span class="line">-          i.fas.fa-search.fa-fw</span><br><span class="line">-          span=&#x27; &#x27;+_p(&#x27;search.title&#x27;)</span><br><span class="line">  !=partial(&#x27;includes/header/menu_item&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">  #nav-right</span><br><span class="line">+    if (theme.algolia_search.enable || theme.local_search.enable)</span><br><span class="line">+      #search-button</span><br><span class="line">+        a.site-page.social-icon.search</span><br><span class="line">+          i.fas.fa-search.fa-fw</span><br><span class="line">-    #toggle-menu</span><br><span class="line">-      a.site-page</span><br><span class="line">-        i.fas.fa-bars.fa-fw</span><br><span class="line">+      #toggle-menu</span><br><span class="line">+        a.site-page</span><br><span class="line">+          i.fas.fa-bars.fa-fw</span><br></pre></td></tr></table></figure><h3 id="导航栏居中，去掉导航栏底下蓝色长条，子菜单横向布局，网站标题部分增强版，顶栏常驻"><a href="#导航栏居中，去掉导航栏底下蓝色长条，子菜单横向布局，网站标题部分增强版，顶栏常驻" class="headerlink" title="导航栏居中，去掉导航栏底下蓝色长条，子菜单横向布局，网站标题部分增强版，顶栏常驻"></a>导航栏居中，去掉导航栏底下蓝色长条，子菜单横向布局，网站标题部分增强版，顶栏常驻</h3><p>在 [blogRoot]\source\config\css中新建自定义headmenu.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 导航栏居中 */</span></span><br><span class="line"><span class="selector-id">#nav-right</span>&#123;</span><br><span class="line">    <span class="attribute">flex</span>:<span class="number">1</span> <span class="number">1</span> auto;</span><br><span class="line">    <span class="attribute">justify-content</span>: flex-end;</span><br><span class="line">    <span class="attribute">margin-left</span>: auto;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-wrap</span>:nowrap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 去掉导航栏项目底下的蓝色长条 */</span></span><br><span class="line"><span class="selector-id">#nav</span> *<span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: transparent<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 子菜单横向布局 */</span></span><br><span class="line"><span class="selector-class">.menus_item_child</span> <span class="selector-tag">li</span><span class="selector-pseudo">:not</span>(<span class="selector-id">#sidebar-menus</span> <span class="selector-tag">li</span>)&#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">    -webkit-<span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">    -moz-<span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">    -ms-<span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">    -o-<span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.menus_item_child</span><span class="selector-pseudo">:not</span>(<span class="selector-id">#sidebar-menus</span> <span class="selector-tag">ul</span>)&#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">    left:calc(-150%)!important;这是估算值，为了保持元素居中的，如果不合适可以自己调</span></span><br><span class="line"><span class="comment">  在网友的建议下，改为：*/</span></span><br><span class="line">  <span class="attribute">left</span>:<span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">translate</span>:-<span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 网站标题部分的增强版 */</span></span><br><span class="line"><span class="selector-id">#site-name</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--lyx-theme)<span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    -webkit-<span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    -moz-<span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    -ms-<span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    -o-<span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    -moz-<span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    -ms-<span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    -o-<span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    <span class="attribute">position</span>:absolute;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">0</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">right</span>:<span class="number">0</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;\\f015&quot;</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">var</span>(--lyx-theme);</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;Font Awesome 6 Free&quot;</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>:white;</span><br><span class="line">    <span class="attribute">line-height</span>:<span class="number">34px</span>;<span class="comment">/*如果有溢出或者垂直不居中的现象微调一下这个参数*/</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;<span class="comment">/*根据个人喜好*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#site-name</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">scale</span>:<span class="number">1.03</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#site-name</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">24px</span>; <span class="comment">/*一定要把字体调大点，否则效果惨不忍睹！*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">:root</span>&#123;</span><br><span class="line">    <span class="attr">--lyx-theme</span>:<span class="number">#3a5779</span> <span class="comment">/*我的主题色*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 顶栏常驻*/</span></span><br><span class="line"><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span>&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>)<span class="meta">!important</span>;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>)<span class="meta">!important</span>;</span><br><span class="line">    -moz-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>)<span class="meta">!important</span>;</span><br><span class="line">    -ms-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>)<span class="meta">!important</span>;</span><br><span class="line">    -o-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">58px</span>)<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#nav</span>&#123;</span><br><span class="line">    <span class="attribute">transition</span>: none<span class="meta">!important</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: none<span class="meta">!important</span>;</span><br><span class="line">    -moz-<span class="attribute">transition</span>: none<span class="meta">!important</span>;</span><br><span class="line">    -ms-<span class="attribute">transition</span>: none<span class="meta">!important</span>;</span><br><span class="line">    -o-<span class="attribute">transition</span>: none<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后修改_config.buttergly.yml（一定要是&#x2F;xxx&#x2F;xxxx.css的形式，如果漏了最前面那个&#x2F;就会只有主页适应了修改，其他页面的导航栏还是跟以前一样）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/config/css/headmenu.css&quot;&gt;</span></span><br><span class="line">    <span class="comment"># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="comment"># - &lt;script src=&quot;xxxx&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><h3 id="显示标题-回到顶部"><a href="#显示标题-回到顶部" class="headerlink" title="显示标题&amp;回到顶部"></a>显示标题&amp;回到顶部</h3><p>修改 [blogRoot]\themes\Butterfly\layout\includes\header\nav.pug：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  #menus</span><br><span class="line">  !=partial(&#x27;includes/header/menu_item&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">+  center(id=&quot;name-container&quot;)</span><br><span class="line">+    a(id=&quot;page-name&quot; href=&quot;javascript:scrollToTop()&quot;) PAGE_NAME</span><br></pre></td></tr></table></figure><p>新建nav.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//js有一个小问题：就是只要鼠标滚动不论哪里都会响应，即便你滚动的是子元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2022.9.11 已修复，需要jq，请自行引入</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name-container&quot;</span>).<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;display:none&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> position = $(<span class="variable language_">window</span>).<span class="title function_">scrollTop</span>();</span><br><span class="line"></span><br><span class="line">$(<span class="variable language_">window</span>).<span class="title function_">scroll</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> scroll = $(<span class="variable language_">window</span>).<span class="title function_">scrollTop</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (scroll &gt; position) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name-container&quot;</span>).<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;menus_items&quot;</span>)[<span class="number">1</span>].<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;display:none!important&quot;</span>);</span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;menus_items&quot;</span>)[<span class="number">1</span>].<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name-container&quot;</span>).<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;display:none&quot;</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  position = scroll;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">scrollToTop</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;menus_items&quot;</span>)[<span class="number">1</span>].<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name-container&quot;</span>).<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>,<span class="string">&quot;display:none&quot;</span>);</span><br><span class="line">    btf.<span class="title function_">scrollToDest</span>(<span class="number">0</span>, <span class="number">500</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//修复没有弄右键菜单的童鞋无法回顶部的问题</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;page-name&quot;</span>).<span class="property">innerText</span> = <span class="variable language_">document</span>.<span class="property">title</span>.<span class="title function_">split</span>(<span class="string">&quot; | 23号空间站&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="comment">/*这里是去掉你的网站全局名称的设置，如果你不需要去掉，你可以写成：</span></span><br><span class="line"><span class="comment">document.getElementById(&quot;page-name&quot;).innerText=document.title</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">或者把你的网站的分隔符和全局网站名称加上去*/</span></span><br></pre></td></tr></table></figure><p>在headmenu.css中添加</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">2022.10.4更新：</span></span><br><span class="line"><span class="comment">根据我发现的没有自适应，间距不合理问题进行调整，如果用了这个的朋友们建议改一改</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-id">#page-name</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">color</span>:white<span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">content</span>:<span class="string">&#x27;回到顶部&#x27;</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--lyx-theme);</span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -moz-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -ms-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -o-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="built_in">var</span>(--lyx-theme);</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">45px</span>; <span class="comment">/*如果垂直位置不居中可以微调此值，也可以删了*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page-name</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">900px</span>)&#123;</span><br><span class="line">    <span class="selector-id">#page-name</span>,<span class="selector-id">#menus</span>&#123;</span><br><span class="line">      <span class="attribute">display</span>:none<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#name-container</span>&#123;</span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -moz-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -ms-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -o-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#name-container</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">scale</span>:<span class="number">1.03</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page-name</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding</span>:<span class="number">10px</span> <span class="number">30px</span><span class="comment">/*如果文字间隔不合理可以微调修改，第二个是水平方向的padding，第一个是垂直的*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#nav</span>&#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>下载jquery</p><p><a href="https://jquery.com/">jQuery</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install jquery --save</span><br></pre></td></tr></table></figure><p>新建jquery.min.js，并引入jquery.min.js和nav.js</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/config/css/headmenu.css&quot;&gt;</span></span><br><span class="line">    <span class="comment"># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/config/js/jquery.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/config/js/nav.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="comment"># - &lt;script src=&quot;xxxx&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>2024.5.16</p></blockquote><h1 id="A星碎碎念页面"><a href="#A星碎碎念页面" class="headerlink" title="A星碎碎念页面"></a>A星碎碎念页面</h1><h2 id="魔改页前置"><a href="#魔改页前置" class="headerlink" title="魔改页前置"></a>魔改页前置</h2><p><a href="https://meuicat.com/blog/36/">重构记录 - 2 | 爱吃肉的猫 (meuicat.com)</a></p><p>创建 [blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;layout&#x2F;includes&#x2F;page&#x2F;icat_change.pug 文件，并新增以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- var pageBackground = &#x27;background: url(&#x27; + page.top_bg + &#x27;) left 28% / cover no-repeat;&#x27;</span><br><span class="line"></span><br><span class="line">#icat_page</span><br><span class="line">  .icat-content.icat-content-item.icatPage.single(style=pageBackground)</span><br><span class="line">    .icat-card-content</span><br><span class="line">      .icat-content-item-tips= page.top_item || _p(&#x27;HALLO EARTH！&#x27;)</span><br><span class="line">      span.icat-content-item-title= page.top_title || page.title || _p(&#x27;23号空间站&#x27;)</span><br><span class="line">      .icat-content-bottom</span><br><span class="line">        .icat-tips= page.top_tips || page.description || _p(&#x27;像阳光和风 璀璨 自由&#x27;)</span><br><span class="line">    - if (typeof page.top_link !== &#x27;undefined&#x27; &amp;&amp; page.top_link &amp;&amp; page.top_link.trim().length &gt; 0)</span><br><span class="line">          if (page.top_link.startsWith(&#x27;/&#x27;))</span><br><span class="line">            - var pageLink = &#x27;&#x27; + page.top_link + &#x27;&#x27;</span><br><span class="line">          else if (!page.top_link.startsWith(&#x27;http&#x27;) &amp;&amp; !page.top_link.startsWith(&#x27;https&#x27;))</span><br><span class="line">            - var pageLink = &#x27;https://&#x27; + page.top_link + &#x27;&#x27;</span><br><span class="line">          else</span><br><span class="line">            - var pageLink = &#x27;&#x27; + page.top_link + &#x27;&#x27;</span><br><span class="line">          .icat-change-button-group</span><br><span class="line">            a.icat-change-button(href=pageLink)</span><br><span class="line">              i.iconfont.icat-go-right(style=&#x27;font-size: .9rem&#x27;)</span><br><span class="line">              span.icat-change-button-text= page.top_text || _p(&#x27;关于本页&#x27;)</span><br></pre></td></tr></table></figure><p>修改 [blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;layout&#x2F;page.pug 页面里的内容<br>（ + 号直接删除 即是正常缩进）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">extends includes/layout.pug</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">  #page</span><br><span class="line">-   if top_img === false</span><br><span class="line">-     h1.page-title= page.title</span><br><span class="line">+    if page.top_page &amp;&amp; page.top_page === true</span><br><span class="line">+      include includes/page/icat_change.pug</span><br><span class="line">+    else</span><br><span class="line">+      if top_img === false</span><br><span class="line">+        h1.page-title= page.title</span><br><span class="line"></span><br><span class="line">    case page.type</span><br><span class="line">      when &#x27;tags&#x27;</span><br></pre></td></tr></table></figure><p>在自建的CSS文件 [blogRoot]&#x2F;source&#x2F;config&#x2F;css&#x2F;icat.css 里新增以下内容</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#page</span><span class="selector-pseudo">:has</span>(<span class="selector-id">#icat_page</span>) &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: none <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#web_bg</span> ~ <span class="selector-class">.page</span><span class="selector-pseudo">:has</span>(<span class="selector-id">#icat_page</span>) &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--card-bg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* page背景调整 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icat-content</span><span class="selector-class">.icat-content-item</span><span class="selector-class">.icatPage</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">19rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-white);</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--icat-shadow-border);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icat-content-item</span> <span class="selector-class">.icat-card-content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1rem</span> <span class="number">2rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icat-content-item</span> <span class="selector-class">.icat-content-item-tips</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: .<span class="number">8</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: .<span class="number">6rem</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: .<span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icat-content-item</span> <span class="selector-class">.icat-card-content</span> <span class="selector-class">.icat-content-item-title</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: .<span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icat-content-item</span> <span class="selector-class">.icat-content-item-title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icat-content-item</span> <span class="selector-class">.icat-content-bottom</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: auto;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icat-content-item</span> <span class="selector-class">.icat-content-bottom</span> <span class="selector-class">.icat-tips</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  -o-<span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icat-content-item</span> <span class="selector-class">.icat-card-content</span> <span class="selector-class">.icat-change-button-group</span> <span class="selector-class">.icat-change-button</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">width</span>: auto;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">22px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-white);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-black);</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">saturate</span>(<span class="number">180%</span>) <span class="built_in">blur</span>(<span class="number">20px</span>);</span><br><span class="line">  -webkit-backdrop-<span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">20px</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> -<span class="number">4px</span> <span class="built_in">var</span>(--icat-black-op);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icat-content-item</span> <span class="selector-class">.icat-card-content</span> <span class="selector-class">.icat-change-button-group</span> <span class="selector-class">.icat-change-button</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page</span><span class="selector-pseudo">:has</span>(<span class="selector-id">#icat_page</span>) <span class="selector-class">.icat-content-item</span> <span class="selector-class">.icat-card-content</span> <span class="selector-class">.icat-change-button-group</span> <span class="selector-class">.icat-change-button</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-blue);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-white);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.icat-content-item</span> <span class="selector-class">.icat-card-content</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1rem</span> <span class="number">1rem</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.icat-content-item</span> <span class="selector-class">.icat-card-content</span> <span class="selector-class">.icat-change-button-group</span> <span class="selector-class">.icat-change-button</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.icat-content-item</span> <span class="selector-class">.icat-card-content</span> <span class="selector-class">.icat-change-button-group</span> <span class="selector-class">.icat-change-button</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">margin-right</span>: -<span class="number">3px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.icat-content-item</span> <span class="selector-class">.icat-card-content</span> <span class="selector-class">.icat-change-button-group</span> <span class="selector-class">.icat-change-button-text</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 响应式 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* icat-page顶部样式 */</span></span><br></pre></td></tr></table></figure><h2 id="A星"><a href="#A星" class="headerlink" title="A星"></a>A星</h2><p><a href="https://meuicat.com/blog/67/index.html">Butterfly的魔改教程：即刻短文页 | 爱吃肉的猫 (meuicat.com)</a></p><p>创建 [blogRoot]&#x2F;source&#x2F;essay&#x2F;index.md 页面，配置以下内容</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 即刻短文</span><br><span class="line">date: 2023-01-17 13:38:17</span><br><span class="line">type: essay</span><br><span class="line">top<span class="emphasis">_img: false</span></span><br><span class="line"><span class="emphasis">aside: false</span></span><br><span class="line"><span class="emphasis">top_</span>page: true</span><br><span class="line">top<span class="emphasis">_bg: /config/img/essayBackground.jpg</span></span><br><span class="line"><span class="emphasis">top_</span>item: 即刻短文</span><br><span class="line">top<span class="emphasis">_title: A星碎碎念</span></span><br><span class="line"><span class="emphasis">top_</span>tips: 活在当下</span><br><span class="line">top<span class="emphasis">_link: /about/</span></span><br><span class="line"><span class="emphasis">top_</span>text: 关于驾驶员</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">&lt;!-- 页面内容 --&gt;</span><br></pre></td></tr></table></figure><p>创建 [blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;layout&#x2F;includes&#x2F;page&#x2F;essay.pug 页面文件，并新增以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#icat-bber</span><br><span class="line">    section.icat-page</span><br><span class="line">        case theme.essay.mode</span><br><span class="line">            when &#x27;local&#x27;</span><br><span class="line">                include ./essay/local.pug</span><br><span class="line">            when &#x27;json&#x27;</span><br><span class="line">                include ./essay/json.pug</span><br><span class="line">            when &#x27;memos&#x27;</span><br><span class="line">                include ./essay/memos.pug</span><br></pre></td></tr></table></figure><p>创建 [blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;layout&#x2F;includes&#x2F;page&#x2F;essay&#x2F;local.pug 页面文件，并新增以下内容<br>（注意该页面中可能存在部分 fontawesome 图标 需要自行替换）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">mixin renderArticle(item)</span><br><span class="line">    .icat-bber-item</span><br><span class="line">        .icat-bber-content</span><br><span class="line">            if item.content</span><br><span class="line">                p.datacont=item.content</span><br><span class="line">            if item.image</span><br><span class="line">                .icat-bber-image</span><br><span class="line">                    each iten, indey in item.image</span><br><span class="line">                        .imgbox</span><br><span class="line">                            - let image = item.image[indey].split(&#x27;||&#x27;)</span><br><span class="line">                            img(src=image[0] alt=image[1] ? image[1] : &#x27;&#x27; title=image[1] ? &#x27;&#x27; : &#x27;即刻短文配图&#x27; )</span><br><span class="line">            if item.video</span><br><span class="line">                .icat-bber-video</span><br><span class="line">                    if item.video.bilibili</span><br><span class="line">                        - let autoplay = item.video.autoplay ? &#x27;&amp;autoplay=1&#x27; : &#x27;&amp;autoplay=0&#x27;</span><br><span class="line">                        - let biliurl = &#x27;//player.bilibili.com/player.html?bvid=&#x27; + item.video.bilibili.match(/(BV\w+)/)[1] + autoplay</span><br><span class="line">                        iframe(src=biliurl scrolling=&quot;no&quot; border=&quot;0&quot; frameborder=&quot;no&quot; framespacing=&quot;0&quot; allowfullscreen=&quot;true&quot;)</span><br><span class="line">                    else if item.video.player</span><br><span class="line">                        video(src=item.video.player controls=&quot;controls&quot; style=&quot;object-fit: cover;&quot;)</span><br><span class="line">            if item.aplayer</span><br><span class="line">                .icat-bber-music</span><br><span class="line">                    meting-js(id=item.aplayer.id server=item.aplayer.server type=&quot;song&quot; preload=&quot;none&quot; autoplay=&quot;false&quot; mutex=&quot;true&quot; theme=&#x27;var(--icat-blue)&#x27;)</span><br><span class="line">        hr</span><br><span class="line">        .icat-bber-bottom</span><br><span class="line">            .icat-bber-info</span><br><span class="line">                .icat-bber-info-time</span><br><span class="line">                    i.iconfont.icat-time-fill</span><br><span class="line">                    time.datatime(datetime=item.date)= &#x27;Loading&#x27;</span><br><span class="line">                if item.from</span><br><span class="line">                    .icat-bber-info-from</span><br><span class="line">                        span=item.from</span><br><span class="line">                if item.link</span><br><span class="line">                    - let link = item.link.split(&#x27;||&#x27;)</span><br><span class="line">                    a.icat-bber-content-link(target=&quot;_blank&quot; href=link[0] title=link[1] ? link[1] : &#x27;跳转到短文指引的链接&#x27;)</span><br><span class="line">                        i.iconfont.icat-jump-link</span><br><span class="line">                        | 链接</span><br><span class="line">                if item.top</span><br><span class="line">                    .icat-bber-info-top</span><br><span class="line">                        i.iconfont.icat-thumbtack</span><br><span class="line">                        | 置顶</span><br><span class="line">            if item.content</span><br><span class="line">                .icat-bber-reply(onclick=&quot;commentText(&quot; + `&#x27;$&#123;item.content&#125;&#x27;` + &quot;)&quot;)</span><br><span class="line">                    i.iconfont.icat-message</span><br><span class="line"></span><br><span class="line">#waterfall.list</span><br><span class="line">    if theme.essay.strip === -1</span><br><span class="line">        - var limitedList = site.data.essay.essay_list</span><br><span class="line">    else</span><br><span class="line">        - var limitedList = site.data.essay.essay_list.slice(0, theme.essay.strip)</span><br><span class="line"></span><br><span class="line">    - var topArticles = site.data.essay.essay_list.filter(item =&gt; item.top === true)</span><br><span class="line">    each item in topArticles</span><br><span class="line">        +renderArticle(item)</span><br><span class="line"></span><br><span class="line">    each item in limitedList.filter(item =&gt; !item.top)</span><br><span class="line">        +renderArticle(item)</span><br><span class="line"></span><br><span class="line">#icat-bber-tips</span><br><span class="line">    if theme.essay.strip === -1 || Math.abs(theme.essay.strip) &gt;= site.data.essay.essay_list.length</span><br><span class="line">        | - 已展开所有短文 -</span><br><span class="line">    else</span><br><span class="line">        | - 只展示最近 #&#123;theme.essay.strip&#125; 条短文 -</span><br></pre></td></tr></table></figure><p>创建 [blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;layout&#x2F;includes&#x2F;page&#x2F;essay&#x2F;json.pug 页面文件，并新增以下内容<br>（注意该页面中可能存在部分 fontawesome 图标 需要自行替换）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">#waterfall.list</span><br><span class="line">    .icat-bber-loading</span><br><span class="line">        img(src=&quot;https://yife68.gitee.io/icat-pic/blog/loading.svg&quot;)</span><br><span class="line">    script.</span><br><span class="line">        (async function () &#123;</span><br><span class="line">            const response = await fetch(&#x27;!&#123;url_for(theme.essay.mode_link)&#125;&#x27;);</span><br><span class="line">            const data = await response.json();</span><br><span class="line">            const strip = !&#123;theme.essay.strip&#125;;</span><br><span class="line">            let items = [],</span><br><span class="line">                topitem = [],</span><br><span class="line">                essayTips = &#x27;&#x27;;</span><br><span class="line"></span><br><span class="line">            const processedData = await Promise.all(data[0].essay_list.map(async (item) =&gt; &#123;</span><br><span class="line">                const formatdata = await essayFormat(item);</span><br><span class="line">                if (!formatdata) return null;</span><br><span class="line">                if (item.top) &#123;</span><br><span class="line">                    topitem.push(formatdata);</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    items.push(formatdata);</span><br><span class="line">                &#125;</span><br><span class="line">                return formatdata;</span><br><span class="line">            &#125;));</span><br><span class="line"></span><br><span class="line">            essayTips = strip === -1 || strip &gt;= items.length ? `&lt;div id=&quot;icat-bber-tips&quot;&gt;- 已展开所有短文 -&lt;/div&gt;` : (items = items.slice(0, strip), `&lt;div id=&quot;icat-bber-tips&quot;&gt;- 只展示最近 $&#123;strip&#125; 条短文 -&lt;/div&gt;`);</span><br><span class="line"></span><br><span class="line">            document.getElementsByClassName(&#x27;list&#x27;)[0].innerHTML = topitem.concat(items).filter(item =&gt; item !== null).join(&#x27;&#x27;);</span><br><span class="line">            document.querySelector(&quot;.icat-page&quot;).insertAdjacentHTML(&quot;beforeend&quot;, essayTips);</span><br><span class="line">        &#125;)();</span><br><span class="line">        async function essayFormat(item) &#123;</span><br><span class="line">            let image = &#x27;&#x27;,</span><br><span class="line">                video = &#x27;&#x27;,</span><br><span class="line">                type = &#x27;&#x27;;</span><br><span class="line"></span><br><span class="line">            if (item.image) item.image.map(e =&gt; image += `&lt;div class=&quot;imgbox&quot;&gt;&lt;img src=&quot;$&#123;e.split(&#x27; || &#x27;)[0]&#125;&quot; $&#123;e.split(&#x27; || &#x27;).length &gt; 1 ? `alt=&#x27;$&#123;e.split(&#x27; || &#x27;)[1]&#125;&#x27;` : `title=&quot;即刻短文配图&quot;`&#125; /&gt;&lt;/div&gt;`).join(&#x27;&#x27;);</span><br><span class="line">            let aplayer = item.aplayer ? `&lt;div class=&quot;icat-bber-music&quot;&gt;&lt;meting-js server=&quot;$&#123;item.aplayer.server&#125;&quot; type=&quot;song&quot; id=&quot;$&#123;item.aplayer.id&#125;&quot; mutex=&quot;true&quot; preload=&quot;none&quot; theme=&quot;var(--icat-blue)&quot; data-lrctype=&quot;0&quot;&gt;&lt;/meting-js&gt;&lt;/div&gt;` : &#x27;&#x27;;</span><br><span class="line">            if (item.video) video = item.video.player ? `&lt;div class=&quot;icat-bber-video&quot;&gt;&lt;video src=&quot;$&#123;item.video.player&#125;&quot; controls=&quot;controls&quot; style=&quot;object-fit: cover;&quot;&gt;&lt;/video&gt;&lt;/div&gt;` : item.video.bilibili ? `&lt;div class=&quot;icat-bber-video&quot;&gt;&lt;iframe src=&quot;//player.bilibili.com/player.html?bvid=$&#123;item.video.bilibili.match(/(BV\w+)/)[1]&#125;$&#123;item.video.autoplay ? &#x27;&amp;autoplay=1&#x27; : &#x27;&amp;autoplay=0&#x27;&#125;&quot; scrolling=&quot;no&quot; border=&quot;0&quot; frameborder=&quot;no&quot; framespacing=&quot;0&quot; allowfullscreen=&quot;true&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;` : &#x27;&#x27;;</span><br><span class="line">            let link = item.link ? ((type = item.link.split(&#x27; || &#x27;)), `&lt;a class=&quot;icat-bber-content-link&quot; href=&#x27;$&#123;type[0].startsWith(&#x27;/&#x27;) ? type[0] : (type[0].startsWith(&#x27;http&#x27;) ? type[0] : &#x27;https://&#x27; + type[0])&#125;&#x27; title=&quot;$&#123;type.length &gt; 1 ? type[1] : &#x27;跳转到短文指引的链接&#x27; &#125;&quot; target=&quot;_blank&quot;&gt;&lt;i class=&quot;iconfont icat-jump-link&quot;&gt;&lt;/i&gt;链接&lt;/a&gt;`) : &#x27;&#x27;;</span><br><span class="line">            </span><br><span class="line">            return `</span><br><span class="line">                &lt;div class=&quot;icat-bber-item&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;icat-bber-content&quot;&gt;</span><br><span class="line">                        $&#123;item.content ? `&lt;p class=&quot;datacont&quot;&gt;$&#123;item.content&#125;&lt;/p&gt;` : &#x27;&#x27;&#125;</span><br><span class="line">                        $&#123;image ? `&lt;div class=&quot;icat-bber-image&quot;&gt;$&#123;image&#125;&lt;/div&gt;` : &#x27;&#x27;&#125;</span><br><span class="line">                        $&#123;aplayer&#125;</span><br><span class="line">                        $&#123;video&#125;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;hr&gt;</span><br><span class="line">                    &lt;div class=&quot;icat-bber-bottom&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;icat-bber-info&quot;&gt;</span><br><span class="line">                            &lt;div class=&quot;icat-bber-info-time&quot;&gt;</span><br><span class="line">                                &lt;i class=&quot;iconfont icat-time-fill&quot;&gt;&lt;/i&gt;</span><br><span class="line">                                &lt;time class=&quot;datatime&quot; datetime=&quot;$&#123;item.date&#125;&quot;&gt;&lt;/time&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                            $&#123;link&#125;</span><br><span class="line">                            $&#123;item.from ? `&lt;div class=&quot;icat-bber-info-from&quot;&gt;&lt;span&gt;$&#123;item.from&#125;&lt;/span&gt;&lt;/div&gt;` : &#x27;&#x27;&#125;</span><br><span class="line">                            $&#123;item.top ? `&lt;div class=&quot;icat-bber-info-top&quot;&gt;&lt;i class=&quot;iconfont icat-thumbtack&quot;&gt;&lt;/i&gt;置顶&lt;/div&gt;` : &#x27;&#x27;&#125;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        $&#123;item.content ? `&lt;div class=&quot;icat-bber-reply&quot; onclick=&quot;commentText(&#x27;$&#123;item.content&#125;&#x27;)&quot;&gt;&lt;i class=&quot;iconfont icat-message&quot;&gt;&lt;/i&gt;&lt;/div&gt;` : &#x27;&#x27;&#125;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;`;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>创建[blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;layout&#x2F;includes&#x2F;page&#x2F;essay&#x2F;memos.pug 页面文件，并新增以下内容：<br>（注意该页面中可能存在部分 fontawesome 图标 需要自行替换）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">#waterfall.list</span><br><span class="line">    .icat-bber-loading</span><br><span class="line">        img(src=&quot;https://yife68.gitee.io/icat-pic/blog/loading.svg&quot;)</span><br><span class="line">    script.</span><br><span class="line">        (async function () &#123;</span><br><span class="line">            let url = &#x27;!&#123;url_for(theme.essay.mode_link)&#125;&#x27;;</span><br><span class="line">            const baseUrl = url.substring(0, url.indexOf(&quot;/&quot;, url.indexOf(&quot;//&quot;) + 2));</span><br><span class="line">            const response = await fetch(url);</span><br><span class="line">            const data = await response.json();</span><br><span class="line">            const strip = !&#123;theme.essay.strip&#125;;</span><br><span class="line">            let items = [],</span><br><span class="line">                topitem = [],</span><br><span class="line">                essayTips = &#x27;&#x27;;</span><br><span class="line"></span><br><span class="line">            const processedData = await Promise.all(data.map(async (item) =&gt; &#123;</span><br><span class="line">                const formatdata = await essayFormat(item,baseUrl);</span><br><span class="line">                if (!formatdata) return null;</span><br><span class="line">                if (item.content.includes(&#x27;#top&#x27;)) &#123;</span><br><span class="line">                    topitem.push(formatdata);</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    items.push(formatdata);</span><br><span class="line">                &#125;</span><br><span class="line">                return formatdata;</span><br><span class="line">            &#125;));</span><br><span class="line"></span><br><span class="line">            essayTips = strip === -1 || strip &gt;= items.length ? `&lt;div id=&quot;icat-bber-tips&quot;&gt;- 已展开所有短文 -&lt;/div&gt;` : (items = items.slice(0, strip), `&lt;div id=&quot;icat-bber-tips&quot;&gt;- 只展示最近 $&#123;strip&#125; 条短文 -&lt;/div&gt;`);</span><br><span class="line"></span><br><span class="line">            document.getElementsByClassName(&#x27;list&#x27;)[0].innerHTML = topitem.concat(items).filter(item =&gt; item !== null).join(&#x27;&#x27;);</span><br><span class="line">            document.querySelector(&quot;.icat-page&quot;).insertAdjacentHTML(&quot;beforeend&quot;, essayTips);</span><br><span class="line">        &#125;)();</span><br><span class="line">        async function essayFormat(item,baseUrl) &#123;</span><br><span class="line">            const contentRegex = /#(.*?)\s|\n/g,</span><br><span class="line">                imageRegex = /\!\[(.*?)\]\((.*?)\)/g,</span><br><span class="line">                playerRegex = /&#123;\s*player\s*(.*)\s*&#125;/g,</span><br><span class="line">                linkRegex = /(?&lt;!\!)\[(.*?)\]\((.*?)\)/g,</span><br><span class="line">                topRegex = /#top/g,</span><br><span class="line">                fromRegex = /(?&lt;![\w\/])(?&lt;!\&#123;)\&#123;([^&#123;&#125;\s]+)\&#125;(?!\&#125;)(?![\w\/])/g;</span><br><span class="line">            let time = new Date((item.createdTs - (new Date().getTimezoneOffset() * 60)) * 1000).toISOString(),</span><br><span class="line">                content = item.content,</span><br><span class="line">                image = &#x27;&#x27;,</span><br><span class="line">                img = content.match(imageRegex);</span><br><span class="line">                aplayer = content.match(/&#123;\s*music\s*(.*?)\s*(.*?)\s*&#125;/g),</span><br><span class="line">                video = content.match(playerRegex),</span><br><span class="line">                link = content.match(linkRegex),</span><br><span class="line">                type = &#x27;&#x27;,</span><br><span class="line">                from = content.match(fromRegex);</span><br><span class="line">            </span><br><span class="line">            if (item.resourceList.length) &#123;</span><br><span class="line">                if (!img) img = [];  </span><br><span class="line">                item.resourceList.forEach(e =&gt; &#123;</span><br><span class="line">                    if (e.externalLink) img.push(e.externalLink);</span><br><span class="line">                    else img.push(`$&#123;baseUrl&#125;/o/r/$&#123;e.uid&#125;`);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            if (img) image += img.map(e =&gt; `&lt;div class=&quot;imgbox&quot;&gt;&lt;img src=&quot;$&#123;e.replace(imageRegex, &#x27;$2&#x27;)&#125;&quot; $&#123;e.replace(imageRegex, &#x27;$1&#x27;) ? `alt=&quot;$&#123;e.replace(imageRegex, &#x27;$1&#x27;)&#125;&quot;` : `title=&quot;即刻短文配图&quot;`&#125; /&gt;&lt;/div&gt;`).join(&#x27;&#x27;);</span><br><span class="line">            aplayer = aplayer ? `&lt;div class=&quot;icat-bber-music&quot;&gt;&lt;meting-js server=&quot;$&#123;aplayer[0].match(/\&#123;\s*music\s*(.*?)\s*\d+\s*\&#125;/)[1]&#125;&quot; type=&quot;song&quot; id=&quot;$&#123;aplayer[0].match(/\d+/)[0]&#125;&quot; mutex=&quot;true&quot; preload=&quot;none&quot; theme=&quot;var(--icat-blue)&quot; data-lrctype=&quot;0&quot;&gt;&lt;/meting-js&gt;&lt;/div&gt;` : &#x27;&#x27;;</span><br><span class="line">            video = video ? `&lt;div class=&quot;icat-bber-video&quot;&gt;&lt;video src=&quot;$&#123;video[0].replace(playerRegex, &#x27;$1&#x27;).trim()&#125;&quot; controls=&quot;controls&quot; style=&quot;object-fit: cover;&quot;&gt;&lt;/video&gt;&lt;/div&gt;` : content.match(/&#123;\s*bilibili\s*(.*?)\s*&#125;/g);</span><br><span class="line">            video = Array.isArray(video) ? `&lt;div class=&quot;icat-bber-video&quot;&gt;&lt;iframe src=&quot;//player.bilibili.com/player.html?bvid=$&#123;video[0].match(/(BV\w+)/)[1]&#125;$&#123;video[0].match(/&#123;\s*bilibili\s*(.*?)\s*true\s*&#125;/g) ? &#x27;&amp;autoplay=1&#x27; : &#x27;&amp;autoplay=0&#x27;&#125;&quot; scrolling=&quot;no&quot; border=&quot;0&quot; frameborder=&quot;no&quot; framespacing=&quot;0&quot; allowfullscreen=&quot;true&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;` : &#x27;&#x27;;</span><br><span class="line">            link = link ? ((type = link[0].replace(linkRegex, &#x27;$2&#x27;)), `&lt;a class=&quot;icat-bber-content-link&quot; href=&#x27;$&#123;type.startsWith(&#x27;/&#x27;) ? type : (type.startsWith(&#x27;http&#x27;) ? type : &#x27;https://&#x27; + type)&#125;&#x27; title=&quot;$&#123;link[0].replace(linkRegex, &#x27;$1&#x27;) ? link[0].replace(linkRegex, &#x27;$1&#x27;) : &#x27;跳转到短文指引的链接&#x27; &#125;&quot; target=&quot;_blank&quot;&gt;&lt;i class=&quot;iconfont icat-jump-link&quot;&gt;&lt;/i&gt;链接&lt;/a&gt;`) : &#x27;&#x27;;</span><br><span class="line">            from = from ? `&lt;div class=&quot;icat-bber-info-from&quot;&gt;&lt;span&gt;$&#123;from[0].replace(fromRegex, &#x27;$1&#x27;)&#125;&lt;/span&gt;&lt;/div&gt;` : &#x27;&#x27;;</span><br><span class="line">            content = content.replace(contentRegex, &#x27;&#x27;).replace(imageRegex, &#x27;&#x27;).replace(/\&#123;(.*?)\&#125;/g, &#x27;&#x27;).replace(linkRegex, &#x27;&#x27;).trim();</span><br><span class="line"></span><br><span class="line">            return `</span><br><span class="line">                &lt;div class=&quot;icat-bber-item&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;icat-bber-content&quot;&gt;</span><br><span class="line">                        $&#123;content ? `&lt;p class=&quot;datacont&quot;&gt;$&#123;content&#125;&lt;/p&gt;` : &#x27;&#x27;&#125;</span><br><span class="line">                        $&#123;image ? `&lt;div class=&quot;icat-bber-image&quot;&gt;$&#123;image&#125;&lt;/div&gt;` : &#x27;&#x27;&#125;</span><br><span class="line">                        $&#123;aplayer&#125;</span><br><span class="line">                        $&#123;video&#125;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;hr&gt;</span><br><span class="line">                    &lt;div class=&quot;icat-bber-bottom&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;icat-bber-info&quot;&gt;</span><br><span class="line">                            &lt;div class=&quot;icat-bber-info-time&quot;&gt;</span><br><span class="line">                                &lt;i class=&quot;iconfont icat-time-fill&quot;&gt;&lt;/i&gt;</span><br><span class="line">                                &lt;time class=&quot;datatime&quot; datetime=&quot;$&#123;time&#125;&quot;&gt;&lt;/time&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                            $&#123;link&#125;</span><br><span class="line">                            $&#123;from&#125;</span><br><span class="line">                            $&#123;item.content.includes(&#x27;#top&#x27;) ? `&lt;div class=&quot;icat-bber-info-top&quot;&gt;&lt;i class=&quot;iconfont icat-thumbtack&quot;&gt;&lt;/i&gt;置顶&lt;/div&gt;` : &#x27;&#x27;&#125;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        $&#123;content ? `&lt;div class=&quot;icat-bber-reply&quot; onclick=&quot;commentText(&#x27;$&#123;content&#125;&#x27;)&quot;&gt;&lt;i class=&quot;iconfont icat-message&quot;&gt;&lt;/i&gt;&lt;/div&gt;` : &#x27;&#x27;&#125;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;`;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>修改 [blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;layout&#x2F;page.pug 来使页面匹配<br>（ + 号直接删除 即是正常缩进）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">      when &#x27;categories&#x27;</span><br><span class="line">        include includes/page/categories.pug</span><br><span class="line">+      when &#x27;essay&#x27;</span><br><span class="line">+        include includes/page/essay.pug</span><br><span class="line">      default</span><br><span class="line">        include includes/page/default-page.pug</span><br></pre></td></tr></table></figure><p>新建 [blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;source&#x2F;css&#x2F;_page&#x2F;essay.styl 样式文件，并新增以下内容</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#icat-bber</span></span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">1.5rem</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.icat-page</span></span><br><span class="line">        <span class="selector-id">#waterfall</span></span><br><span class="line">            <span class="attribute">opacity</span>: <span class="number">0</span></span><br><span class="line">            <span class="attribute">transition</span>: .<span class="number">3s</span></span><br><span class="line"></span><br><span class="line">            &amp;<span class="selector-class">.list</span></span><br><span class="line">                <span class="attribute">display</span>: flex</span><br><span class="line">                <span class="attribute">flex-flow</span>: row wrap</span><br><span class="line">                <span class="attribute">justify-content</span>: space-between</span><br><span class="line"></span><br><span class="line">            &amp;<span class="selector-class">.show</span></span><br><span class="line">                <span class="attribute">opacity</span>: <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="selector-class">.icat-bber-item</span></span><br><span class="line">                <span class="attribute">position</span>: relative</span><br><span class="line">                <span class="attribute">width</span>: <span class="number">32%</span></span><br><span class="line">                <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border)</span><br><span class="line">                <span class="attribute">border-radius</span>: <span class="number">12px</span></span><br><span class="line">                <span class="attribute">padding</span>: <span class="number">1rem</span> <span class="number">1rem</span> <span class="number">0.9rem</span></span><br><span class="line">                <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease <span class="number">0s</span></span><br><span class="line">                <span class="attribute">display</span>: flex</span><br><span class="line">                <span class="attribute">flex-flow</span>: column nowrap</span><br><span class="line">                <span class="attribute">justify-content</span>: space-between</span><br><span class="line">                <span class="attribute">align-items</span>: flex-start</span><br><span class="line">                <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-card-bg)</span><br><span class="line">                <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--icat-shadow-border)</span><br><span class="line">                <span class="attribute">margin-right</span>: <span class="number">2%</span></span><br><span class="line">                <span class="attribute">margin-bottom</span>: <span class="number">1rem</span></span><br><span class="line">                <span class="attribute">animation</span>: slide-in .<span class="number">6s</span> .<span class="number">4s</span> backwards</span><br><span class="line"></span><br><span class="line">                +<span class="built_in">maxWidth1024</span>()</span><br><span class="line">                    <span class="attribute">width</span>: <span class="number">49%</span></span><br><span class="line">                    <span class="attribute">margin-right</span>: <span class="number">1%</span></span><br><span class="line"></span><br><span class="line">                +<span class="built_in">maxWidth768</span>()</span><br><span class="line">                    <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">                    <span class="attribute">margin-right</span>: <span class="number">0px</span></span><br><span class="line">                    </span><br><span class="line">                <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">                    <span class="attribute">border-color</span>: <span class="built_in">var</span>(--icat-blue)</span><br><span class="line"></span><br><span class="line">                <span class="selector-class">.icat-bber-content</span></span><br><span class="line">                    <span class="attribute">display</span>: flex</span><br><span class="line">                    <span class="attribute">flex-flow</span>: wrap</span><br><span class="line">                    <span class="attribute">border-radius</span>: <span class="number">12px</span></span><br><span class="line">                    <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">                    <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line"></span><br><span class="line">                    <span class="selector-tag">p</span></span><br><span class="line">                        <span class="attribute">margin</span>: <span class="number">0px</span></span><br><span class="line"></span><br><span class="line">                    <span class="selector-class">.datacont</span></span><br><span class="line">                        <span class="attribute">order</span>: <span class="number">0</span></span><br><span class="line">                        <span class="attribute">font-size</span>: <span class="number">0.8rem</span></span><br><span class="line">                        <span class="attribute">font-weight</span>: <span class="number">700</span></span><br><span class="line">                        <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor)</span><br><span class="line">                        <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">                        <span class="attribute">line-height</span>: <span class="number">1.38</span></span><br><span class="line">                        <span class="attribute">border-radius</span>: <span class="number">12px</span></span><br><span class="line">                        <span class="attribute">margin-bottom</span>: <span class="number">0.8rem</span></span><br><span class="line">                        <span class="attribute">display</span>: flex</span><br><span class="line">                        <span class="attribute">flex-direction</span>: column</span><br><span class="line">                        <span class="attribute">text-align</span>: justify</span><br><span class="line">                        <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">8px</span></span><br><span class="line"></span><br><span class="line">                    <span class="selector-class">.icat-bber-image</span></span><br><span class="line">                        <span class="attribute">display</span>: flex</span><br><span class="line">                        <span class="attribute">gap</span>: <span class="number">8px</span></span><br><span class="line">                        <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">                        <span class="attribute">flex-wrap</span>: wrap</span><br><span class="line">                        <span class="attribute">margin-bottom</span>: <span class="number">10px</span></span><br><span class="line">                        <span class="attribute">padding-left</span>: <span class="number">8px</span></span><br><span class="line"></span><br><span class="line">                        <span class="selector-class">.imgbox</span></span><br><span class="line">                            <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> / <span class="number">4</span> - <span class="number">8px</span>)</span><br><span class="line">                            aspect-ratio: <span class="number">1</span> / <span class="number">1</span></span><br><span class="line">                            <span class="attribute">overflow</span>: hidden</span><br><span class="line">                            <span class="attribute">border-radius</span>: <span class="number">6px</span></span><br><span class="line"></span><br><span class="line">                            <span class="selector-tag">a</span></span><br><span class="line">                                <span class="attribute">height</span>: <span class="number">100px</span></span><br><span class="line">                                <span class="attribute">display</span>: flex</span><br><span class="line">                                <span class="attribute">position</span>: relative</span><br><span class="line"></span><br><span class="line">                                <span class="selector-tag">img</span></span><br><span class="line">                                    <span class="attribute">object-fit</span>: cover</span><br><span class="line">                                    <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">                                    <span class="attribute">max-height</span>: <span class="number">100%</span></span><br><span class="line">                                    <span class="attribute">border-radius</span>: <span class="number">6px</span></span><br><span class="line">                                    <span class="attribute">animation</span>: slide-in .<span class="number">6s</span> .<span class="number">4s</span> backwards</span><br><span class="line"></span><br><span class="line">                    <span class="selector-class">.icat-bber-video</span></span><br><span class="line">                        <span class="attribute">position</span>: relative</span><br><span class="line">                        <span class="attribute">padding</span>: <span class="number">30%</span> <span class="number">50%</span></span><br><span class="line">                        <span class="attribute">margin-bottom</span>: <span class="number">10px</span></span><br><span class="line"></span><br><span class="line">                        <span class="selector-tag">video</span>,</span><br><span class="line">                        <span class="selector-tag">iframe</span></span><br><span class="line">                            <span class="attribute">position</span>: absolute</span><br><span class="line">                            <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">                            <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">                            <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">                            <span class="attribute">top</span>: <span class="number">0</span></span><br><span class="line">                            <span class="attribute">margin</span>: <span class="number">0</span></span><br><span class="line">                            <span class="attribute">border-radius</span>: <span class="number">6px</span></span><br><span class="line">                            <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border)</span><br><span class="line"></span><br><span class="line">                    <span class="selector-class">.icat-bber-music</span></span><br><span class="line">                        <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">                        <span class="attribute">height</span>: <span class="number">90px</span></span><br><span class="line">                        <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0.5rem</span></span><br><span class="line">                        <span class="attribute">border-radius</span>: <span class="number">8px</span></span><br><span class="line">                        <span class="attribute">overflow</span>: hidden</span><br><span class="line">                        <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border)</span><br><span class="line">                        <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-secondbg)</span><br><span class="line"></span><br><span class="line">                hr</span><br><span class="line">                    <span class="attribute">display</span>: flex</span><br><span class="line">                    <span class="attribute">position</span>: relative</span><br><span class="line">                    <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">0px</span></span><br><span class="line">                    <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="built_in">var</span>(--icat-blue)</span><br><span class="line">                    <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">                    <span class="attribute">opacity</span>: <span class="number">0.4</span></span><br><span class="line"></span><br><span class="line">                <span class="selector-class">.icat-bber-bottom</span></span><br><span class="line">                    <span class="attribute">display</span>: flex</span><br><span class="line">                    <span class="attribute">justify-content</span>: space-between</span><br><span class="line">                    <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">                    <span class="attribute">margin-top</span>: <span class="number">10px</span></span><br><span class="line">                    user-<span class="selector-tag">select</span>: <span class="attribute">none</span></span><br><span class="line"></span><br><span class="line">                    <span class="selector-class">.icat-bber-info</span></span><br><span class="line">                        <span class="attribute">display</span>: flex</span><br><span class="line"></span><br><span class="line">                        <span class="selector-class">.icat-bber-info-time</span></span><br><span class="line">                            <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor)</span><br><span class="line">                            <span class="attribute">font-size</span>: <span class="number">0.7rem</span></span><br><span class="line">                            <span class="attribute">background-color</span>: <span class="built_in">var</span>(--icat-gray-op)</span><br><span class="line">                            <span class="attribute">padding</span>: <span class="number">8px</span></span><br><span class="line">                            <span class="attribute">border-radius</span>: <span class="number">20px</span></span><br><span class="line">                            <span class="attribute">cursor</span>: default</span><br><span class="line">                            <span class="attribute">display</span>: flex</span><br><span class="line">                            <span class="attribute">align-items</span>: center</span><br><span class="line">                            <span class="attribute">padding-right</span>: <span class="number">12px</span></span><br><span class="line">                            <span class="attribute">line-height</span>: <span class="number">1</span></span><br><span class="line"></span><br><span class="line">                            <span class="selector-tag">i</span></span><br><span class="line">                                <span class="attribute">padding-right</span>: <span class="number">4px</span></span><br><span class="line"></span><br><span class="line">                        <span class="selector-class">.icat-bber-info-from</span></span><br><span class="line">                            <span class="keyword">@extend</span> <span class="selector-class">.icat-bber-info-time</span></span><br><span class="line">                            <span class="attribute">margin-left</span>: <span class="number">0.5rem</span></span><br><span class="line"></span><br><span class="line">                            <span class="selector-tag">span</span></span><br><span class="line">                                <span class="attribute">margin-left</span>: <span class="number">0.35rem</span></span><br><span class="line"></span><br><span class="line">                        <span class="selector-class">.icat-bber-content-link</span></span><br><span class="line">                            <span class="attribute">display</span>: flex</span><br><span class="line">                            <span class="attribute">margin-left</span>: <span class="number">0.5rem</span></span><br><span class="line">                            <span class="attribute">font-size</span>: <span class="number">0.7rem</span></span><br><span class="line">                            <span class="attribute">align-items</span>: center</span><br><span class="line">                            <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">103</span>, <span class="number">194</span>, <span class="number">58</span>, <span class="number">0.13</span>)</span><br><span class="line">                            <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">103</span>, <span class="number">194</span>, <span class="number">58</span>)</span><br><span class="line">                            <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">8px</span></span><br><span class="line">                            <span class="attribute">border-radius</span>: <span class="number">20px</span></span><br><span class="line">                            <span class="attribute">padding-right</span>: <span class="number">10px</span></span><br><span class="line">                            <span class="attribute">line-height</span>: <span class="number">1</span></span><br><span class="line"></span><br><span class="line">                            <span class="selector-tag">i</span></span><br><span class="line">                                <span class="attribute">margin-right</span>: <span class="number">4px</span></span><br><span class="line"></span><br><span class="line">                            <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">                                <span class="attribute">background-color</span>: <span class="built_in">var</span>(--icat-blue)</span><br><span class="line">                                <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-white)</span><br><span class="line"></span><br><span class="line">                        <span class="selector-class">.icat-bber-info-top</span></span><br><span class="line">                            <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">245</span>, <span class="number">108</span>, <span class="number">108</span>, <span class="number">0.13</span>)</span><br><span class="line">                            <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">245</span>, <span class="number">108</span>, <span class="number">108</span>)</span><br><span class="line">                            <span class="attribute">display</span>: flex</span><br><span class="line">                            <span class="attribute">margin-left</span>: <span class="number">0.5rem</span></span><br><span class="line">                            <span class="attribute">font-size</span>: <span class="number">0.7rem</span></span><br><span class="line">                            <span class="attribute">align-items</span>: center</span><br><span class="line">                            <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">8px</span></span><br><span class="line">                            <span class="attribute">border-radius</span>: <span class="number">20px</span></span><br><span class="line">                            <span class="attribute">padding-right</span>: <span class="number">10px</span></span><br><span class="line">                            <span class="attribute">line-height</span>: <span class="number">1</span></span><br><span class="line"></span><br><span class="line">                            <span class="selector-tag">i</span></span><br><span class="line">                                <span class="attribute">margin-right</span>: <span class="number">4px</span></span><br><span class="line">                                <span class="attribute">font-size</span>: <span class="number">14px</span></span><br><span class="line">                                <span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(<span class="number">35deg</span>)</span><br><span class="line"></span><br><span class="line">                    <span class="selector-class">.icat-bber-reply</span></span><br><span class="line">                        <span class="attribute">cursor</span>: pointer</span><br><span class="line">                        <span class="attribute">transition</span>: .<span class="number">6s</span></span><br><span class="line"></span><br><span class="line">                        <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">                            <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-blue)</span><br><span class="line"></span><br><span class="line">        <span class="selector-id">#icat-bber-tips</span></span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">14px</span></span><br><span class="line">            <span class="attribute">display</span>: flex</span><br><span class="line">            <span class="attribute">justify-content</span>: center</span><br><span class="line">            <span class="attribute">margin-bottom</span>: <span class="number">2rem</span></span><br><span class="line">            <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-secondtext)</span><br><span class="line">    </span><br><span class="line">    <span class="selector-class">.icat-bber-loading</span></span><br><span class="line">        <span class="attribute">position</span>: revert <span class="meta">!important</span></span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span> auto</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.aplayer</span></span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        &amp;<span class="selector-class">.aplayer-withlrc</span></span><br><span class="line">            <span class="selector-class">.aplayer-pic</span></span><br><span class="line">                <span class="attribute">height</span>: <span class="number">82px</span></span><br><span class="line">                <span class="attribute">width</span>: <span class="number">82px</span></span><br><span class="line">                <span class="attribute">margin</span>: <span class="number">3px</span></span><br><span class="line">                <span class="attribute">border-radius</span>: <span class="number">4px</span></span><br><span class="line"></span><br><span class="line">            <span class="selector-class">.aplayer-info</span></span><br><span class="line">                <span class="attribute">margin-left</span>: <span class="number">84px</span></span><br><span class="line">                <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">7px</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">                <span class="selector-class">.aplayer-music</span></span><br><span class="line">                    <span class="attribute">height</span>: <span class="number">23px</span></span><br><span class="line">                    <span class="attribute">text-align</span>: center</span><br><span class="line"></span><br><span class="line">                    <span class="selector-class">.aplayer-title</span></span><br><span class="line">                        <span class="attribute">font-size</span>: <span class="number">0.8rem</span></span><br><span class="line">                        <span class="attribute">font-weight</span>: <span class="number">700</span></span><br><span class="line">                        <span class="attribute">margin</span>: <span class="number">0</span></span><br><span class="line">                        <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor)</span><br><span class="line"></span><br><span class="line">                <span class="selector-class">.aplayer-controller</span></span><br><span class="line">                    <span class="attribute">align-items</span>: center</span><br><span class="line"></span><br><span class="line">                    <span class="selector-class">.aplayer-bar-wrap</span></span><br><span class="line">                        <span class="attribute">padding</span>: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">                        <span class="selector-class">.aplayer-bar</span></span><br><span class="line">                            <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-gray)</span><br><span class="line">                            <span class="attribute">height</span>: <span class="number">8px</span></span><br><span class="line">                            <span class="attribute">border-radius</span>: <span class="number">12px</span></span><br><span class="line">                            <span class="attribute">transition</span>: <span class="number">0.3s</span></span><br><span class="line">                            <span class="attribute">overflow</span>: hidden</span><br><span class="line"></span><br><span class="line">                            <span class="selector-class">.aplayer-loaded</span></span><br><span class="line">                                <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">                                <span class="attribute">border-radius</span>: <span class="number">12px</span></span><br><span class="line"></span><br><span class="line">                            <span class="selector-class">.aplayer-played</span></span><br><span class="line">                                <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">                                <span class="attribute">border-radius</span>: <span class="number">12px</span></span><br><span class="line"></span><br><span class="line">                                <span class="selector-class">.aplayer-thumb</span></span><br><span class="line">                                    <span class="attribute">display</span>: none</span><br><span class="line"></span><br><span class="line">                    <span class="selector-class">.aplayer-time</span></span><br><span class="line">                        <span class="attribute">position</span>: initial</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.aplayer-lrc</span></span><br><span class="line">            <span class="attribute">height</span>: <span class="number">36px</span></span><br><span class="line">            <span class="attribute">margin</span>: -<span class="number">12px</span> <span class="number">0</span> <span class="number">3px</span></span><br><span class="line"></span><br><span class="line">            <span class="selector-pseudo">&amp;::after</span></span><br><span class="line">                <span class="attribute">height</span>: <span class="number">20%</span></span><br><span class="line">            <span class="selector-pseudo">&amp;::before</span></span><br><span class="line">                <span class="attribute">height</span>: <span class="number">4%</span></span><br><span class="line"></span><br><span class="line">            <span class="selector-tag">p</span></span><br><span class="line">                <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor)</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span></span><br><span class="line">    <span class="selector-id">#icat-bber</span></span><br><span class="line">        <span class="selector-class">.icat-page</span></span><br><span class="line">            <span class="selector-id">#waterfall</span></span><br><span class="line">                <span class="selector-class">.icat-bber-item</span></span><br><span class="line">                    hr</span><br><span class="line">                        <span class="attribute">opacity</span>: <span class="number">0.2</span></span><br><span class="line">            </span><br><span class="line">            <span class="selector-class">.icat-bber-music</span> <span class="selector-class">.aplayer</span>,</span><br><span class="line">            <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-lrc</span><span class="selector-pseudo">:before</span>,</span><br><span class="line">            <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-lrc</span><span class="selector-pseudo">:after</span></span><br><span class="line">                <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-card-bg)</span><br><span class="line">                <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor)</span><br></pre></td></tr></table></figure><p>新建 [blogRoot]&#x2F;source&#x2F;config&#x2F;css&#x2F;essay.css 样式文件，并新增以下内容<br>（也可以在自建的css文件里新增内容）</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#icat-bber</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">1.5rem</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  -ms-<span class="attribute">filter</span>: <span class="string">&quot;progid:DXImageTransform.Microsoft.Alpha(Opacity=0)&quot;</span>;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">alpha</span>(opacity=<span class="number">0</span>);</span><br><span class="line">  -webkit-<span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  -moz-<span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  -o-<span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  -ms-<span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span><span class="selector-class">.list</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  -webkit-box-orient: horizontal;</span><br><span class="line">  -moz-box-orient: horizontal;</span><br><span class="line">  -o-box-orient: horizontal;</span><br><span class="line">  -webkit-box-lines: multiple;</span><br><span class="line">  -moz-box-lines: multiple;</span><br><span class="line">  -o-box-lines: multiple;</span><br><span class="line">  -webkit-<span class="attribute">flex-flow</span>: row wrap;</span><br><span class="line">  -ms-<span class="attribute">flex-flow</span>: row wrap;</span><br><span class="line">  <span class="attribute">flex-flow</span>: row wrap;</span><br><span class="line">  -webkit-box-pack: justify;</span><br><span class="line">  -moz-box-pack: justify;</span><br><span class="line">  -o-box-pack: justify;</span><br><span class="line">  -ms-<span class="attribute">flex</span>-pack: justify;</span><br><span class="line">  -webkit-<span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span><span class="selector-class">.show</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  -ms-<span class="attribute">filter</span>: none;</span><br><span class="line">  <span class="attribute">filter</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">32%</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1rem</span> <span class="number">1rem</span> <span class="number">0.9rem</span>;</span><br><span class="line">  -webkit-<span class="attribute">transition</span>: all <span class="number">0.3s</span> ease <span class="number">0s</span>;</span><br><span class="line">  -moz-<span class="attribute">transition</span>: all <span class="number">0.3s</span> ease <span class="number">0s</span>;</span><br><span class="line">  -o-<span class="attribute">transition</span>: all <span class="number">0.3s</span> ease <span class="number">0s</span>;</span><br><span class="line">  -ms-<span class="attribute">transition</span>: all <span class="number">0.3s</span> ease <span class="number">0s</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease <span class="number">0s</span>;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  -webkit-box-orient: vertical;</span><br><span class="line">  -moz-box-orient: vertical;</span><br><span class="line">  -o-box-orient: vertical;</span><br><span class="line">  -webkit-box-lines: single;</span><br><span class="line">  -moz-box-lines: single;</span><br><span class="line">  -o-box-lines: single;</span><br><span class="line">  -webkit-<span class="attribute">flex-flow</span>: column nowrap;</span><br><span class="line">  -ms-<span class="attribute">flex-flow</span>: column nowrap;</span><br><span class="line">  <span class="attribute">flex-flow</span>: column nowrap;</span><br><span class="line">  -webkit-box-pack: justify;</span><br><span class="line">  -moz-box-pack: justify;</span><br><span class="line">  -o-box-pack: justify;</span><br><span class="line">  -ms-<span class="attribute">flex</span>-pack: justify;</span><br><span class="line">  -webkit-<span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  -webkit-box-align: start;</span><br><span class="line">  -moz-box-align: start;</span><br><span class="line">  -o-box-align: start;</span><br><span class="line">  -ms-<span class="attribute">flex</span>-align: start;</span><br><span class="line">  -webkit-<span class="attribute">align-items</span>: flex-start;</span><br><span class="line">  <span class="attribute">align-items</span>: flex-start;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-card-bg);</span><br><span class="line">  -webkit-<span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--icat-shadow-border);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--icat-shadow-border);</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">2%</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">1rem</span>;</span><br><span class="line">  -webkit-<span class="attribute">animation</span>: slide-in <span class="number">0.6s</span> <span class="number">0.4s</span> backwards;</span><br><span class="line">  -moz-<span class="attribute">animation</span>: slide-in <span class="number">0.6s</span> <span class="number">0.4s</span> backwards;</span><br><span class="line">  -o-<span class="attribute">animation</span>: slide-in <span class="number">0.6s</span> <span class="number">0.4s</span> backwards;</span><br><span class="line">  -ms-<span class="attribute">animation</span>: slide-in <span class="number">0.6s</span> <span class="number">0.4s</span> backwards;</span><br><span class="line">  <span class="attribute">animation</span>: slide-in <span class="number">0.6s</span> <span class="number">0.4s</span> backwards;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">1024px</span>) &#123;</span><br><span class="line">  <span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">49%</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">1%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">0px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">var</span>(--icat-blue);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-content</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  -webkit-box-lines: multiple;</span><br><span class="line">  -moz-box-lines: multiple;</span><br><span class="line">  -o-box-lines: multiple;</span><br><span class="line">  -webkit-<span class="attribute">flex-flow</span>: wrap;</span><br><span class="line">  -ms-<span class="attribute">flex-flow</span>: wrap;</span><br><span class="line">  <span class="attribute">flex-flow</span>: wrap;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-content</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-content</span> <span class="selector-class">.datacont</span> &#123;</span><br><span class="line">  -webkit-box-ordinal-group: <span class="number">0</span>;</span><br><span class="line">  -moz-box-ordinal-group: <span class="number">0</span>;</span><br><span class="line">  -o-box-ordinal-group: <span class="number">0</span>;</span><br><span class="line">  -ms-<span class="attribute">flex</span>-<span class="attribute">order</span>: <span class="number">0</span>;</span><br><span class="line">  -webkit-<span class="attribute">order</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">order</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.8rem</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor);</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.38</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0.8rem</span>;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  -webkit-box-orient: vertical;</span><br><span class="line">  -moz-box-orient: vertical;</span><br><span class="line">  -o-box-orient: vertical;</span><br><span class="line">  -webkit-<span class="attribute">flex-direction</span>: column;</span><br><span class="line">  -ms-<span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">text-align</span>: justify;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-content</span> <span class="selector-class">.icat-bber-image</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  -webkit-box-lines: multiple;</span><br><span class="line">  -moz-box-lines: multiple;</span><br><span class="line">  -o-box-lines: multiple;</span><br><span class="line">  -webkit-<span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  -ms-<span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-content</span> <span class="selector-class">.icat-bber-image</span> <span class="selector-class">.imgbox</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> / <span class="number">4</span> - <span class="number">8px</span>);</span><br><span class="line">  aspect-ratio: <span class="number">1</span>/<span class="number">1</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-content</span> <span class="selector-class">.icat-bber-image</span> <span class="selector-class">.imgbox</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-content</span> <span class="selector-class">.icat-bber-image</span> <span class="selector-class">.imgbox</span> <span class="selector-tag">a</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">object-fit</span>: cover;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">  -webkit-<span class="attribute">animation</span>: slide-in <span class="number">0.6s</span> <span class="number">0.4s</span> backwards;</span><br><span class="line">  -moz-<span class="attribute">animation</span>: slide-in <span class="number">0.6s</span> <span class="number">0.4s</span> backwards;</span><br><span class="line">  -o-<span class="attribute">animation</span>: slide-in <span class="number">0.6s</span> <span class="number">0.4s</span> backwards;</span><br><span class="line">  -ms-<span class="attribute">animation</span>: slide-in <span class="number">0.6s</span> <span class="number">0.4s</span> backwards;</span><br><span class="line">  <span class="attribute">animation</span>: slide-in <span class="number">0.6s</span> <span class="number">0.4s</span> backwards;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-content</span> <span class="selector-class">.icat-bber-video</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">30%</span> <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-content</span> <span class="selector-class">.icat-bber-video</span> <span class="selector-tag">video</span>,</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-content</span> <span class="selector-class">.icat-bber-video</span> <span class="selector-tag">iframe</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-content</span> <span class="selector-class">.icat-bber-music</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">90px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0.5rem</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-secondbg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> hr &#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="built_in">var</span>(--icat-blue);</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.4</span>;</span><br><span class="line">  -ms-<span class="attribute">filter</span>: <span class="string">&quot;progid:DXImageTransform.Microsoft.Alpha(Opacity=40)&quot;</span>;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">alpha</span>(opacity=<span class="number">40</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-bottom</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  -webkit-box-pack: justify;</span><br><span class="line">  -moz-box-pack: justify;</span><br><span class="line">  -o-box-pack: justify;</span><br><span class="line">  -ms-<span class="attribute">flex</span>-pack: justify;</span><br><span class="line">  -webkit-<span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  -webkit-user-<span class="selector-tag">select</span>: none;</span><br><span class="line">  -moz-user-<span class="selector-tag">select</span>: none;</span><br><span class="line">  -ms-user-<span class="selector-tag">select</span>: none;</span><br><span class="line">  user-<span class="selector-tag">select</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-bottom</span> <span class="selector-class">.icat-bber-info</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-bottom</span> <span class="selector-class">.icat-bber-info</span> <span class="selector-class">.icat-bber-info-time</span>,</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-bottom</span> <span class="selector-class">.icat-bber-info</span> <span class="selector-class">.icat-bber-info-from</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor);</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.7rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--icat-gray-op);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: default;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  -webkit-box-align: center;</span><br><span class="line">  -moz-box-align: center;</span><br><span class="line">  -o-box-align: center;</span><br><span class="line">  -ms-<span class="attribute">flex</span>-align: center;</span><br><span class="line">  -webkit-<span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-bottom</span> <span class="selector-class">.icat-bber-info</span> <span class="selector-class">.icat-bber-info-time</span> <span class="selector-tag">i</span>,</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-bottom</span> <span class="selector-class">.icat-bber-info</span> <span class="selector-class">.icat-bber-info-from</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-bottom</span> <span class="selector-class">.icat-bber-info</span> <span class="selector-class">.icat-bber-info-from</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-bottom</span> <span class="selector-class">.icat-bber-info</span> <span class="selector-class">.icat-bber-info-from</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0.35rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-bottom</span> <span class="selector-class">.icat-bber-info</span> <span class="selector-class">.icat-bber-content-link</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0.5rem</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.7rem</span>;</span><br><span class="line">  -webkit-box-align: center;</span><br><span class="line">  -moz-box-align: center;</span><br><span class="line">  -o-box-align: center;</span><br><span class="line">  -ms-<span class="attribute">flex</span>-align: center;</span><br><span class="line">  -webkit-<span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">103</span>,<span class="number">194</span>,<span class="number">58</span>,<span class="number">0.13</span>);</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#67c23a</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-bottom</span> <span class="selector-class">.icat-bber-info</span> <span class="selector-class">.icat-bber-content-link</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-bottom</span> <span class="selector-class">.icat-bber-info</span> <span class="selector-class">.icat-bber-content-link</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--icat-blue);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-white);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-bottom</span> <span class="selector-class">.icat-bber-info</span> <span class="selector-class">.icat-bber-info-top</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">245</span>,<span class="number">108</span>,<span class="number">108</span>,<span class="number">0.13</span>);</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f56c6c</span>;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0.5rem</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.7rem</span>;</span><br><span class="line">  -webkit-box-align: center;</span><br><span class="line">  -moz-box-align: center;</span><br><span class="line">  -o-box-align: center;</span><br><span class="line">  -ms-<span class="attribute">flex</span>-align: center;</span><br><span class="line">  -webkit-<span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-bottom</span> <span class="selector-class">.icat-bber-info</span> <span class="selector-class">.icat-bber-info-top</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(<span class="number">35deg</span>);</span><br><span class="line">  -moz-<span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(<span class="number">35deg</span>);</span><br><span class="line">  -o-<span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(<span class="number">35deg</span>);</span><br><span class="line">  -ms-<span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(<span class="number">35deg</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(<span class="number">35deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-bottom</span> <span class="selector-class">.icat-bber-reply</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  -webkit-<span class="attribute">transition</span>: <span class="number">0.6s</span>;</span><br><span class="line">  -moz-<span class="attribute">transition</span>: <span class="number">0.6s</span>;</span><br><span class="line">  -o-<span class="attribute">transition</span>: <span class="number">0.6s</span>;</span><br><span class="line">  -ms-<span class="attribute">transition</span>: <span class="number">0.6s</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.6s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> <span class="selector-class">.icat-bber-bottom</span> <span class="selector-class">.icat-bber-reply</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-blue);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#icat-bber-tips</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  -webkit-box-pack: center;</span><br><span class="line">  -moz-box-pack: center;</span><br><span class="line">  -o-box-pack: center;</span><br><span class="line">  -ms-<span class="attribute">flex</span>-pack: center;</span><br><span class="line">  -webkit-<span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-secondtext);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-bber-loading</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: revert <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-withlrc</span> <span class="selector-class">.aplayer-pic</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">82px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">82px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-withlrc</span> <span class="selector-class">.aplayer-info</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">84px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">7px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-withlrc</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-music</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">23px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-withlrc</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-music</span> <span class="selector-class">.aplayer-title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.8rem</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-withlrc</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> &#123;</span><br><span class="line">  -webkit-box-align: center;</span><br><span class="line">  -moz-box-align: center;</span><br><span class="line">  -o-box-align: center;</span><br><span class="line">  -ms-<span class="attribute">flex</span>-align: center;</span><br><span class="line">  -webkit-<span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-withlrc</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-bar-wrap</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-withlrc</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-bar-wrap</span> <span class="selector-class">.aplayer-bar</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-gray);</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">  -webkit-<span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  -moz-<span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  -o-<span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  -ms-<span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-withlrc</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-bar-wrap</span> <span class="selector-class">.aplayer-bar</span> <span class="selector-class">.aplayer-loaded</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-withlrc</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-bar-wrap</span> <span class="selector-class">.aplayer-bar</span> <span class="selector-class">.aplayer-played</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-withlrc</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-bar-wrap</span> <span class="selector-class">.aplayer-bar</span> <span class="selector-class">.aplayer-played</span> <span class="selector-class">.aplayer-thumb</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-withlrc</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-time</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: initial;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-lrc</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: -<span class="number">12px</span> <span class="number">0</span> <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-lrc</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-lrc</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">4%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#icat-bber</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-lrc</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span> <span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-id">#waterfall</span> <span class="selector-class">.icat-bber-item</span> hr &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.2</span>;</span><br><span class="line">  -ms-<span class="attribute">filter</span>: <span class="string">&quot;progid:DXImageTransform.Microsoft.Alpha(Opacity=20)&quot;</span>;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">alpha</span>(opacity=<span class="number">20</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span> <span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-class">.icat-bber-music</span> <span class="selector-class">.aplayer</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span> <span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-lrc</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span> <span class="selector-id">#icat-bber</span> <span class="selector-class">.icat-page</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-lrc</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--icat-card-bg);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-fontcolor);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 即刻短文样式 */</span></span><br></pre></td></tr></table></figure><p>创建 [blogRoot]&#x2F;source&#x2F;config&#x2F;js&#x2F;essay.js 文件，并新增以下内容，用来处理即刻短文的逻辑<br>（或写在自建的公共 js 中也可以）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">whenDOMReady</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (location.<span class="property">pathname</span> == <span class="string">&#x27;/essay/&#x27;</span>) <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; <span class="title function_">changeTime</span>(), btf.<span class="title function_">loadLightbox</span>(<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#icat-bber img&#x27;</span>)), <span class="variable language_">window</span>.<span class="property">lazyLoadInstance</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">lazyLoadInstance</span>.<span class="title function_">update</span>(), <span class="title function_">reflashWaterFall</span>();&#125;, <span class="number">300</span>)&#125;)</span><br><span class="line">  <span class="title function_">initEssay</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">whenDOMReady</span>()</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;pjax:complete&quot;</span>, whenDOMReady)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 适配pjax</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">waterfall</span>(<span class="string">&#x27;#waterfall&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自适应</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">timeDiff</span>(<span class="params">timeObj, today</span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> timeObjUTC = <span class="title class_">Date</span>.<span class="title function_">UTC</span>(timeObj.<span class="title function_">getFullYear</span>(), timeObj.<span class="title function_">getMonth</span>(), timeObj.<span class="title function_">getDate</span>());</span><br><span class="line">  <span class="keyword">const</span> todayUTC = <span class="title class_">Date</span>.<span class="title function_">UTC</span>(today.<span class="title function_">getFullYear</span>(), today.<span class="title function_">getMonth</span>(), today.<span class="title function_">getDate</span>());</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> timeDiff = todayUTC - timeObjUTC;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>(timeDiff / (<span class="number">1000</span> * <span class="number">3600</span> * <span class="number">24</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeTime</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> timeElements = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;time&quot;</span>));</span><br><span class="line">  <span class="keyword">const</span> currentDate = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line">  timeElements.<span class="title function_">forEach</span>(<span class="function"><span class="params">timeElement</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> datetime = timeElement.<span class="title function_">getAttribute</span>(<span class="string">&quot;datetime&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> timeObj = <span class="keyword">new</span> <span class="title class_">Date</span>(datetime);</span><br><span class="line">    <span class="keyword">const</span> daysDiff = <span class="title function_">timeDiff</span>(timeObj, currentDate);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> timeString;</span><br><span class="line">    <span class="keyword">if</span> (daysDiff === <span class="number">0</span>) &#123;</span><br><span class="line">      timeString = <span class="string">`最近`</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (daysDiff === <span class="number">1</span>) &#123;</span><br><span class="line">      timeString = <span class="string">`昨天`</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (daysDiff === <span class="number">2</span>) &#123;</span><br><span class="line">      timeString = <span class="string">`前天`</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (daysDiff &lt;= <span class="number">7</span>) &#123;</span><br><span class="line">      timeString = <span class="string">`<span class="subst">$&#123;daysDiff&#125;</span>天前`</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (timeObj.<span class="title function_">getFullYear</span>() !== currentDate.<span class="title function_">getFullYear</span>()) &#123;</span><br><span class="line">        timeString = <span class="string">`<span class="subst">$&#123;timeObj.getFullYear()&#125;</span>/<span class="subst">$&#123;timeObj.getMonth() + <span class="number">1</span>&#125;</span>/<span class="subst">$&#123;timeObj.getDate()&#125;</span>`</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        timeString = <span class="string">`<span class="subst">$&#123;timeObj.getMonth() + <span class="number">1</span>&#125;</span>/<span class="subst">$&#123;timeObj.getDate()&#125;</span>`</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    timeElement.<span class="property">textContent</span> = timeString;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reflashWaterFall</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#waterfall&quot;</span>) &amp;&amp;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">waterfall</span>(<span class="string">&quot;#waterfall&quot;</span>);</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;waterfall&quot;</span>)</span><br><span class="line">        .<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">    &#125;, <span class="number">500</span>);</span><br><span class="line">&#125; <span class="comment">// 加载显示 - 即刻短文</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">commentText</span>(<span class="params">txt</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> inputs = [<span class="string">&quot;#wl-edit&quot;</span>, <span class="string">&quot;.el-textarea__inner&quot;</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; inputs.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> el = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(inputs[i]);</span><br><span class="line">    <span class="keyword">if</span> (el != <span class="literal">null</span>) &#123;</span><br><span class="line">      el.<span class="title function_">dispatchEvent</span>(<span class="keyword">new</span> <span class="title class_">Event</span>(<span class="string">&#x27;input&#x27;</span>, &#123; <span class="attr">bubble</span>: <span class="literal">true</span>, <span class="attr">cancelable</span>: <span class="literal">true</span> &#125;));</span><br><span class="line">      el.<span class="property">value</span> = <span class="string">&#x27;&gt; &#x27;</span> + txt.<span class="title function_">replace</span>(<span class="regexp">/\n/g</span>, <span class="string">&#x27;\n&gt; &#x27;</span>) + <span class="string">&#x27;\n\n&#x27;</span>;</span><br><span class="line">      el.<span class="title function_">focus</span>();</span><br><span class="line">      el.<span class="title function_">setSelectionRange</span>(-<span class="number">1</span>, -<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="comment">// 引用评论跳转 - 即刻短文</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">initEssay</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#essay-mini&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">let</span> swiper = <span class="keyword">new</span> <span class="title class_">Swiper</span>(<span class="string">&#x27;.swiper-container&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">direction</span>: <span class="string">&#x27;vertical&#x27;</span>,</span><br><span class="line">        <span class="attr">loop</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">autoplay</span>: &#123;</span><br><span class="line">            <span class="attr">delay</span>: <span class="number">3000</span>,</span><br><span class="line">            <span class="attr">pauseOnMouseEnter</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="comment">// Swiper轮播 - 即刻mini</span></span><br></pre></td></tr></table></figure><p>创建 [blogRoot]&#x2F;config&#x2F;source&#x2F;js&#x2F;waterfall.js 文件，并新增以下内容，用于处理瀑布流<br>（或写在公共 js 中也可以）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">waterfall</span>(<span class="params">a</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> c = <span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(b);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parseFloat</span>(c[<span class="string">&quot;margin&quot;</span> + a]) || <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">c</span>(<span class="params">a</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">d</span>(<span class="params">a</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parseFloat</span>(a.<span class="property">style</span>.<span class="property">top</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">e</span>(<span class="params">a</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parseFloat</span>(a.<span class="property">style</span>.<span class="property">left</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">a</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a.<span class="property">clientWidth</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">g</span>(<span class="params">a</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a.<span class="property">clientHeight</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">h</span>(<span class="params">a</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">d</span>(a) + <span class="title function_">g</span>(a) + <span class="title function_">b</span>(<span class="string">&quot;Bottom&quot;</span>, a);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">i</span>(<span class="params">a</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">e</span>(a) + <span class="title function_">f</span>(a) + <span class="title function_">b</span>(<span class="string">&quot;Right&quot;</span>, a);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">j</span>(<span class="params">a</span>) &#123;</span><br><span class="line">    a = a.<span class="title function_">sort</span>(<span class="keyword">function</span> (<span class="params">a, b</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">h</span>(a) === <span class="title function_">h</span>(b) ? <span class="title function_">e</span>(b) - <span class="title function_">e</span>(a) : <span class="title function_">h</span>(b) - <span class="title function_">h</span>(a);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">k</span>(<span class="params">b</span>) &#123;</span><br><span class="line">    <span class="title function_">f</span>(a) != t &amp;&amp; (b.<span class="property">target</span>.<span class="title function_">removeEventListener</span>(b.<span class="property">type</span>, <span class="variable language_">arguments</span>.<span class="property">callee</span>), <span class="title function_">waterfall</span>(a));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">&quot;string&quot;</span> == <span class="keyword">typeof</span> a &amp;&amp; (a = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(a));</span><br><span class="line">  <span class="keyword">var</span> l = [].<span class="property">map</span>.<span class="title function_">call</span>(a.<span class="property">children</span>, <span class="keyword">function</span> (<span class="params">a</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (a.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&quot;absolute&quot;</span>), a;</span><br><span class="line">  &#125;);</span><br><span class="line">  a.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&quot;relative&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> m = [];</span><br><span class="line">  l.<span class="property">length</span> &amp;&amp; ((l[<span class="number">0</span>].<span class="property">style</span>.<span class="property">top</span> = <span class="string">&quot;0px&quot;</span>), (l[<span class="number">0</span>].<span class="property">style</span>.<span class="property">left</span> = <span class="title function_">c</span>(<span class="title function_">b</span>(<span class="string">&quot;Left&quot;</span>, l[<span class="number">0</span>]))), m.<span class="title function_">push</span>(l[<span class="number">0</span>]));</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> n = <span class="number">1</span>; n &lt; l.<span class="property">length</span>; n++) &#123;</span><br><span class="line">    <span class="keyword">var</span> o = l[n - <span class="number">1</span>],</span><br><span class="line">      p = l[n],</span><br><span class="line">      q = <span class="title function_">i</span>(o) + <span class="title function_">f</span>(p) &lt;= <span class="title function_">f</span>(a);</span><br><span class="line">    <span class="keyword">if</span> (!q) <span class="keyword">break</span>;</span><br><span class="line">    (p.<span class="property">style</span>.<span class="property">top</span> = o.<span class="property">style</span>.<span class="property">top</span>), (p.<span class="property">style</span>.<span class="property">left</span> = <span class="title function_">c</span>(<span class="title function_">i</span>(o) + <span class="title function_">b</span>(<span class="string">&quot;Left&quot;</span>, p))), m.<span class="title function_">push</span>(p);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (; n &lt; l.<span class="property">length</span>; n++) &#123;</span><br><span class="line">    <span class="title function_">j</span>(m);</span><br><span class="line">    <span class="keyword">var</span> p = l[n],</span><br><span class="line">      r = m.<span class="title function_">pop</span>();</span><br><span class="line">    (p.<span class="property">style</span>.<span class="property">top</span> = <span class="title function_">c</span>(<span class="title function_">h</span>(r) + <span class="title function_">b</span>(<span class="string">&quot;Top&quot;</span>, p))), (p.<span class="property">style</span>.<span class="property">left</span> = <span class="title function_">c</span>(<span class="title function_">e</span>(r))), m.<span class="title function_">push</span>(p);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">j</span>(m);</span><br><span class="line">  <span class="keyword">var</span> s = m[<span class="number">0</span>];</span><br><span class="line">  a.<span class="property">style</span>.<span class="property">height</span> = <span class="title function_">c</span>(<span class="title function_">h</span>(s) + <span class="title function_">b</span>(<span class="string">&quot;Bottom&quot;</span>, s));</span><br><span class="line">  <span class="keyword">var</span> t = <span class="title function_">f</span>(a);</span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">addEventListener</span> ? <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, k) : (<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">onresize</span> = k);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 _config.butterfly.yml 主题配置文件中，新增以下配置项</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># essay 即刻短文</span></span><br><span class="line"><span class="comment"># MeuiCat设计</span></span><br><span class="line"><span class="comment"># https://meuicat.com/blog/67/</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">essay:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 即刻短文仅展示前n条</span></span><br><span class="line">  <span class="comment"># Jike short text only shows the first n</span></span><br><span class="line">  <span class="attr">strip:</span> <span class="number">50</span></span><br><span class="line">  <span class="attr">mode:</span> <span class="string">local</span> <span class="comment"># local：本地静态 / json：动态json / memos：动态Memos</span></span><br><span class="line">  <span class="attr">mode_link:</span> <span class="string">https://memos.meuicat.com/api/v1/memo?creatorId=1&amp;tag=说说</span> <span class="comment">#动态模式地址</span></span><br></pre></td></tr></table></figure><h3 id="部署数据文件"><a href="#部署数据文件" class="headerlink" title="部署数据文件"></a>部署数据文件</h3><p>创建 [blogRoot]&#x2F;source&#x2F;_data&#x2F;essay.yml 文件，并新增以下内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">essay_list:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">即刻短文测试</span></span><br><span class="line">    <span class="attr">date:</span> <span class="number">2023</span><span class="string">/07/31</span> <span class="number">15</span><span class="string">:30:50</span></span><br><span class="line">    <span class="attr">from:</span> <span class="string">iPhone</span> <span class="string">XR</span></span><br><span class="line">    <span class="attr">video:</span> </span><br><span class="line">      <span class="attr">player:</span> <span class="string">/video/1.mp4</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">测试bilibili视频</span></span><br><span class="line">    <span class="attr">date:</span> <span class="number">2023</span><span class="string">/07/31</span> <span class="number">15</span><span class="string">:30:50</span></span><br><span class="line">    <span class="attr">video:</span> </span><br><span class="line">      <span class="attr">bilibili:</span> <span class="string">//player.bilibili.com/player.html?aid=913951276&amp;bvid=BV1RM4y1p75T&amp;cid=1211165267&amp;page=1</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">bilibili网页链接</span></span><br><span class="line">    <span class="attr">date:</span> <span class="number">2023</span><span class="string">/07/31</span> <span class="number">15</span><span class="string">:30:50</span></span><br><span class="line">    <span class="attr">video:</span> </span><br><span class="line">      <span class="attr">bilibili:</span> <span class="string">https://www.bilibili.com/video/BV17T4y1A7eW/?spm_id_from=333.1007.tianma.1-3-3.click</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">bilibili单bv号</span></span><br><span class="line">    <span class="attr">date:</span> <span class="number">2023</span><span class="string">/07/31</span> <span class="number">15</span><span class="string">:30:50</span></span><br><span class="line">    <span class="attr">video:</span> </span><br><span class="line">      <span class="attr">bilibili:</span> <span class="string">BV17T4y1A7eW</span></span><br><span class="line">      <span class="attr">autoplay:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">完噜</span> <span class="string">还剩一天让我咋准备</span> <span class="string">😭</span></span><br><span class="line">    <span class="attr">date:</span> <span class="number">2023</span><span class="string">/05/11</span> <span class="number">20</span><span class="string">:35:42</span></span><br><span class="line">    <span class="attr">from:</span> <span class="string">iPhone</span> <span class="string">XR</span></span><br><span class="line">    <span class="attr">image:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">https://s11.ax1x.com/2023/05/11/p9sKEh8.jpg</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">如果要定义</span> <span class="string">那就是下班后的日落和在家等我下班的她~</span></span><br><span class="line">    <span class="attr">date:</span> <span class="number">2023</span><span class="string">/05/10</span> <span class="number">16</span><span class="string">:16:15</span></span><br><span class="line">    <span class="attr">aplayer:</span></span><br><span class="line">      <span class="attr">server:</span> <span class="string">netease</span></span><br><span class="line">      <span class="attr">id:</span> <span class="number">1949516216</span></span><br><span class="line">    <span class="attr">top:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">Melancholia</span> <span class="bullet">-</span> <span class="string">欭</span> <span class="string">|</span> <span class="string">一款纯记录写作类Hexo主题</span> <span class="string">✍️</span></span><br><span class="line">    <span class="attr">date:</span> <span class="number">2023</span><span class="string">/04/23</span> <span class="number">22</span><span class="string">:27:22</span></span><br><span class="line">    <span class="attr">from:</span> <span class="string">Macbook</span> <span class="string">Pro</span></span><br><span class="line">    <span class="attr">link:</span> <span class="string">https://github.com/yife68/Hexo-Theme-Melancholia</span> <span class="string">||</span> <span class="string">Melancholia</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">爱看</span> <span class="string">但还是得吃我一拳</span></span><br><span class="line">    <span class="attr">date:</span> <span class="number">2023</span><span class="string">/04/22</span> <span class="number">15</span><span class="string">:10:30</span></span><br><span class="line">    <span class="attr">from:</span> <span class="string">iPhone</span> <span class="string">XR</span></span><br><span class="line">    <span class="attr">image:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">https://s11.ax1x.com/2023/05/03/p9JqGXd.jpg</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">https://s11.ax1x.com/2023/05/03/p9Jq86H.jpg</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">iCat</span> <span class="string">新启程</span></span><br><span class="line">    <span class="attr">date:</span> <span class="number">2023</span><span class="string">/03/24</span> <span class="number">16</span><span class="string">:54:25</span></span><br><span class="line">    <span class="attr">from:</span> <span class="string">iPhone</span> <span class="string">XR</span></span><br><span class="line">    <span class="attr">link:</span> <span class="string">https://meuicat.com/blog/14/</span></span><br><span class="line">    <span class="attr">image:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">https://s11.ax1x.com/2023/05/02/p9GosYQ.jpg</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">各种观影史集于一体！人生足迹页诞生咯~</span></span><br><span class="line">    <span class="attr">date:</span> <span class="number">2023</span><span class="string">/02/19</span> <span class="number">14</span><span class="string">:50:17</span></span><br><span class="line">    <span class="attr">from:</span> <span class="string">Macbook</span> <span class="string">Pro</span></span><br><span class="line">    <span class="attr">link:</span> <span class="string">/collect/</span> <span class="string">||</span> <span class="string">链接描述</span></span><br></pre></td></tr></table></figure><h3 id="即刻Mini"><a href="#即刻Mini" class="headerlink" title="即刻Mini"></a>即刻Mini</h3><p>新增 [blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;layout&#x2F;includes&#x2F;mixins&#x2F;post-ui.pug 页面内容<br>（ + 号直接删除 即是正常缩进）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mixin postUI(posts)</span><br><span class="line">  - let newTitle= newPost()</span><br><span class="line">+  if theme.essay.enable &amp;&amp; theme.essay.home_mini</span><br><span class="line">+    include ./essay_mini.pug</span><br><span class="line">  each article , index in page.posts.data</span><br><span class="line">    .recent-post-item</span><br><span class="line">  </span><br><span class="line">  ···</span><br></pre></td></tr></table></figure><p>创建 [blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;layout&#x2F;includes&#x2F;mixins&#x2F;essay_mini.pug 页面，并新增以下内容<br>（注意该内容中 fontawesome 图标 需要自行替换）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">.essay-mini</span><br><span class="line">    i.iconfont.icat-essay-mini(onclick=`pjax.loadUrl(&#x27;$&#123;theme.essay.home_mini_link&#125;&#x27;)` title=&quot;即刻短文&quot; style=&quot;font-size: 2.25rem; margin-right: 1rem&quot;)</span><br><span class="line">    .swiper-container.swiper-no-swiping#Essay(tabindex=&quot;-1&quot; onclick=`pjax.loadUrl(&#x27;$&#123;theme.essay.home_mini_link&#125;&#x27;)`)</span><br><span class="line">        .swiper-wrapper#essay-mini</span><br><span class="line">.essay-mini.wow.animation-slide-in(data-wow-duration=&quot;1s&quot; data-wow-delay=&quot;200ms&quot; data-wow-offset=&quot;100&quot; data-wow-iteration=&quot;1&quot;)</span><br><span class="line">    i.iconfont.icat-essay-mini(onclick=`pjax.loadUrl(&#x27;$&#123;theme.essay.home_mini_link&#125;&#x27;)` title=&quot;即刻短文&quot; style=&quot;font-size: 2.25rem; margin-right: 1rem&quot;)</span><br><span class="line">    .swiper-container.swiper-no-swiping#Essay(tabindex=&quot;-1&quot; onclick=`pjax.loadUrl(&#x27;$&#123;theme.essay.home_mini_link&#125;&#x27;)`)</span><br><span class="line">        .swiper-wrapper#essay-mini</span><br><span class="line">            case theme.essay.mode</span><br><span class="line">                when &#x27;local&#x27;</span><br><span class="line">                    each item, i in site.data.essay.essay_list.slice(0, 10)</span><br><span class="line">                        .li-style.swiper-slide</span><br><span class="line">                            | #&#123;item.content&#125;</span><br><span class="line">                            if item.image</span><br><span class="line">                                | 【图片】</span><br><span class="line">                            else if item.aplayer</span><br><span class="line">                                | 【音乐】</span><br><span class="line">                            else if item.video || item.bilibili</span><br><span class="line">                                | 【视频】</span><br><span class="line">                when &#x27;json&#x27;</span><br><span class="line">                    .li-style.essay-loading(style=&quot;text-align: center&quot;) 正在加载...</span><br><span class="line">                    script.</span><br><span class="line">                        (async function () &#123;</span><br><span class="line">                            const response = await fetch(&#x27;!&#123;url_for(theme.essay.mode_link)&#125;&#x27;);</span><br><span class="line">                            const data = await response.json();</span><br><span class="line">                            const list = data[0].essay_list.slice(0, 10).map(item =&gt; &#123;</span><br><span class="line">                                let type = item.image ? &#x27;【图片】&#x27; : item.aplayer ? &#x27;【音乐】&#x27; : item.video ? &#x27;【视频】&#x27; : &#x27;&#x27;;</span><br><span class="line">                                return `&lt;div class=&quot;li-style swiper-slide&quot;&gt;$&#123;item.content + type&#125;&lt;/div&gt;`</span><br><span class="line">                            &#125;);</span><br><span class="line">                            document.querySelector(&#x27;#essay-mini&#x27;).innerHTML = list.join(&#x27; &#x27;);</span><br><span class="line">                        &#125;)()</span><br><span class="line">                when &#x27;memos&#x27;</span><br><span class="line">                    .li-style.essay-loading(style=&quot;text-align: center&quot;) 正在加载...</span><br><span class="line">                    script.</span><br><span class="line">                        (async function () &#123;</span><br><span class="line">                            const response = await fetch(&#x27;!&#123;url_for(theme.essay.mode_link)&#125;&#x27;);</span><br><span class="line">                            const data = await response.json();</span><br><span class="line">                            const list = data.slice(0, 10).map(item =&gt; &#123;</span><br><span class="line">                                let data = item.content,</span><br><span class="line">                                    content = data.replace(/#(.*?)\s|\n/g, &#x27;&#x27;).replace(/\!\[(.*?)\]\((.*?)\)/g, &#x27;&#x27;).replace(/\&#123;(.*?)\&#125;/g, &#x27;&#x27;).replace(/(?&lt;!\!)\[(.*?)\]\((.*?)\)/g, &#x27;&#x27;).trim();</span><br><span class="line">                                    type = data.match(/\!\[(.*?)\]\((.*?)\)/g) ? &#x27;【图片】&#x27; : data.match(/&#123;\s*music\s*(.*?)\s*(.*?)\s*&#125;/g) ? &#x27;【音乐】&#x27; : data.match(/&#123;\s*player\s*(.*)\s*&#125;/g) || data.match(/&#123;\s*bilibili\s*(.*?)\s*&#125;/g) ? &#x27;【视频】&#x27; : &#x27;&#x27;;</span><br><span class="line">                                return `&lt;div class=&quot;li-style swiper-slide&quot;&gt;$&#123;content + type&#125;&lt;/div&gt;`</span><br><span class="line">                            &#125;);</span><br><span class="line">                            document.querySelector(&#x27;#essay-mini&#x27;).innerHTML = list.join(&#x27; &#x27;);</span><br><span class="line">                        &#125;)()</span><br><span class="line">    i.iconfont.icat-right-btn(title=&quot;查看全文&quot; onclick=`pjax.loadUrl(&#x27;$&#123;theme.essay.home_mini_link&#125;&#x27;)` style=&quot;margin-left: 1rem&quot;)</span><br></pre></td></tr></table></figure><p>新建 [blogRoot]&#x2F;themes&#x2F;butterfly&#x2F;source&#x2F;css&#x2F;_page&#x2F;homepage.styl 样式文件内容<br>（ + 号直接删除 即是正常缩进</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">+<span class="keyword">if</span> <span class="built_in">hexo-config</span>(<span class="string">&#x27;essay.enable&#x27;</span>) &amp;&amp; <span class="built_in">hexo-config</span>(<span class="string">&#x27;essay.home_mini&#x27;</span>)</span><br><span class="line">+  <span class="selector-class">.essay-mini</span></span><br><span class="line">+    <span class="attribute">background</span>: <span class="built_in">var</span>(--card-bg)</span><br><span class="line">+    <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color)</span><br><span class="line">+    <span class="attribute">padding</span>: <span class="number">0.5rem</span> <span class="number">1rem</span></span><br><span class="line">+    <span class="attribute">border-radius</span>: <span class="number">8px</span></span><br><span class="line">+    <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--icat-shadow-border)</span><br><span class="line">+    <span class="attribute">display</span>: flex</span><br><span class="line">+    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border)</span><br><span class="line">+    <span class="attribute">align-items</span>: center</span><br><span class="line">+    <span class="attribute">height</span>: <span class="number">50px</span></span><br><span class="line">+    <span class="attribute">animation</span>: slide-in <span class="number">0.6s</span> <span class="number">0.4s</span> backwards</span><br><span class="line">+    <span class="attribute">will-change</span>: transform</span><br><span class="line">+    <span class="attribute">transition</span>: .<span class="number">6s</span></span><br><span class="line">+</span><br><span class="line">+    <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">+      <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-hover-always)</span><br><span class="line">+</span><br><span class="line">+    <span class="selector-id">#Essay</span></span><br><span class="line">+      <span class="attribute">overflow</span>: hidden</span><br><span class="line">+      <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">+      <span class="attribute">overflow</span>: hidden</span><br><span class="line">+      <span class="attribute">text-overflow</span>: ellipsis</span><br><span class="line">+      <span class="attribute">white-space</span>: nowrap</span><br><span class="line">+</span><br><span class="line">+      <span class="selector-id">#essay-mini</span></span><br><span class="line">+        <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">+        <span class="attribute">height</span>: <span class="number">25px</span></span><br><span class="line">+        <span class="attribute">line-height</span>: <span class="number">25px</span></span><br><span class="line">+        <span class="attribute">display</span>: flex</span><br><span class="line">+        <span class="attribute">flex-direction</span>: column</span><br><span class="line">+</span><br><span class="line">+      <span class="selector-class">.li-style</span></span><br><span class="line">+        <span class="attribute">width</span>: auto</span><br><span class="line">+        <span class="attribute">max-width</span>: <span class="number">100%</span></span><br><span class="line">+        <span class="attribute">height</span>: <span class="number">25px</span></span><br><span class="line">+        <span class="attribute">text-align</span>: center</span><br><span class="line">+        <span class="attribute">overflow</span>: hidden</span><br><span class="line">+        <span class="attribute">text-overflow</span>: ellipsis</span><br><span class="line">+        <span class="attribute">font-weight</span>: <span class="number">700</span></span><br><span class="line">+        <span class="attribute">margin</span>: auto</span><br><span class="line">+        <span class="attribute">cursor</span>: pointer</span><br><span class="line">+        <span class="attribute">white-space</span>: nowrap</span><br><span class="line">+        user-<span class="selector-tag">select</span>: <span class="attribute">none</span></span><br><span class="line">+</span><br><span class="line">+    <span class="selector-tag">i</span>, <span class="selector-class">.li-style</span></span><br><span class="line">+      <span class="attribute">transition</span>: .<span class="number">6s</span></span><br><span class="line">+      <span class="attribute">cursor</span>: pointer</span><br><span class="line">+</span><br><span class="line">+      <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">+        <span class="attribute">color</span>: <span class="built_in">var</span>(--icat-blue)</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#recent-posts</span></span><br><span class="line">  &amp; &gt; <span class="selector-class">.recent-post-item</span><span class="selector-pseudo">:not</span>(:first-child)</span><br><span class="line"></span><br><span class="line">  ···</span><br></pre></td></tr></table></figure><p>在 _config.butterfly.yml 主题配置文件中 inject 下的 bottom 引入</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  <span class="string">···</span></span><br><span class="line"></span><br><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">···</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;https://cdn.staticfile.net/Swiper/10.3.1/swiper-bundle.min.js&quot;&gt;&lt;/script&gt;</span> <span class="comment"># Swiper - 轮播动画库</span></span><br><span class="line"></span><br><span class="line">  <span class="string">···</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 空间站建设日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HEXO搭建日志</title>
      <link href="/posts/e0b5f2d6.html"/>
      <url>/posts/e0b5f2d6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>其实是第二次搭建hexo了（因为电脑系统重装了，加上上一次搭建已经是古老事件，所以索性重来啦！）为了防止出现第三次（那种事情不要啊）写了这部日志，也顺带记录一下我都做了些什么修改，防止以后魔改到自己都不知道怎么修复bug。</p><h2 id="前期准备工作"><a href="#前期准备工作" class="headerlink" title="前期准备工作"></a>前期准备工作</h2><p>搭建前需要下载的软件(node、git)</p><p>node：官网下载：<a href="http://nodejs.cn/">http://nodejs.cn/</a><br><a href="https://blog.csdn.net/WHF__/article/details/129362462">Node.js下载安装及环境配置教程【超详细】_nodejs下载-CSDN博客</a></p><p>git：官网下载：<a href="https://git-scm.com/">https://git-scm.com/</a><br><a href="https://blog.csdn.net/mukes/article/details/115693833">Git 详细安装教程（详解 Git 安装过程的每一个步骤）_git安装-CSDN博客</a></p><p>建议将node的源切换成淘宝源。（但是我的淘宝源也动不了）</p><p>npm install下载依赖的时候不要用校园网！！下载的时候进度条一动不动，排除了一堆坑之后换成了默认源+魔法+手机热点才下载成功（但还是下载得好慢</p><h2 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h2><ol><li>进入cmd窗口输入指令：</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install <span class="literal">-g</span> hexo<span class="literal">-cli</span></span><br></pre></td></tr></table></figure><ol><li>下载好后输入hexo -v查看版本</li></ol><img src="/posts/e0b5f2d6/Untitled.png" class="" title="图片"><p>打开允许本地PowerShell在未签名的情况下运行，再尝试一次就好咯</p><img src="/posts/e0b5f2d6/Untitled1.png" class="" title="图片"><img src="/posts/e0b5f2d6/Untitled2.png" class="" title="图片"><ol><li>在E盘新建Myblog文件夹，右键用git bash打开，输入hexo init进行初始化，如果出现如图报错就输入一次npm install</li></ol><img src="/posts/e0b5f2d6/Untitled3.png" class="" title="图片"><ol start="2"><li>输入hexo-s，按住ctrl点网址</li></ol><img src="/posts/e0b5f2d6/Untitled4.png" class="" title="图片"><img src="/posts/e0b5f2d6/Untitled5.png" class="" title="图片"><p>我的blog初步搭建好啦！</p><h2 id="部署hexo到github"><a href="#部署hexo到github" class="headerlink" title="部署hexo到github"></a>部署hexo到github</h2><ol><li>在github建一个新仓库：用户名+github.io</li></ol><img src="/posts/e0b5f2d6/Untitled6.png" class="" title="图片"><p>2、生成ssh添加到github</p><p>在github上创建仓库完成之后，需要设置ssh免密登录</p><p>打开cmd窗口，执行如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;yourname&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;youremail&quot;</span></span><br></pre></td></tr></table></figure><p>用下面的两条命令检查用户名和邮箱是否设置正确</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config user.name</span><br><span class="line">git config user.email</span><br></pre></td></tr></table></figure><p>进入目录：C:\Users\xxx，打开cmd窗口或右键打开git bash 。</p><p>输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C xxx@qq.com</span><br></pre></td></tr></table></figure><p>后面是自己注册github的邮箱，然后敲三次回车。</p><p>在C:\Users\xxx下多了一个.ssh目录，打开后有一个公钥，一个私钥。id_rsa.pub是公钥，打开id_rsa.pub，复制里面的内容。</p><img src="/posts/e0b5f2d6/Untitled7.png" class="" title="图片"><img src="/posts/e0b5f2d6/Untitled8.png" class="" title="图片"><ol start="3"><li>进入github，点击Settings</li></ol><img src="/posts/e0b5f2d6/Untitled9.png" class="" title="图片"><p>点击SSH and GPG keys，然后点击右上角New SSH key</p><img src="/posts/e0b5f2d6/Untitled10.png" class="" title="图片"><p>点击 Add SSH key添加</p><img src="/posts/e0b5f2d6/Untitled11.png" class="" title="图片"><h2 id="进行部署"><a href="#进行部署" class="headerlink" title="进行部署"></a>进行部署</h2><ol><li>修改配置文件_config.yml</li></ol><img src="/posts/e0b5f2d6/Untitled12.png" class="" title="图片"><p>修改内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:Apritau/Apritau.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure><img src="/posts/e0b5f2d6/Untitled13.png" class="" title="图片"><ol start="2"><li>进入mblog文件夹使用cmd窗口或直接右键git bash打开</li></ol><p>先安装hexo-deployer-git，这个是部署的命令，这样才能用命令部署到github（漫长的等待）</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo<span class="literal">-deployer-git</span> <span class="literal">--save</span></span><br></pre></td></tr></table></figure><img src="/posts/e0b5f2d6/Untitled14.png" class="" title="图片"><p>依次执行以下命令（三件套）</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><img src="/posts/e0b5f2d6/Untitled15.png" class="" title="图片"><img src="/posts/e0b5f2d6/Untitled16.png" class="" title="图片"><p>注意：deploy时输入yes</p><p>在自己的github仓库进行刷新就可以看到上传成功</p><img src="/posts/e0b5f2d6/Untitled17.png" class="" title="图片"><p>现在就可以使用Apritau.github.io来访问我的博客啦:D</p><img src="/posts/e0b5f2d6/Untitled18.png" class="" title="图片"><p>在20岁这天我的个人blog诞生咯！！可喜可贺🎉</p><p>参考blog：</p><p><a href="https://blog.csdn.net/m0_48121128/article/details/132380427">hexo 安装、下载使用 butterfly 主题。部署到 github_hexo下载-CSDN博客</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 空间站建设日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>上传带图片的文章</title>
      <link href="/posts/5b054cb4.html"/>
      <url>/posts/5b054cb4.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h3 id="如果图片储存在本地"><a href="#如果图片储存在本地" class="headerlink" title="如果图片储存在本地"></a><strong>如果图片储存在本地</strong></h3><p>对于每篇文章，使用一个文件夹管理资源，优点是当文章很多时，<strong>便于结构化管理</strong>。</p><p>具体方法：</p><ol><li>修改hexo文件夹中的_config.yml文件，如下：</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">marked:</span></span><br><span class="line">  <span class="attr">prependRoot:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">postAsset:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ol start="2"><li>在终端cd到hexo文件夹，<code>hexo new [layout] &lt;title&gt;</code> 命令创建一篇新文章，此时会在hexo文件夹的source目录下，自动创建一个文件夹和.md文件。</li></ol><p>注：这句命令中的layout可暂时不写，使用默认的。title就是你的新文章的名字。如果文章名中有空格，务必将整个文章名用双引号引起来。如果文章名中没有空格，可以加双引号，也可以不加。图片命名也不要有空格。</p><p>例如，执行</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">&quot;HEXO搭建日志&quot;</span></span><br></pre></td></tr></table></figure><p>会在source&#x2F;_post文件夹下生成一个”如何发布文章到hexo博客上(含插入图片的方法).md”文件。如下：</p><img src="/posts/5b054cb4/1.png" class="" title="图片"><p>可以看到，同时还生成了一个同名的资源文件夹。</p><p>也可以直接在source&#x2F;_post文件夹下创建同名文件夹和md文件。</p><ol><li>我们可以将所有与该文章有关的资源（包括图片）放在这个关联文件夹中</li><li>通过相对路径来引用图片资源。</li></ol><p>例如，将“1.jpeg”这个图片资源放在该文件夹中，并在.md文件中像这样引用图片：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">图片</span>](<span class="link">HEXO搭建日志/1.jpeg</span>)</span><br></pre></td></tr></table></figure><p>这个方法在资源较多时方便管理。</p><h3 id="如果图片为网络链接"><a href="#如果图片为网络链接" class="headerlink" title="如果图片为网络链接"></a><strong>如果图片为网络链接</strong></h3><p>添加图片，可以在md文档中，通过下面的方式引用图片，其中双引号内的图片title可省略。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">图片</span>](<span class="link">图片链接地址 &quot;1.jpeg&quot;</span>)</span><br></pre></td></tr></table></figure><p>另附<strong>Typora编辑器中不显示图片</strong>的解决方案：</p><p>安装下面的插件，可以使Typora等Markdown编辑器预览以及Hexo发布预览时，均能正常显示图片。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo<span class="literal">-asset-img</span> <span class="literal">--save</span></span><br></pre></td></tr></table></figure><p>这样如果使用Typora编辑markdown文档，在typora内也可以显示图片了。</p><p>参考博客：<a href="https://blog.csdn.net/2301_77285173/article/details/130189857">在hexo博客中插入图片的方法_hexo插入图片-CSDN博客</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
